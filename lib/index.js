import*as Z from"react";var Vt={670:(E,h,c)=>{c.d(h,{A:()=>R});var x=c(758),_=c.n(x),p=c(935),l=c.n(p),d=l()(_());d.push([E.id,`@keyframes before {
  0% {
    width: 0.6rem;
    box-shadow: 1.2rem -0.6rem #ff3e38, -1.2rem 0.6rem #318ffa;
  }
  35% {
    width: 3rem;
    box-shadow: 0 -0.6rem #ff3e38, 0 0.6rem #318ffa;
  }
  70% {
    width: 0.6rem;
    box-shadow: -1.2rem -0.6rem #ff3e38, 1.2rem 0.6rem #318ffa;
  }
  100% {
    box-shadow: 1.2rem -0.6rem #ff3e38, -1.2rem 0.6rem #318ffa;
  }
}
@keyframes after {
  0% {
    height: 0.6rem;
    box-shadow: 0.6rem 1.2rem #6ce581, -0.6rem -1.2rem #fecb2e;
  }
  35% {
    height: 3rem;
    box-shadow: 0.6rem 0 #6ce581, -0.6rem 0 #fecb2e;
  }
  70% {
    height: 0.6rem;
    box-shadow: 0.6rem -1.2rem #6ce581, -0.6rem 1.2rem #fecb2e;
  }
  100% {
    box-shadow: 0.6rem 1.2rem #6ce581, -0.6rem -1.2rem #fecb2e;
  }
}
.spinner {
  position: relative;
  height: 100%;
  min-height: 100px;
  display: block;
  overflow: hidden;
  pointer-events: auto;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 999;
  background-color: hsla(0, 0%, 72%, 0.24);
}
.spinner.absolute {
  position: absolute;
  min-height: auto;
}
.spinner.global {
  position: fixed;
  width: 100vw;
  height: 100vh;
}
.spinner .spinning {
  width: 3rem;
  height: 3rem;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) rotate(165deg);
  margin: 0;
}
.spinner .spinning::before,
.spinner .spinning::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  display: block;
  width: 0.6rem;
  height: 0.6rem;
  border-radius: 0.3rem;
  transform: translate(-50%, -50%);
}
.spinner .spinning::before {
  animation: before 1.5s infinite;
}
.spinner .spinning::after {
  animation: after 1.5s infinite;
}
`,""]);const R=d},845:(E,h,c)=>{c.d(h,{Ay:()=>S,nf:()=>R,vu:()=>M});var x=c(758),_=c.n(x),p=c(935),l=c.n(p),d=l()(_());d.push([E.id,`.Iuy_e {
  text-decoration: none;
  cursor: pointer;
  color: var(--linkColor);
  background-color: transparent;
  font-weight: 500;
  transition: color 0.3s;
}
.Iuy_e:active, .Iuy_e.D3oJg {
  color: var(--linkActiveColor, #42a5f5);
}
.Iuy_e:hover {
  color: var(--linkHoverColor, #2196f3);
}
.Iuy_e[disabled] {
  cursor: not-allowed;
  opacity: 0.7;
}
.Iuy_e[disabled]:active, .Iuy_e[disabled].D3oJg, .Iuy_e[disabled]:hover {
  color: var(--linkColor);
}
`,""]);var R="Iuy_e",M="D3oJg";const S=d},935:E=>{E.exports=function(h){var c=[];return c.toString=function(){return this.map(function(_){var p="",l=typeof _[5]<"u";return _[4]&&(p+="@supports (".concat(_[4],") {")),_[2]&&(p+="@media ".concat(_[2]," {")),l&&(p+="@layer".concat(_[5].length>0?" ".concat(_[5]):""," {")),p+=h(_),l&&(p+="}"),_[2]&&(p+="}"),_[4]&&(p+="}"),p}).join("")},c.i=function(_,p,l,d,R){typeof _=="string"&&(_=[[null,_,void 0]]);var M={};if(l)for(var S=0;S<this.length;S++){var U=this[S][0];U!=null&&(M[U]=!0)}for(var j=0;j<_.length;j++){var P=[].concat(_[j]);l&&M[P[0]]||(typeof R<"u"&&(typeof P[5]>"u"||(P[1]="@layer".concat(P[5].length>0?" ".concat(P[5]):""," {").concat(P[1],"}")),P[5]=R),p&&(P[2]&&(P[1]="@media ".concat(P[2]," {").concat(P[1],"}")),P[2]=p),d&&(P[4]?(P[1]="@supports (".concat(P[4],") {").concat(P[1],"}"),P[4]=d):P[4]="".concat(d)),c.push(P))}},c}},758:E=>{E.exports=function(h){return h[1]}},197:(E,h)=>{var c;var x=Symbol.for("react.transitional.element"),_=Symbol.for("react.fragment");function p(l,d,R){var M=null;if(R!==void 0&&(M=""+R),d.key!==void 0&&(M=""+d.key),"key"in d){R={};for(var S in d)S!=="key"&&(R[S]=d[S])}else R=d;return d=R.ref,{$$typeof:x,type:l,key:M,ref:d!==void 0?d:null,props:R}}c=_,h.jsx=p,h.jsxs=p},85:(E,h,c)=>{E.exports=c(197)},591:E=>{var h=[];function c(p){for(var l=-1,d=0;d<h.length;d++)if(h[d].identifier===p){l=d;break}return l}function x(p,l){for(var d={},R=[],M=0;M<p.length;M++){var S=p[M],U=l.base?S[0]+l.base:S[0],j=d[U]||0,P="".concat(U," ").concat(j);d[U]=j+1;var N=c(P),V={css:S[1],media:S[2],sourceMap:S[3],supports:S[4],layer:S[5]};if(N!==-1)h[N].references++,h[N].updater(V);else{var B=_(V,l);l.byIndex=M,h.splice(M,0,{identifier:P,updater:B,references:1})}R.push(P)}return R}function _(p,l){var d=l.domAPI(l);d.update(p);var R=function(S){if(S){if(S.css===p.css&&S.media===p.media&&S.sourceMap===p.sourceMap&&S.supports===p.supports&&S.layer===p.layer)return;d.update(p=S)}else d.remove()};return R}E.exports=function(p,l){l=l||{},p=p||[];var d=x(p,l);return function(M){M=M||[];for(var S=0;S<d.length;S++){var U=d[S],j=c(U);h[j].references--}for(var P=x(M,l),N=0;N<d.length;N++){var V=d[N],B=c(V);h[B].references===0&&(h[B].updater(),h.splice(B,1))}d=P}}},128:E=>{var h={};function c(_){if(typeof h[_]>"u"){var p=document.querySelector(_);if(window.HTMLIFrameElement&&p instanceof window.HTMLIFrameElement)try{p=p.contentDocument.head}catch{p=null}h[_]=p}return h[_]}function x(_,p){var l=c(_);if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(p)}E.exports=x},51:E=>{function h(c){var x=document.createElement("style");return c.setAttributes(x,c.attributes),c.insert(x,c.options),x}E.exports=h},855:(E,h,c)=>{function x(_){var p=c.nc;p&&_.setAttribute("nonce",p)}E.exports=x},740:E=>{function h(_,p,l){var d="";l.supports&&(d+="@supports (".concat(l.supports,") {")),l.media&&(d+="@media ".concat(l.media," {"));var R=typeof l.layer<"u";R&&(d+="@layer".concat(l.layer.length>0?" ".concat(l.layer):""," {")),d+=l.css,R&&(d+="}"),l.media&&(d+="}"),l.supports&&(d+="}");var M=l.sourceMap;M&&typeof btoa<"u"&&(d+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(M))))," */")),p.styleTagTransform(d,_,p.options)}function c(_){if(_.parentNode===null)return!1;_.parentNode.removeChild(_)}function x(_){if(typeof document>"u")return{update:function(){},remove:function(){}};var p=_.insertStyleElement(_);return{update:function(d){h(p,_,d)},remove:function(){c(p)}}}E.exports=x},656:E=>{function h(c,x){if(x.styleSheet)x.styleSheet.cssText=c;else{for(;x.firstChild;)x.removeChild(x.firstChild);x.appendChild(document.createTextNode(c))}}E.exports=h}},Ze={};function w(E){var h=Ze[E];if(h!==void 0)return h.exports;var c=Ze[E]={id:E,exports:{}};return Vt[E](c,c.exports,w),c.exports}w.n=E=>{var h=E&&E.__esModule?()=>E.default:()=>E;return w.d(h,{a:h}),h},w.d=(E,h)=>{for(var c in h)w.o(h,c)&&!w.o(E,c)&&Object.defineProperty(E,c,{enumerable:!0,get:h[c]})},w.o=(E,h)=>Object.prototype.hasOwnProperty.call(E,h),w.nc=void 0;var K={};(()=>{w.d(K,{N_:()=>Bt,vY:()=>Nt,aM:()=>jt,lq:()=>Lt,rd:()=>$t});var E=e=>{var r={};return w.d(r,e),r},h=e=>()=>e;const c=E({Suspense:()=>Z.Suspense,default:()=>Z.default,useCallback:()=>Z.useCallback,useEffect:()=>Z.useEffect,useRef:()=>Z.useRef,useState:()=>Z.useState}),_=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),l=e=>_(e)==="array",R=e=>_(e)==="object",S=e=>e?.$$typeof&&typeof e.$$typeof=="symbol"&&["react.transitional.element","react.element"].includes(e.$$typeof.description),j=e=>e?.__v_isVNode,N=(e,r)=>Object.prototype.hasOwnProperty.call(e??{},r),V=e=>{if(!l(e)&&!R(e))return e;const r=l(e)?[]:{};for(const s in e)if(N(e,s)){const n=e[s];r[s]=S(n)||j(n)||typeof n!="object"?n:n!==e?V(n):"cyclic"}else Object.setPrototypeOf(r,{[s]:e[s]});return r},B=V,_e=e=>_(e)==="function",ee=e=>_(e)==="promise"||R(e)&&_e(e.then),we=(e,r=3e5,s="\u8BF7\u6C42\u8D85\u65F6\uFF01")=>{if(!ee(e))return{};let n=null,t=null;return{promiseFn:new Promise((a,f)=>{n=(o="canceled")=>{clearTimeout(t),a({canceled:!0,errMsg:o})},r&&(r=typeof r!="number"?12e4:r,t=setTimeout(()=>n(s),r)),e.then(o=>{clearTimeout(t),a({result:o,errMsg:!1})}).catch(o=>{clearTimeout(t),f(o)})}),cancelFn:n}},Me=e=>e?e.charAt(e.length-1)==="/"?e.slice(0,-1):e:"";var $=w(85);const Ke=(e,r)=>(0,$.jsx)("div",{dangerouslySetInnerHTML:{__html:e},...r}),ue=e=>{const{error:r={},info:s=""}=e||{},{message:n,stack:t,errMsg:i}=r;let a=i||t||r.toString();a=`${a}
${s}`.replace(/\r|\n|\r\n/g,"<br/>"),a=a.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),a=a.replace(/\s/g,"&nbsp;");const f=n?.slice(0,120).split(". ").slice(0,2).join(". ");return(0,$.jsxs)("div",{style:{padding:"15px 20px",backgroundColor:"#fff",wordWrap:"break-word"},children:[Ke(a,{style:{color:"red"}}),f&&(0,$.jsxs)("a",{style:{display:"inline-block",padding:"15px",color:"#00b4cf"},href:`https://stackoverflow.com/search?q=${f}`,target:"_blank",children:[" ","--> \u53BB\u7F51\u4E0A\u67E5\u627E\u9519\u8BEF\u539F\u56E0\uFF1F"]})]})},te=e=>/^https?:\/\/[^\s/?.#]+\.[^\s]+/.test(e),re=()=>{const e={};return{on:(t,i)=>{e[t]||(e[t]=[]),e[t].indexOf(i)===-1&&e[t].push(i)},emit:(t,i)=>{e[t]&&e[t].map(a=>a(i))},off:(t,i=null)=>{if(e[t]){if(typeof i!="function")return delete e[t];const a=e[t].indexOf(i);a>-1&&(e[t].splice(a,1),e[t].length||delete e[t])}}}},Oe=e=>{const r={};for(let s in e)N(e,s)||(r[s]=e[s]);return r},et=(e,r)=>{if(!R(e))return r;if(!R(r))return e;const s={...Oe(e),...Oe(r)},n={...e,...r};return Object.keys(s).map(t=>{Object.setPrototypeOf(n,{[t]:s[t]})}),n},he=()=>{const{on:e,emit:r,off:s}=re(),n={};return{getState:o=>B(n[o]),setState:(o,m=!1)=>{if(typeof o=="function"&&(o=o(B(n))),!R(o))throw TypeError("\u5FC5\u987B\u4F20\u5165object\u5BF9\u8C61\uFF01");const u=B(o);Object.keys(u).map(y=>{const A=n[y],g=u[y],C=R(g)&&R(A)?et(A,g):g;!m&&r(y,C),n[y]=C})},subscribe:(o,m)=>(e(o,m),()=>s(o,m)),unsubscribe:s,clean:o=>{typeof o=="string"?n[o]=void 0:Array.isArray(o)?o.map(m=>n[m]=void 0):Object.keys(n).map(m=>n[m]=void 0)}}},Te=e=>(r,s)=>{const[n,t]=(0,c.useState)(()=>{const o=e?.getState(r);return o!==void 0?o:(s!==void 0&&e?.setState({[r]:s},!0),s)}),i=(0,c.useCallback)(o=>e?.setState({[r]:typeof o=="function"?o(e?.getState(r)):o}),[]),a=(0,c.useCallback)(o=>e?.subscribe(r,o),[]),f=(0,c.useCallback)((o=o)=>e?.clean(o),[]);return(0,c.useEffect)(()=>{e?.subscribe(r,o=>t(o))},[]),[n,i,a,f]},tt=he(),ar=Te(tt),ur=re(),ir=re(),lr="push-emitter",fr="replace-emitter",pr="useRoute-emitter",ge={delay:8e3,timeoutMsg:"\u8BF7\u6C42\u8D85\u65F6\uFF01",cancelMsg:"\u8BF7\u6C42\u5DF2\u53D6\u6D88\uFF01"},ve="/404",rt={getState:()=>history.state,go:e=>history.go(e),forward:()=>history.forward(),back:()=>history.back()},Fe=(e,r,s,n,t=[])=>{const i=o=>{for(let m=0,u=o.length;m<u;m++){const y=o[m],A=y[n].split("?")[0];if(new RegExp("^"+A.replace(/:[^/]+/g,"[^/]+")+"$").test(r)&&!y.childSameRouteLevel)return y;if(l(y[s])){const C=i(y[s]);if(C)return C}}},a=i(e);if(!a)return ve;const{redirect:f}=a;return f?te(f)?f:t.includes(f)?t:(t.push(f),Fe(e,f.split("?")[0],s,n,t)):t[t.length-1]},nt=(e,r,s,n,t)=>{if(!l(e))return null;const i=u=>{const y=u.split("/"),A=r.split("/"),g={};return y.map((C,O)=>C.indexOf(":")===0&&(g[C.slice(1)]=A[O])),g},a=(u,y)=>{const A=[],g=y.split("/:")[0];for(let C=0,O=u.length;C<O;C++){const b=u[C];if(b[t]===g){b.active=!0;const{name:v,title:k,icon:F,params:T}=b;A.push({name:v,title:k,icon:F,params:T,[t]:g})}else if(y.indexOf(`${b[t]}/`)===0){b.active=!0;const v=i(b[t]),k=Object.keys(v).map(H=>v[H]).join("/"),{name:F,title:T,icon:I}=b,D=k?`${g}/${k}`:b[t];A.push({name:F,title:T,icon:I,[t]:D,params:{...b.params,...v}})}else if(b[t]===y){b.active=!0;const v=i(b[t]),{[n]:k,...F}=b;A.push({...F,[t]:r,params:{...F.params,...s,...v}})}}return A},f=(u,y)=>{for(let A=0,g=u.length;A<g;A++){const C=u[A];if(y.indexOf(`${C[t]}/`)===0){C.active=!0;return}}},o=u=>{for(let y=0,A=u.length;y<A;y++){const g=u[y],C=(g[t]||"").split("?")[0];if(C===r){if(g.childSameRouteLevel){g.active=!0,g.open=!0;const{[n]:k,...F}=g;return[F,...o(g[n])]}g.hideMenu&&f(u,g.parentPath||C),g.active=!0;const{[n]:b,...v}=g;return[{...v,params:{...v.params,...s}}]}if(new RegExp("^"+C.replace(/:[^/]+/g,"[^/]+")+"$").test(r))return a(u,C);if(l(g[n])){const b=o(g[n]);if(b){g.active=!0,g.open=!0;const{[n]:v,...k}=g;return[k,...b]}}}},m=o(e)||[];return{result:e,current:m}},$e=(e,r,s)=>e.filter(n=>n.hideMenu||n[s].indexOf("/:")>-1?!1:(l(n[r])&&(n[r]=$e(n[r],r,s)),!0)),st=(e,r,s,n="children",t="path")=>{const i=Fe(e,r,n,t);if(i)return{redirect:i};const{result:a,current:f}=nt(e,r,s,n,t),o=$e(a,n,t);return{current:f,menu:o}},Ie=e=>l(e)&&!!e.length,ye=(e,r)=>{const s=["#/","/"],n=s[!!r-0];if(!e||s.includes(e))return n;const t=e.charAt(e.length-1)==="/"?e.slice(0,-1):e;return r||t.indexOf("#/")>-1?t:`#${t}`},ne=(e,r,s,n=!1)=>{const t=ye(r,s);return n?t:s?e&&t==="/"?e:`${e}${t}`:e?`${e}/${t}`:t},ot=(e,r,s,n,t,i)=>{if(!Ie(e))return e;const a=(f,o="",m=0)=>f.filter(u=>!u.denied).map(u=>{if(!i&&!u.exact&&!te(u[n])){(!u[n]||u[n]==="javascript:;")&&(u[n]="");const y=u[n].charAt(0)==="/"&&o.charAt(o.length-1)==="/"?u[n].slice(1):u[n].charAt(0)!=="/"&&o.charAt(o.length-1)!=="/"?`/${u[n]}`:u[n];u[n]=o?o+y:ne(t,y,r)}if(u.redirect&&!te(u.redirect)&&(u.redirect=ne(t,u.redirect,r)),Ie(u[s])&&(u[s]=a(u[s],u[n],m+1),!u.redirect)){const y=u[s].findIndex(A=>A[n]===u[n]);y&&(u.redirect=u[s][0][n]),y>-1&&(u.childSameRouteLevel=m+1)}return u});return a(e)},De=e=>{if(!R(e))return"";const r=[];return Object.keys(e).map((s,n)=>{const t=n>0?"&":"?";r.push(`${t}${s}=${e[s]}`)}),r.join("")},be=(e="")=>{const[r,s]=e.split("?");if(s){const n={};return s.split("&").map(i=>{const[a,f]=i.split("=");n[a]=f}),{path:r,params:n}}return{path:r}},ct=()=>{document.documentElement.scrollTop?document.documentElement.scrollTop=0:document.body.scrollTop&&(document.body.scrollTop=0)},at=(e,r,s={})=>{const n=s.description??"";for(let t=e.length-1,i;i=e[t--];){const{title:a,name:f}=i;if(typeof a=="string"&&a.length)return document.title=a,document.getElementsByTagName("meta").description.content=`${n??""}${a}`,a;if((a==null||a===!0)&&f){const o=r?`${f}-${r}`:f;return document.title=o,document.getElementsByTagName("meta").description.content=`${n??""}${o}`,o}if(r)return document.title=r,document.getElementsByTagName("meta").description.content=`${n??""}${r}`,r}},ut=e=>{const{pathname:r,search:s,hash:n}=location;if(e){const o=ye(r,e),m=decodeURIComponent(`${o}${s}`),{params:u}=be(m);return{path:m,params:u}}const t=decodeURIComponent(ye(n,e)),{params:i}=be(t),a=Me(r);return{path:a?`${a}/${t}`:t,params:i}},Ee=(e,r,s)=>{typeof e=="function"&&e({...r,stay:new Date-s})},Be=(e,r,s,n)=>{let t=typeof e=="string"?e:e.path??"";const i=De(e.query);te(t)||(t=ne(s,t,n,e.exact)),window?.open(`${t}${i}`,r)},it=(e,r,s,n)=>{if(e.target||te(e.path)){Be(e,e.target,r,s);return}let t,i,a;if(typeof e=="string")t=e;else if(R(e))t=e.path,i=e.params,a=e.query;else return;!t||t==="."||t==="./"?t=n:t.indexOf("./")===0?t=`${n.split("?")[0]}${t.replace("./","/")}`:t.indexOf("../")===0&&(t=`${n.split("?")[0].split("/").slice(0,-1).join("/")}${t.replace("../","/")}`),t=ne(r,t,s,e?.exact);const f=be(t);t=f.path;const o={...f.params,...a},m=De(o);return t=`${t}${m}`,i={...i,...o},t===n?!1:{path:t,params:i}},Le=(e,r)=>{const s=e.split(r);return s.length>1?["","/"].includes(s[1].slice(0,1)):!1},lt=re(),je=e=>{const{on:r,emit:s,off:n}=lt;return{on:t=>r(e,t),emit:t=>s(e,t),off:t=>n(e,t)}},ft=e=>(r,s)=>{const{getState:n,setState:t,subscribe:i,unsubscribe:a,clean:f}=e;return s!==void 0&&t({[r]:s},!0),{getState:()=>n(r),setState:(o,m)=>t({[r]:o},m),subscribe:o=>i(r,o),unsubscribe:()=>a(r),clean:()=>f(r)}},pt=he(),dt=ft(pt),Ce=je("push-emitter"),Ne=je("replace-emitter"),J=dt("route-store"),mt=re(),Ue=he(),_t=Te(Ue),ht=()=>![typeof window,typeof document].includes("undefined"),gt=e=>{if(!ht())return;const r=document.createElement("div");return r.innerHTML=e,r.children[0]};class vt extends c.default.Component{state={error:null};static getDerivedStateFromError(r){return{error:r}}componentDidCatch(r,s){const{errorReport:n}=this.props;typeof n=="function"&&n({error:r,info:s.componentStack})}render(){const{error:r}=this.state,{fallback:s,children:n}=this.props;return r?s?.(r)??r:n}}const yt=({children:e,report:r})=>{const s=(0,c.useRef)();return s.current?.state&&(s.current.state.error=null),(0,$.jsx)(vt,{ref:s,fallback:(n,t)=>ue({error:n,info:t}),errorReport:r,children:e})};var bt=w(591),We=w.n(bt),Et=w(740),He=w.n(Et),Ct=w(128),Ve=w.n(Ct),Rt=w(855),Je=w.n(Rt),St=w(51),Xe=w.n(St),At=w(656),qe=w.n(At),ie=w(670),z={};z.styleTagTransform=qe(),z.setAttributes=Je(),z.insert=Ve().bind(null,"head"),z.domAPI=He(),z.insertStyleElement=Xe();var Rr=We()(ie.A,z);const Sr=ie.A&&ie.A.locals?ie.A.locals:void 0,xt=({global:e,absolute:r})=>(0,$.jsx)("div",{className:`spinner${e?" global":""}${r?" absolute":""}`,children:(0,$.jsx)("figure",{className:"spinning"})}),Pt=()=>{const e=(0,c.useRef)([]);return(0,c.useEffect)(()=>()=>{e.current.map(s=>s.cancelFn()),e.current=[]},[]),{cancelablePromise:(0,c.useCallback)((s,n=!0)=>{const t=we(s,n);return e.current.indexOf(t)===-1&&e.current.push(t),t.promiseFn},[])}},Ye=(e={})=>{const{cancelablePromise:r}=Pt(),[s,n]=(0,c.useState)(e),t=(0,c.useRef)({}),i=(0,c.useRef)({}),a=(0,c.useCallback)((o=null)=>{Array.isArray(o)&&o.length?o.map(m=>t.current[m]=e[m]):t.current=e},[]),f=(0,c.useCallback)((o,m,u=!1)=>{const y=Object.keys(o),A=JSON.stringify(y.sort());if(!i.current[A]){i.current[A]=!0,u&&a(Array.isArray(u)?u:y),y.map(g=>{t.current[g]||(t.current[g]={}),t.current[g].pending=!0}),n({...t.current});for(let g=0,C=y.length;g<C;g++){const O=y[g];r(o[O]).then(b=>{let{result:v,errMsg:k}=b;g===C-1&&(i.current[A]=!1),typeof m=="function"&&(v=m(v)||v),t.current[O]={...v,pending:!1},k===!1&&n({...t.current})}).catch(b=>{throw g===C-1&&(i.current[A]=!1),t.current[O]={error:b,pending:!1},n({...t.current}),b})}}},[]);return[s,f,a]},le=e=>Object.keys(e).length,kt=e=>{const{Comp:r,restResolve:s,loadPromise:n,params:t,children:i}=e,[a,f]=Ye(),[o,m]=Ye();return(0,c.useEffect)(()=>{le(s)&&f(s),le(n)&&m(n)},[s,n]),(0,c.useEffect)(()=>{const u=le(a);u&&u===le(s)&&t.store.setState(a)},[a]),(0,$.jsx)(r,{...t,...a,...o,children:i})},wt=e=>e===!1?null:S(e)?e:_e(e)?(0,$.jsx)(e,{}):(0,$.jsx)(xt,{}),Mt=({Loading:e,ErrorBoundary:r,loadedComp:s})=>{const n=(0,$.jsx)(c.Suspense,{fallback:wt(e),children:s});return r===!1?n:_e(r)?(0,$.jsx)(r,{children:n}):(0,$.jsx)(yt,{children:n})},ze=({Comp:e,routerProps:r,children:s})=>{const{params:n,...t}=r,{loading:i,errorBoundary:a,...f}=n,o=(0,$.jsx)(kt,{Comp:e,...t,params:f,children:s});return Mt({Loading:i,ErrorBoundary:a,loadedComp:o})},Re={},Se=(e,r,s,n)=>ee(s)?s.then(t=>ze({Comp:e,routerProps:r,children:t.default??t})):ze({Comp:e,routerProps:r,children:s}),Ot=(e,r,s)=>{const n={},t={};return R(e)?(Object.keys(e).map(i=>{const a=r.getState(i);a==null?t[i]=e[i](s):n[i]=a}),{cachedResolve:n,restResolve:t}):{cachedResolve:n,restResolve:t}},Tt=(e,r)=>{if(!R(e))return{};const s={};return Object.keys(e).map(n=>s[n]=e[n](r)),s},Ft=e=>{const{current:r,menu:s,...n}=e,t=r.map(f=>{const{component:o,resolve:m,loadData:u,loading:y,errorBoundary:A,icon:g,...C}=f;return C}),i=[...r].filter(f=>f.component),a=(f=0)=>{if(!i.length)return null;const o=i.shift(),{component:m,resolve:u,loadData:y,icon:A,key:g,...C}=o;if(typeof m=="function"||ee(m)){const O=`${C.path}${C.childSameRouteLevel??""}`;let b=Re[O];const{cachedResolve:v,restResolve:k}=Ot(u,n.store,C),T={loadPromise:Tt(y,C),restResolve:k,params:{current:t,...n,...C,...v}},I=a(f+1);if(b)return Se(b,T,I,O);try{b=m(),b=S(b)?m:b}catch{b=m}return ee(b)?b.then(D=>(b=D.default??D,Re[O]=b,Se(b,T,I,O))):(Re[O]=b,Se(b,T,I,O))}return typeof m=="string"?gt(m):m};return a()},$t=e=>{const[r,s]=(0,c.useState)(e),[n,t]=(0,c.useState)(),[i,a]=(0,c.useState)(),f=(0,c.useRef)(),o=(0,c.useRef)(),m=(0,c.useRef)(),u=(0,c.useRef)(),y=()=>{typeof f.current=="function"&&(f.current({cancel:ge.cancelMsg}),f.current=null)},A=(0,c.useCallback)(v=>{typeof v=="function"?s(k=>({...k,...v(k)})):R(v)&&s(k=>({...k,...v}))},[]),g=(v,k="pushState")=>{const{basepath:F,browserRouter:T}=u.current,I=m.current,D=it(v,F,T,I);if(!D)return;const{path:H,params:Q}=D;b({inputPath:H,inputParams:Q},()=>history[k](v?.state,"",H))},C=(0,c.useCallback)(v=>g(v),[]),O=(0,c.useCallback)(v=>g(v,"replaceState"),[]),b=(0,c.useCallback)(({inputPath:v="",inputParams:k={}},F)=>{const T=+new Date,{browserRouter:I,childKey:D,idKey:H,title:Q,metas:fe,routers:pe,beforeRender:se,afterRender:oe,basepath:ce,allowedNotFound:W,...Ut}=u.current;if(!v){const{path:L,params:q}=ut(I);v=L,k={...k,...q}}const Ae=m.current;new Promise((L,q)=>{pe?.length||q("\u8DEF\u7531\u4E3A\u7A7A\uFF01"),v!==m.current&&typeof se=="function"?se({path:v,params:k,prevPath:Ae},L,q):L()}).then(L=>{if(L===!1)return;const q=L?.path;if(q&&ne(ce,q,I)!==v){O(L);return}o.current=o.current??v;const{redirect:Y,current:ae,menu:Wt}=st(B(pe),v.split("?")[0],k,D,H);if(Y){if(W&&Y===ve&&(typeof W=="boolean"||typeof W=="string"&&Le(o.current,W)||l(W)&&W.find(Pe=>Le(o.current,Pe))))return;if(l(Y)){console.error(`\u522B\u95F9\uFF0C[${[v,...Y].join(" -> ")}] \u91CD\u5B9A\u5411\u6B7B\u5FAA\u73AF\uFF01\uFF01\uFF01`);return}return Y===ve?O({path:Y}):C({path:Y,exact:!0})}F?.(),v?.split("?")[0]!==m.current?.split("?")[0]&&ct(),at(ae,Q,fe);const Ge={eventBus:mt,store:Ue,useStore:_t,...Ut,updateRouter:A,emitRouter:J.subscribe,router:{push:C,replace:O},current:ae,menu:Wt,inputPath:o.current,prevPath:Ae,browserRouter:I,basepath:ce,title:Q,history:{...rt,goBack:de=>C({...de,path:Ae})}};J.setState(Ge);const xe=Ft(Ge);if(m.current=v,o.current=null,y(),ee(xe)){const{promiseFn:de,cancelFn:Pe}=we(xe,{delay:ge.delay,msg:{timeout:ge.timeoutMsg}});return f.current=Pe,a(!0),de.then(me=>{f.current=null;const{result:Ht,errMsg:ke}=me,Qe=ke===!1?Ht:ke?.timeout?ue({error:{errMsg:`${v} ${ke.timeout}`}}):null;Qe&&(a(!1),Ee(oe,ae.slice(-1)[0],T),t(Qe))}).catch(me=>{throw f.current=null,a(!1),Ee(oe,ae.slice(-1)[0],T),t(ue({error:me})),me})}Ee(oe,ae.slice(-1)[0],T),t(xe)}).catch(L=>{throw t(ue({error:L})),L})},[]);return(0,c.useEffect)(()=>{const v={description:document.getElementsByTagName("meta").description.content??""},{childKey:k="children",idKey:F="path",browserRouter:T=!1,routers:I=[],basepath:D="",exact:H=!1,inputPath:Q="",inputParams:fe={},...pe}=r,se=Me(D),oe=ot(B(I),T,k,F,se,H);u.current={...pe,childKey:k,idKey:F,browserRouter:T,routers:oe,basepath:se,metas:v};const ce=T?"popstate":"hashchange",W=()=>b({});return b({inputPath:Q,inputParams:fe}),Ce.on(C),Ne.on(O),window.addEventListener(ce,W,!1),()=>{y(),Ce.off(C),Ne.off(O),window.removeEventListener(ce,W,!1)}},[r]),{updateRouter:A,output:n,loading:i}},It=e=>{const{to:r,onClick:s,preventDefault:n,stopPropagation:t=!0,exact:i=!0,target:a,...f}=e,o=()=>{const u=typeof r=="string"?{exact:i,path:r}:{exact:i,...r};Ce.emit(u)};return u=>{if(u.preventDefault(),t&&u.stopPropagation(),!f?.disabled){if(!n){if(a){const{browserRouter:y,basepath:A}=J.getState();Be(r,a,A,y);return}o()}typeof s=="function"&&s()}}};var X=w(845),G={};G.styleTagTransform=qe(),G.setAttributes=Je(),G.insert=Ve().bind(null,"head"),G.domAPI=He(),G.insertStyleElement=Xe();var Fr=We()(X.Ay,G);const $r=X.Ay&&X.Ay.locals?X.Ay.locals:void 0,Dt=e=>{if(!e)return X.nf;const r=e.trim().split(" ").filter(Boolean),n=r.find(t=>t==="active")?[X.vu]:[];return[X.nf,...n,...r].join(" ")},Bt=e=>{const{to:r,onClick:s,preventDefault:n,stopPropagation:t,exact:i,target:a,className:f,...o}=e;return(0,$.jsx)("span",{onClick:It(e),className:Dt(f),...o})},Lt=()=>{const[e,r]=(0,c.useState)(J.getState());return(0,c.useEffect)(()=>J.subscribe(s=>r(s)),[]),e},jt=J.getState,Nt=J.subscribe})();var Jt=K.N_,Xt=K.vY,qt=K.aM,Yt=K.lq,zt=K.rd;export{Jt as Link,Xt as emitRoute,qt as getRoute,Yt as useRoute,zt as useRouter};

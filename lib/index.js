import*as D from"react";var ze={670:(e,r,n)=>{n.d(r,{A:()=>i});var s=n(758),t=n.n(s),c=n(935),o=n.n(c),a=o()(t());a.push([e.id,`@keyframes before {
  0% {
    width: 0.6rem;
    box-shadow: 1.2rem -0.6rem #ff3e38, -1.2rem 0.6rem #318ffa;
  }
  35% {
    width: 3rem;
    box-shadow: 0 -0.6rem #ff3e38, 0 0.6rem #318ffa;
  }
  70% {
    width: 0.6rem;
    box-shadow: -1.2rem -0.6rem #ff3e38, 1.2rem 0.6rem #318ffa;
  }
  100% {
    box-shadow: 1.2rem -0.6rem #ff3e38, -1.2rem 0.6rem #318ffa;
  }
}
@keyframes after {
  0% {
    height: 0.6rem;
    box-shadow: 0.6rem 1.2rem #6ce581, -0.6rem -1.2rem #fecb2e;
  }
  35% {
    height: 3rem;
    box-shadow: 0.6rem 0 #6ce581, -0.6rem 0 #fecb2e;
  }
  70% {
    height: 0.6rem;
    box-shadow: 0.6rem -1.2rem #6ce581, -0.6rem 1.2rem #fecb2e;
  }
  100% {
    box-shadow: 0.6rem 1.2rem #6ce581, -0.6rem -1.2rem #fecb2e;
  }
}
.spinner {
  position: relative;
  height: 100%;
  min-height: 100px;
  display: block;
  overflow: hidden;
  pointer-events: auto;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 999;
  background-color: hsla(0, 0%, 72%, 0.24);
}
.spinner.absolute {
  position: absolute;
  min-height: auto;
}
.spinner.global {
  position: fixed;
  width: 100vw;
  height: 100vh;
}
.spinner .spinning {
  width: 3rem;
  height: 3rem;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) rotate(165deg);
  margin: 0;
}
.spinner .spinning::before,
.spinner .spinning::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  display: block;
  width: 0.6rem;
  height: 0.6rem;
  border-radius: 0.3rem;
  transform: translate(-50%, -50%);
}
.spinner .spinning::before {
  animation: before 1.5s infinite;
}
.spinner .spinning::after {
  animation: after 1.5s infinite;
}
`,""]);const i=a},845:(e,r,n)=>{n.d(r,{Ay:()=>u,nf:()=>i,vu:()=>l});var s=n(758),t=n.n(s),c=n(935),o=n.n(c),a=o()(t());a.push([e.id,`.Iuy_e {
  text-decoration: none;
  cursor: pointer;
  color: var(--linkColor);
  background-color: transparent;
  font-weight: 500;
  transition: color 0.3s;
}
.Iuy_e:active, .Iuy_e.D3oJg {
  color: var(--linkActiveColor, #42a5f5);
}
.Iuy_e:hover {
  color: var(--linkHoverColor, #2196f3);
}
.Iuy_e[disabled] {
  cursor: not-allowed;
  opacity: 0.7;
}
.Iuy_e[disabled]:active, .Iuy_e[disabled].D3oJg, .Iuy_e[disabled]:hover {
  color: var(--linkColor);
}
`,""]);var i="Iuy_e",l="D3oJg";const u=a},935:e=>{e.exports=function(r){var n=[];return n.toString=function(){return this.map(function(t){var c="",o=typeof t[5]<"u";return t[4]&&(c+="@supports (".concat(t[4],") {")),t[2]&&(c+="@media ".concat(t[2]," {")),o&&(c+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),c+=r(t),o&&(c+="}"),t[2]&&(c+="}"),t[4]&&(c+="}"),c}).join("")},n.i=function(t,c,o,a,i){typeof t=="string"&&(t=[[null,t,void 0]]);var l={};if(o)for(var u=0;u<this.length;u++){var p=this[u][0];p!=null&&(l[p]=!0)}for(var h=0;h<t.length;h++){var f=[].concat(t[h]);o&&l[f[0]]||(typeof i<"u"&&(typeof f[5]>"u"||(f[1]="@layer".concat(f[5].length>0?" ".concat(f[5]):""," {").concat(f[1],"}")),f[5]=i),c&&(f[2]&&(f[1]="@media ".concat(f[2]," {").concat(f[1],"}")),f[2]=c),a&&(f[4]?(f[1]="@supports (".concat(f[4],") {").concat(f[1],"}"),f[4]=a):f[4]="".concat(a)),n.push(f))}},n}},758:e=>{e.exports=function(r){return r[1]}},197:(e,r)=>{var n;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function c(o,a,i){var l=null;if(i!==void 0&&(l=""+i),a.key!==void 0&&(l=""+a.key),"key"in a){i={};for(var u in a)u!=="key"&&(i[u]=a[u])}else i=a;return a=i.ref,{$$typeof:s,type:o,key:l,ref:a!==void 0?a:null,props:i}}n=t,r.jsx=c,r.jsxs=c},85:(e,r,n)=>{e.exports=n(197)},591:e=>{var r=[];function n(c){for(var o=-1,a=0;a<r.length;a++)if(r[a].identifier===c){o=a;break}return o}function s(c,o){for(var a={},i=[],l=0;l<c.length;l++){var u=c[l],p=o.base?u[0]+o.base:u[0],h=a[p]||0,f="".concat(p," ").concat(h);a[p]=h+1;var d=n(f),v={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(d!==-1)r[d].references++,r[d].updater(v);else{var _=t(v,o);o.byIndex=l,r.splice(l,0,{identifier:f,updater:_,references:1})}i.push(f)}return i}function t(c,o){var a=o.domAPI(o);a.update(c);var i=function(u){if(u){if(u.css===c.css&&u.media===c.media&&u.sourceMap===c.sourceMap&&u.supports===c.supports&&u.layer===c.layer)return;a.update(c=u)}else a.remove()};return i}e.exports=function(c,o){o=o||{},c=c||[];var a=s(c,o);return function(l){l=l||[];for(var u=0;u<a.length;u++){var p=a[u],h=n(p);r[h].references--}for(var f=s(l,o),d=0;d<a.length;d++){var v=a[d],_=n(v);r[_].references===0&&(r[_].updater(),r.splice(_,1))}a=f}}},128:e=>{var r={};function n(t){if(typeof r[t]>"u"){var c=document.querySelector(t);if(window.HTMLIFrameElement&&c instanceof window.HTMLIFrameElement)try{c=c.contentDocument.head}catch{c=null}r[t]=c}return r[t]}function s(t,c){var o=n(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(c)}e.exports=s},51:e=>{function r(n){var s=document.createElement("style");return n.setAttributes(s,n.attributes),n.insert(s,n.options),s}e.exports=r},855:(e,r,n)=>{function s(t){var c=n.nc;c&&t.setAttribute("nonce",c)}e.exports=s},740:e=>{function r(t,c,o){var a="";o.supports&&(a+="@supports (".concat(o.supports,") {")),o.media&&(a+="@media ".concat(o.media," {"));var i=typeof o.layer<"u";i&&(a+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),a+=o.css,i&&(a+="}"),o.media&&(a+="}"),o.supports&&(a+="}");var l=o.sourceMap;l&&typeof btoa<"u"&&(a+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(l))))," */")),c.styleTagTransform(a,t,c.options)}function n(t){if(t.parentNode===null)return!1;t.parentNode.removeChild(t)}function s(t){if(typeof document>"u")return{update:function(){},remove:function(){}};var c=t.insertStyleElement(t);return{update:function(a){r(c,t,a)},remove:function(){n(c)}}}e.exports=s},656:e=>{function r(n,s){if(s.styleSheet)s.styleSheet.cssText=n;else{for(;s.firstChild;)s.removeChild(s.firstChild);s.appendChild(document.createTextNode(n))}}e.exports=r}},be={};function b(e){var r=be[e];if(r!==void 0)return r.exports;var n=be[e]={id:e,exports:{}};return ze[e](n,n.exports,b),n.exports}b.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return b.d(r,{a:r}),r},b.d=(e,r)=>{for(var n in r)b.o(r,n)&&!b.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},b.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),b.nc=void 0;var w={};b.d(w,{N_:()=>gr,vY:()=>xr,aM:()=>br,RY:()=>De,oe:()=>Dt,jd:()=>Bt,lq:()=>yr,rd:()=>pr});var Ge=e=>{var r={};return b.d(r,e),r},Mr=e=>()=>e;const g=Ge({Suspense:()=>D.Suspense,default:()=>D.default,useCallback:()=>D.useCallback,useEffect:()=>D.useEffect,useRef:()=>D.useRef,useState:()=>D.useState}),Qe=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),K=Qe,Ze=e=>K(e)==="array",M=Ze,Ke=e=>K(e)==="object",A=Ke,et=e=>e?.$$typeof&&typeof e.$$typeof=="symbol"&&e.$$typeof.description?.indexOf("react.")===0,ue=et,tt=e=>e?.__v_isVNode,rt=tt,nt=(e,r)=>Object.prototype.hasOwnProperty.call(e??{},r),xe=nt,Ee=e=>{if(!M(e)&&!A(e))return e;const r=M(e)?[]:{};for(const n in e)if(xe(e,n)){const s=e[n];r[n]=ue(s)||rt(s)||typeof s!="object"?s:s!==e?Ee(s):"cyclic"}else Object.setPrototypeOf(r,{[n]:e[n]});return r},Y=Ee,st=e=>K(e)==="function",ie=st,ot=e=>K(e)==="promise"||A(e)&&ie(e.then),J=ot,ct=(e,r=3e5,n="\u8BF7\u6C42\u8D85\u65F6\uFF01")=>{if(!J(e))return{};let s=null,t=null;return{promiseFn:new Promise((o,a)=>{s=(i="canceled")=>{clearTimeout(t),o({canceled:!0,errMsg:i})},r&&(r=typeof r!="number"?12e4:r,t=setTimeout(()=>s(n),r)),e.then(i=>{clearTimeout(t),o({result:i,errMsg:!1})}).catch(i=>{clearTimeout(t),a(i)})}),cancelFn:s}},Ce=ct,at=e=>e?e.charAt(e.length-1)==="/"?e.slice(0,-1):e:"",Re=at;var C=b(85);const ut=(e,r)=>(0,C.jsx)("div",{dangerouslySetInnerHTML:{__html:e},...r}),it=ut,lt=e=>{const{error:r={},info:n=""}=e||{},{message:s,stack:t,errMsg:c}=r;let o=c||t||r.toString();o=`${o}
${n}`.replace(/\r|\n|\r\n/g,"<br/>"),o=o.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),o=o.replace(/\s/g,"&nbsp;");const a=s?.slice(0,120).split(". ").slice(0,2).join(". ");return(0,C.jsxs)("div",{style:{padding:"15px 20px",backgroundColor:"#fff",wordWrap:"break-word"},children:[it(o,{style:{color:"red"}}),a&&(0,C.jsxs)("a",{style:{display:"inline-block",padding:"15px",color:"#00b4cf"},href:`https://stackoverflow.com/search?q=${a}`,target:"_blank",children:[" ","--> \u53BB\u7F51\u4E0A\u67E5\u627E\u9519\u8BEF\u539F\u56E0\uFF1F"]})]})},ee=lt,ft=e=>/^https?:\/\/[^\s/?.#]+\.[^\s]+/.test(e),V=ft,pt=()=>{const e={};return{on:(t,c)=>{e[t]||(e[t]=[]),e[t].indexOf(c)===-1&&e[t].push(c)},emit:(t,c)=>{e[t]&&e[t].map(o=>o(c))},off:(t,c=null)=>{if(e[t]){if(typeof c!="function")return delete e[t];const o=e[t].indexOf(c);o>-1&&(e[t].splice(o,1),e[t].length||delete e[t])}}}},X=pt,Se=e=>{const r={};for(let n in e)xe(e,n)||(r[n]=e[n]);return r},dt=(e,r)=>{if(!A(e))return r;if(!A(r))return e;const n={...Se(e),...Se(r)},s={...e,...r};return Object.keys(n).map(t=>{Object.setPrototypeOf(s,{[t]:n[t]})}),s},_t=dt,mt=(e=X())=>{const{on:r,emit:n,off:s}=e,t={};return{getState:l=>Y(t[l]),setState:(l,u=!1)=>{if(typeof l=="function"&&(l=l(Y(t))),!A(l))throw TypeError("\u5FC5\u987B\u4F20\u5165object\u5BF9\u8C61\uFF01");const p=Y(l);Object.keys(p).map(h=>{const f=t[h],d=p[h],v=A(d)&&A(f)?_t(f,d):d;!u&&n(h,v),t[h]=v})},subscribe:(l,u)=>(r(l,u),()=>s(l,u)),unsubscribe:s,clean:l=>{typeof l=="string"?t[l]=void 0:Array.isArray(l)?l.map(u=>t[u]=void 0):Object.keys(t).map(u=>t[u]=void 0)}}},te=mt,ht=e=>(r,n)=>{const[s,t]=(0,g.useState)(()=>{const i=e?.getState(r);return i!==void 0?i:(n!==void 0&&e?.setState({[r]:n},!0),n)}),c=(0,g.useCallback)(i=>e?.setState({[r]:typeof i=="function"?i(e?.getState(r)):i}),[]),o=(0,g.useCallback)(i=>e?.subscribe(r,i),[]),a=(0,g.useCallback)((i=i)=>e?.clean(i),[]);return(0,g.useEffect)(()=>{e?.subscribe(r,i=>t(i))},[]),[s,c,o,a]},Ae=ht,gt=te(),Or=Ae(gt),Tr=X(),Fr=X(),$r="push-emitter",Ir="replace-emitter",Dr="useRoute-emitter",le={delay:8e3,timeoutMsg:"\u8BF7\u6C42\u8D85\u65F6\uFF01",cancelMsg:"\u8BF7\u6C42\u5DF2\u53D6\u6D88\uFF01"},fe="/404",vt={getState:()=>history.state,go:e=>history.go(e),forward:()=>history.forward(),back:()=>history.back()},Pe=(e,r,n,s,t=[])=>{const c=i=>{for(let l=0,u=i.length;l<u;l++){const p=i[l],h=p[s].split("?")[0];if(new RegExp("^"+h.replace(/:[^/]+/g,"[^/]+")+"$").test(r)&&!p.childSameRouteLevel)return p;if(M(p[n])){const d=c(p[n]);if(d)return d}}},o=c(e);if(!o)return fe;const{redirect:a}=o;return a?V(a)?a:t.includes(a)?t:(t.push(a),Pe(e,a.split("?")[0],n,s,t)):t[t.length-1]},yt=(e,r,n,s,t)=>{if(!M(e))return null;const c=u=>{const p=u.split("/"),h=r.split("/"),f={};return p.map((d,v)=>d.indexOf(":")===0&&(f[d.slice(1)]=h[v])),f},o=(u,p)=>{const h=[],f=p.split("/:")[0];for(let d=0,v=u.length;d<v;d++){const _=u[d];if(_[t]===f){_.active=!0;const{name:m,title:y,icon:E,params:x}=_;h.push({name:m,title:y,icon:E,params:x,[t]:f})}else if(p.indexOf(`${_[t]}/`)===0){_.active=!0;const m=c(_[t]),y=Object.keys(m).map(O=>m[O]).join("/"),{name:E,title:x,icon:R}=_,S=y?`${f}/${y}`:_[t];h.push({name:E,title:x,icon:R,[t]:S,params:{..._.params,...m}})}else if(_[t]===p){_.active=!0;const m=c(_[t]),{[s]:y,...E}=_;h.push({...E,[t]:r,params:{...E.params,...n,...m}})}}return h},a=(u,p)=>{for(let h=0,f=u.length;h<f;h++){const d=u[h];if(p.indexOf(`${d[t]}/`)===0){d.active=!0;return}}},i=u=>{for(let p=0,h=u.length;p<h;p++){const f=u[p],d=(f[t]||"").split("?")[0];if(d===r){if(f.childSameRouteLevel){f.active=!0,f.open=!0;const{[s]:y,...E}=f;return[E,...i(f[s])]}f.hideMenu&&a(u,f.parentPath||d),f.active=!0;const{[s]:_,...m}=f;return[{...m,params:{...m.params,...n}}]}if(new RegExp("^"+d.replace(/:[^/]+/g,"[^/]+")+"$").test(r))return o(u,d);if(M(f[s])){const _=i(f[s]);if(_){f.active=!0,f.open=!0;const{[s]:m,...y}=f;return[y,..._]}}}},l=i(e)||[];return{result:e,current:l}},ke=(e,r,n)=>e.filter(s=>s.hideMenu||s[n].indexOf("/:")>-1?!1:(M(s[r])&&(s[r]=ke(s[r],r,n)),!0)),bt=(e,r,n,s="children",t="path")=>{const c=Pe(e,r,s,t);if(c)return{redirect:c};const{result:o,current:a}=yt(e,r,n,s,t),i=ke(o,s,t);return{current:a,menu:i}},xt=bt,Et=e=>M(e)&&!!e.length,we=Et,pe=(e,r)=>{const n=["#/","/"],s=n[!!r-0];if(!e||n.includes(e))return s;const t=e.charAt(e.length-1)==="/"?e.slice(0,-1):e;return r||t.indexOf("#/")>-1?t:`#${t}`},q=(e,r,n,s=!1)=>{const t=pe(r,n);return s?t:n?e&&t==="/"?e:`${e}${t}`:e?`${e}/${t}`:t},Ct=(e,r,n,s,t,c)=>{if(!we(e))return e;const o=(a,i="",l=0)=>a.filter(u=>!u.denied).map(u=>{if(!c&&!u.exact&&!V(u[s])){(!u[s]||u[s]==="javascript:;")&&(u[s]="");const p=u[s].charAt(0)==="/"&&i.charAt(i.length-1)==="/"?u[s].slice(1):u[s].charAt(0)!=="/"&&i.charAt(i.length-1)!=="/"?`/${u[s]}`:u[s];u[s]=i?i+p:q(t,p,r)}if(u.redirect&&!V(u.redirect)&&(u.redirect=q(t,u.redirect,r)),we(u[n])&&(u[n]=o(u[n],u[s],l+1),!u.redirect)){const p=u[n].findIndex(h=>h[s]===u[s]);p&&(u.redirect=u[n][0][s]),p>-1&&(u.childSameRouteLevel=l+1)}return u});return o(e)},Rt=e=>{if(!A(e))return"";const r=[];return Object.keys(e).map((n,s)=>{const t=s>0?"&":"?";r.push(`${t}${n}=${e[n]}`)}),r.join("")},Me=Rt,St=(e="")=>{const[r,n]=e.split("?");if(n){const s={};return n.split("&").map(c=>{const[o,a]=c.split("=");s[o]=a}),{path:r,params:s}}return{path:r}},de=St,At=()=>{document.documentElement.scrollTop?document.documentElement.scrollTop=0:document.body.scrollTop&&(document.body.scrollTop=0)},Pt=(e,r,n={})=>{const s=n.description??"";for(let t=e.length-1,c;c=e[t--];){const{title:o,name:a}=c;if(typeof o=="string"&&o.length)return document.title=o,document.getElementsByTagName("meta").description.content=`${s??""}${o}`,o;if((o==null||o===!0)&&a){const i=r?`${a}-${r}`:a;return document.title=i,document.getElementsByTagName("meta").description.content=`${s??""}${i}`,i}if(r)return document.title=r,document.getElementsByTagName("meta").description.content=`${s??""}${r}`,r}},kt=e=>{const{pathname:r,search:n,hash:s}=location;if(e){const i=pe(r,e),l=decodeURIComponent(`${i}${n}`),{params:u}=de(l);return{path:l,params:u}}const t=decodeURIComponent(pe(s,e)),{params:c}=de(t),o=Re(r);return{path:o?`${o}/${t}`:t,params:c}},_e=(e,r,n)=>{typeof e=="function"&&e({...r,stay:new Date-n})},Oe=(e,r,n,s)=>{let t=typeof e=="string"?e:e.path??"";const c=Me(e.query);V(t)||(t=q(n,t,s,e.exact)),window?.open(`${t}${c}`,r)},wt=(e,r,n,s)=>{if(e.target||V(e.path)){Oe(e,e.target,r,n);return}let t,c,o;if(typeof e=="string")t=e;else if(A(e))t=e.path,c=e.params,o=e.query;else return;!t||t==="."||t==="./"?t=s:t.indexOf("./")===0?t=`${s.split("?")[0]}${t.replace("./","/")}`:t.indexOf("../")===0&&(t=`${s.split("?")[0].split("/").slice(0,-1).join("/")}${t.replace("../","/")}`),t=q(r,t,n,e?.exact);const a=de(t);t=a.path;const i={...a.params,...o},l=Me(i);return t=`${t}${l}`,c={...c,...i},t===s?!1:{path:t,params:c}},Te=(e,r)=>{const n=e.split(r);return n.length>1?["","/"].includes(n[1].slice(0,1)):!1},Mt=X(),Ot=e=>{const{on:r,emit:n,off:s}=Mt;return{on:t=>r(e,t),emit:t=>n(e,t),off:t=>s(e,t)}},Fe=Ot,Tt=(e=te())=>(r,n)=>{const{getState:s,setState:t,subscribe:c,unsubscribe:o,clean:a}=e;return n!==void 0&&t({[r]:n},!0),{getState:()=>s(r),setState:(i,l)=>t({[r]:i},l),subscribe:i=>c(r,i),unsubscribe:()=>o(r),clean:()=>a(r)}},$e=Tt,Ft=te(),$t=$e(Ft),It=$t,me=Fe("push-emitter"),Ie=Fe("replace-emitter"),B=It("route-store"),De=X(),Be=te(De),Dt=$e(Be),Bt=Ae(Be),Lt=()=>![typeof window,typeof document].includes("undefined"),jt=Lt,Nt=e=>{if(!jt())return;const r=document.createElement("div");return r.innerHTML=e,r.children[0]},Ut=Nt;class Wt extends g.default.Component{state={error:null};static getDerivedStateFromError(r){return{error:r}}componentDidCatch(r,n){const{errorReport:s}=this.props;typeof s=="function"&&s({error:r,info:n.componentStack})}render(){const{error:r}=this.state,{fallback:n,children:s}=this.props;return r?n?.(r)??r:s}}const Ht=({children:e,report:r})=>{const n=(0,g.useRef)();return n.current?.state&&(n.current.state.error=null),(0,C.jsx)(Wt,{ref:n,fallback:(s,t)=>ee({error:s,info:t}),errorReport:r,children:e})},Yt=Ht;var Jt=b(591),Le=b.n(Jt),Vt=b(740),je=b.n(Vt),Xt=b(128),Ne=b.n(Xt),qt=b(855),Ue=b.n(qt),zt=b(51),We=b.n(zt),Gt=b(656),He=b.n(Gt),re=b(670),L={};L.styleTagTransform=He(),L.setAttributes=Ue(),L.insert=Ne().bind(null,"head"),L.domAPI=je(),L.insertStyleElement=We();var Br=Le()(re.A,L);const Lr=re.A&&re.A.locals?re.A.locals:void 0,Qt=({global:e,absolute:r})=>(0,C.jsx)("div",{className:`spinner${e?" global":""}${r?" absolute":""}`,children:(0,C.jsx)("figure",{className:"spinning"})}),Zt=Qt,Kt=()=>{const e=(0,g.useRef)([]);return(0,g.useEffect)(()=>()=>{e.current.map(n=>n.cancelFn()),e.current=[]},[]),{cancelablePromise:(0,g.useCallback)((n,s=!0)=>{const t=Ce(n,s);return e.current.indexOf(t)===-1&&e.current.push(t),t.promiseFn},[])}},er=Kt,tr=(e={})=>{const{cancelablePromise:r}=er(),[n,s]=(0,g.useState)(e),t=(0,g.useRef)({}),c=(0,g.useRef)({}),o=(0,g.useCallback)((i=null)=>{Array.isArray(i)&&i.length?i.map(l=>t.current[l]=e[l]):t.current=e},[]),a=(0,g.useCallback)((i,l,u=!1)=>{const p=Object.keys(i),h=JSON.stringify(p.sort());if(!c.current[h]){c.current[h]=!0,u&&o(Array.isArray(u)?u:p),p.map(f=>{t.current[f]||(t.current[f]={}),t.current[f].pending=!0}),s({...t.current});for(let f=0,d=p.length;f<d;f++){const v=p[f];r(i[v]).then(_=>{let{result:m,errMsg:y}=_;f===d-1&&(c.current[h]=!1),typeof l=="function"&&(m=l(m)||m),t.current[v]={...m,pending:!1},y===!1&&s({...t.current})}).catch(_=>{throw f===d-1&&(c.current[h]=!1),t.current[v]={error:_,pending:!1},s({...t.current}),_})}}},[]);return[n,a,o]},Ye=tr,ne=e=>Object.keys(e).length,rr=e=>{const{Comp:r,restResolve:n,loadPromise:s,params:t,children:c}=e,[o,a]=Ye(),[i,l]=Ye();return(0,g.useEffect)(()=>{ne(n)&&a(n),ne(s)&&l(s)},[n,s]),(0,g.useEffect)(()=>{const u=ne(o);u&&u===ne(n)&&t.store.setState(o)},[o]),(0,C.jsx)(r,{...t,...o,...i,children:c})},nr=rr,sr=e=>e===!1?null:ue(e)?e:ie(e)?(0,C.jsx)(e,{}):(0,C.jsx)(Zt,{}),or=({Loading:e,ErrorBoundary:r,loadedComp:n})=>{const s=(0,C.jsx)(g.Suspense,{fallback:sr(e),children:n});return r===!1?s:ie(r)?(0,C.jsx)(r,{children:s}):(0,C.jsx)(Yt,{children:s})},cr=({Comp:e,routerProps:r,children:n})=>{const{params:s,...t}=r,{loading:c,errorBoundary:o,...a}=s,i=(0,C.jsx)(nr,{Comp:e,...t,params:a,children:n});return or({Loading:c,ErrorBoundary:o,loadedComp:i})},Je=cr,he={},ge=(e,r,n,s)=>J(n)?n.then(t=>Je({Comp:e,routerProps:r,children:t.default??t})):Je({Comp:e,routerProps:r,children:n}),ar=(e,r,n)=>{const s={},t={};return A(e)?(Object.keys(e).map(c=>{const o=r.getState(c);o==null?t[c]=e[c](n):s[c]=o}),{cachedResolve:s,restResolve:t}):{cachedResolve:s,restResolve:t}},ur=(e,r)=>{if(!A(e))return{};const n={};return Object.keys(e).map(s=>n[s]=e[s](r)),n},ir=e=>{const{current:r,menu:n,...s}=e,t=r.map(a=>{const{component:i,resolve:l,loadData:u,loading:p,errorBoundary:h,icon:f,...d}=a;return d}),c=[...r].filter(a=>a.component),o=(a=0)=>{if(!c.length)return null;const i=c.shift(),{component:l,resolve:u,loadData:p,icon:h,key:f,...d}=i;if(typeof l=="function"||J(l)){const v=`${d.path}${d.childSameRouteLevel??""}`;let _=he[v];const{cachedResolve:m,restResolve:y}=ar(u,s.store,d),x={loadPromise:ur(p,d),restResolve:y,params:{current:t,...s,...d,...m}},R=o(a+1);if(_)return ge(_,x,R,v);try{_=l(),_=ue(_)?l:_}catch{_=l}return J(_)?_.then(S=>(_=S.default??S,he[v]=_,ge(_,x,R,v))):(he[v]=_,ge(_,x,R,v))}return typeof l=="string"?Ut(l):l};return o()},lr=ir,fr=e=>{const[r,n]=(0,g.useState)(e),[s,t]=(0,g.useState)(),[c,o]=(0,g.useState)(),a=(0,g.useRef)(),i=(0,g.useRef)(),l=(0,g.useRef)(),u=(0,g.useRef)(),p=()=>{typeof a.current=="function"&&(a.current({cancel:le.cancelMsg}),a.current=null)},h=(0,g.useCallback)(m=>{typeof m=="function"?n(y=>({...y,...m(y)})):A(m)&&n(y=>({...y,...m}))},[]),f=(m,y="pushState")=>{const{basepath:E,browserRouter:x}=u.current,R=l.current,S=wt(m,E,x,R);if(!S)return;const{path:O,params:I}=S;_({inputPath:O,inputParams:I},()=>history[y](m?.state,"",O))},d=(0,g.useCallback)(m=>f(m),[]),v=(0,g.useCallback)(m=>f(m,"replaceState"),[]),_=(0,g.useCallback)(({inputPath:m="",inputParams:y={}},E)=>{const x=+new Date,{browserRouter:R,childKey:S,idKey:O,title:I,metas:z,routers:G,beforeRender:N,afterRender:U,basepath:W,allowedNotFound:k,...Ve}=u.current;if(!m){const{path:P,params:T}=kt(R);m=P,y={...y,...T}}const se=l.current;new Promise((P,T)=>{G?.length||T("\u8DEF\u7531\u4E3A\u7A7A\uFF01"),m!==l.current&&typeof N=="function"?N({path:m,params:y,prevPath:se},P,T):P()}).then(P=>{if(P===!1)return;const T=P?.path;if(T&&q(W,T,R)!==m){v(P);return}i.current=i.current??m;const{redirect:F,current:H,menu:Xe}=xt(Y(G),m.split("?")[0],y,S,O);if(F){if(k&&F===fe&&(typeof k=="boolean"||typeof k=="string"&&Te(i.current,k)||M(k)&&k.find(ce=>Te(i.current,ce))))return;if(M(F)){console.error(`\u522B\u95F9\uFF0C[${[m,...F].join(" -> ")}] \u91CD\u5B9A\u5411\u6B7B\u5FAA\u73AF\uFF01\uFF01\uFF01`);return}return F===fe?v({path:F}):d({path:F,exact:!0})}E?.(),m?.split("?")[0]!==l.current?.split("?")[0]&&At(),Pt(H,I,z);const ve={...Ve,updateRouter:h,router:{push:d,replace:v},current:H,menu:Xe,inputPath:i.current,prevPath:se,browserRouter:R,basepath:W,title:I,history:{...vt,goBack:Q=>d({...Q,path:se})}};B.setState(ve);const oe=lr(ve);if(l.current=m,i.current=null,p(),J(oe)){const{promiseFn:Q,cancelFn:ce}=Ce(oe,{delay:le.delay,msg:{timeout:le.timeoutMsg}});return a.current=ce,o(!0),Q.then(Z=>{a.current=null;const{result:qe,errMsg:ae}=Z,ye=ae===!1?qe:ae?.timeout?ee({error:{errMsg:`${m} ${ae.timeout}`}}):null;ye&&(o(!1),_e(U,H.slice(-1)[0],x),t(ye))}).catch(Z=>{throw a.current=null,o(!1),_e(U,H.slice(-1)[0],x),t(ee({error:Z})),Z})}_e(U,H.slice(-1)[0],x),t(oe)}).catch(P=>{throw t(ee({error:P})),P})},[]);return(0,g.useEffect)(()=>{const m={description:document.getElementsByTagName("meta").description.content??""},{childKey:y="children",idKey:E="path",browserRouter:x=!1,routers:R=[],basepath:S="",exact:O=!1,inputPath:I="",inputParams:z={},...G}=r,N=Re(S),U=Ct(Y(R),x,y,E,N,O);u.current={...G,childKey:y,idKey:E,browserRouter:x,routers:U,basepath:N,metas:m};const W=x?"popstate":"hashchange",k=()=>_({});return _({inputPath:I,inputParams:z}),me.on(d),Ie.on(v),window.addEventListener(W,k,!1),()=>{p(),me.off(d),Ie.off(v),window.removeEventListener(W,k,!1)}},[r]),{updateRouter:h,output:s,loading:c}},pr=fr,dr=e=>{const{to:r,onClick:n,preventDefault:s,stopPropagation:t=!0,exact:c=!0,target:o,...a}=e,i=()=>{const u=typeof r=="string"?{exact:c,path:r}:{exact:c,...r};me.emit(u)};return u=>{if(u.preventDefault(),t&&u.stopPropagation(),!a?.disabled){if(!s){if(o){const{browserRouter:p,basepath:h}=B.getState();Oe(r,o,h,p);return}i()}typeof n=="function"&&n()}}},_r=dr;var $=b(845),j={};j.styleTagTransform=He(),j.setAttributes=Ue(),j.insert=Ne().bind(null,"head"),j.domAPI=je(),j.insertStyleElement=We();var jr=Le()($.Ay,j);const Nr=$.Ay&&$.Ay.locals?$.Ay.locals:void 0,mr=e=>{if(!e)return $.nf;const r=e.trim().split(" ").filter(Boolean),s=r.find(t=>t==="active")?[$.vu]:[];return[$.nf,...s,...r].join(" ")},hr=e=>{const{to:r,onClick:n,preventDefault:s,stopPropagation:t,exact:c,target:o,className:a,...i}=e;return(0,C.jsx)("span",{onClick:_r(e),className:mr(a),...i})},gr=hr,vr=()=>{const[e,r]=(0,g.useState)(B.getState());return(0,g.useEffect)(()=>B.subscribe(n=>r(n)),[]),e},yr=vr,br=B.getState,xr=B.subscribe;var Er=w.N_,Cr=w.vY,Rr=w.aM,Sr=w.RY,Ar=w.oe,Pr=w.jd,kr=w.lq,wr=w.rd;export{Er as Link,Cr as emitRoute,Rr as getRoute,Sr as huxyBus,Ar as huxyStore,Pr as useHuxyStore,kr as useRoute,wr as useRouter};

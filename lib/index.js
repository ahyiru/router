import*as Ht from"react";var Vt={670:(c,h,p)=>{p.d(h,{A:()=>k});var S=p(758),f=p.n(S),d=p(935),l=p.n(d),v=l()(f());v.push([c.id,`@keyframes before {
  0% {
    width: 0.6rem;
    box-shadow: 1.2rem -0.6rem #ff3e38, -1.2rem 0.6rem #318ffa;
  }
  35% {
    width: 3rem;
    box-shadow: 0 -0.6rem #ff3e38, 0 0.6rem #318ffa;
  }
  70% {
    width: 0.6rem;
    box-shadow: -1.2rem -0.6rem #ff3e38, 1.2rem 0.6rem #318ffa;
  }
  100% {
    box-shadow: 1.2rem -0.6rem #ff3e38, -1.2rem 0.6rem #318ffa;
  }
}
@keyframes after {
  0% {
    height: 0.6rem;
    box-shadow: 0.6rem 1.2rem #6ce581, -0.6rem -1.2rem #fecb2e;
  }
  35% {
    height: 3rem;
    box-shadow: 0.6rem 0 #6ce581, -0.6rem 0 #fecb2e;
  }
  70% {
    height: 0.6rem;
    box-shadow: 0.6rem -1.2rem #6ce581, -0.6rem 1.2rem #fecb2e;
  }
  100% {
    box-shadow: 0.6rem 1.2rem #6ce581, -0.6rem -1.2rem #fecb2e;
  }
}
.spinner {
  position: relative;
  height: 100%;
  min-height: 100px;
  display: block;
  overflow: hidden;
  pointer-events: auto;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 999;
  background-color: hsla(0, 0%, 72%, 0.24);
}
.spinner.absolute {
  position: absolute;
  min-height: auto;
}
.spinner.global {
  position: fixed;
  width: 100vw;
  height: 100vh;
}
.spinner .spinning {
  width: 3rem;
  height: 3rem;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) rotate(165deg);
  margin: 0;
}
.spinner .spinning::before,
.spinner .spinning::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  display: block;
  width: 0.6rem;
  height: 0.6rem;
  border-radius: 0.3rem;
  transform: translate(-50%, -50%);
}
.spinner .spinning::before {
  animation: before 1.5s infinite;
}
.spinner .spinning::after {
  animation: after 1.5s infinite;
}
`,""]),v.locals={};const k=v},845:(c,h,p)=>{p.d(h,{A:()=>k});var S=p(758),f=p.n(S),d=p(935),l=p.n(d),v=l()(f());v.push([c.id,`.Iuy_e {
  text-decoration: none;
  cursor: pointer;
  color: var(--linkColor);
  background-color: transparent;
  font-weight: 500;
  transition: color 0.3s;
}
.Iuy_e:active, .Iuy_e.D3oJg {
  color: var(--linkActiveColor, #42a5f5);
}
.Iuy_e:hover {
  color: var(--linkHoverColor, #2196f3);
}
.Iuy_e[disabled] {
  cursor: not-allowed;
  opacity: 0.7;
}
.Iuy_e[disabled]:active, .Iuy_e[disabled].D3oJg, .Iuy_e[disabled]:hover {
  color: var(--linkColor);
}
`,""]),v.locals={link:"Iuy_e",active:"D3oJg"};const k=v},935:c=>{c.exports=function(h){var p=[];return p.toString=function(){return this.map(function(f){var d="",l=typeof f[5]<"u";return f[4]&&(d+="@supports (".concat(f[4],") {")),f[2]&&(d+="@media ".concat(f[2]," {")),l&&(d+="@layer".concat(f[5].length>0?" ".concat(f[5]):""," {")),d+=h(f),l&&(d+="}"),f[2]&&(d+="}"),f[4]&&(d+="}"),d}).join("")},p.i=function(f,d,l,v,k){typeof f=="string"&&(f=[[null,f,void 0]]);var I={};if(l)for(var x=0;x<this.length;x++){var $=this[x][0];$!=null&&(I[$]=!0)}for(var M=0;M<f.length;M++){var E=[].concat(f[M]);l&&I[E[0]]||(typeof k<"u"&&(typeof E[5]>"u"||(E[1]="@layer".concat(E[5].length>0?" ".concat(E[5]):""," {").concat(E[1],"}")),E[5]=k),d&&(E[2]&&(E[1]="@media ".concat(E[2]," {").concat(E[1],"}")),E[2]=d),v&&(E[4]?(E[1]="@supports (".concat(E[4],") {").concat(E[1],"}"),E[4]=v):E[4]="".concat(v)),p.push(E))}},p}},758:c=>{c.exports=function(h){return h[1]}},335:(c,h,p)=>{var S;var f=p(649),d=Symbol.for("react.element"),l=Symbol.for("react.fragment"),v=Object.prototype.hasOwnProperty,k=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I={key:!0,ref:!0,__self:!0,__source:!0};function x($,M,E){var O,W={},B=null,de=null;E!==void 0&&(B=""+E),M.key!==void 0&&(B=""+M.key),M.ref!==void 0&&(de=M.ref);for(O in M)v.call(M,O)&&!I.hasOwnProperty(O)&&(W[O]=M[O]);if($&&$.defaultProps)for(O in M=$.defaultProps,M)W[O]===void 0&&(W[O]=M[O]);return{$$typeof:d,type:$,key:B,ref:de,props:W,_owner:k.current}}S=l,h.jsx=x,h.jsxs=x},85:(c,h,p)=>{c.exports=p(335)},591:c=>{var h=[];function p(d){for(var l=-1,v=0;v<h.length;v++)if(h[v].identifier===d){l=v;break}return l}function S(d,l){for(var v={},k=[],I=0;I<d.length;I++){var x=d[I],$=l.base?x[0]+l.base:x[0],M=v[$]||0,E="".concat($," ").concat(M);v[$]=M+1;var O=p(E),W={css:x[1],media:x[2],sourceMap:x[3],supports:x[4],layer:x[5]};if(O!==-1)h[O].references++,h[O].updater(W);else{var B=f(W,l);l.byIndex=I,h.splice(I,0,{identifier:E,updater:B,references:1})}k.push(E)}return k}function f(d,l){var v=l.domAPI(l);v.update(d);var k=function(x){if(x){if(x.css===d.css&&x.media===d.media&&x.sourceMap===d.sourceMap&&x.supports===d.supports&&x.layer===d.layer)return;v.update(d=x)}else v.remove()};return k}c.exports=function(d,l){l=l||{},d=d||[];var v=S(d,l);return function(I){I=I||[];for(var x=0;x<v.length;x++){var $=v[x],M=p($);h[M].references--}for(var E=S(I,l),O=0;O<v.length;O++){var W=v[O],B=p(W);h[B].references===0&&(h[B].updater(),h.splice(B,1))}v=E}}},128:c=>{var h={};function p(f){if(typeof h[f]>"u"){var d=document.querySelector(f);if(window.HTMLIFrameElement&&d instanceof window.HTMLIFrameElement)try{d=d.contentDocument.head}catch{d=null}h[f]=d}return h[f]}function S(f,d){var l=p(f);if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(d)}c.exports=S},51:c=>{function h(p){var S=document.createElement("style");return p.setAttributes(S,p.attributes),p.insert(S,p.options),S}c.exports=h},855:(c,h,p)=>{function S(f){var d=p.nc;d&&f.setAttribute("nonce",d)}c.exports=S},740:c=>{function h(f,d,l){var v="";l.supports&&(v+="@supports (".concat(l.supports,") {")),l.media&&(v+="@media ".concat(l.media," {"));var k=typeof l.layer<"u";k&&(v+="@layer".concat(l.layer.length>0?" ".concat(l.layer):""," {")),v+=l.css,k&&(v+="}"),l.media&&(v+="}"),l.supports&&(v+="}");var I=l.sourceMap;I&&typeof btoa<"u"&&(v+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(I))))," */")),d.styleTagTransform(v,f,d.options)}function p(f){if(f.parentNode===null)return!1;f.parentNode.removeChild(f)}function S(f){if(typeof document>"u")return{update:function(){},remove:function(){}};var d=f.insertStyleElement(f);return{update:function(v){h(d,f,v)},remove:function(){p(d)}}}c.exports=S},656:c=>{function h(p,S){if(S.styleSheet)S.styleSheet.cssText=p;else{for(;S.firstChild;)S.removeChild(S.firstChild);S.appendChild(document.createTextNode(p))}}c.exports=h},649:c=>{var h=S=>{var f={};return w.d(f,S),f},p=S=>()=>S;c.exports=Ht}},Qe={};function w(c){var h=Qe[c];if(h!==void 0)return h.exports;var p=Qe[c]={id:c,exports:{}};return Vt[c](p,p.exports,w),p.exports}w.n=c=>{var h=c&&c.__esModule?()=>c.default:()=>c;return w.d(h,{a:h}),h},w.d=(c,h)=>{for(var p in h)w.o(h,p)&&!w.o(c,p)&&Object.defineProperty(c,p,{enumerable:!0,get:h[p]})},w.o=(c,h)=>Object.prototype.hasOwnProperty.call(c,h),w.nc=void 0;var Q={};(()=>{w.d(Q,{N_:()=>$t,vY:()=>jt,aM:()=>Bt,lq:()=>Lt,rd:()=>It});var c=w(649);const p=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),f=e=>p(e)==="array",l=e=>p(e)==="object",k=e=>e?.$$typeof&&typeof e.$$typeof=="symbol"&&e.$$typeof.description==="react.element",x=e=>e?.__v_isVNode,M=(e,r)=>Object.prototype.hasOwnProperty.call(e??{},r),E=e=>{if(!f(e)&&!l(e))return e;const r=f(e)?[]:{};for(const s in e)if(M(e,s)){const n=e[s];r[s]=k(n)||x(n)||typeof n!="object"?n:n!==e?E(n):"cyclic"}else Object.setPrototypeOf(r,{[s]:e[s]});return r},O=E,B=e=>p(e)==="function",Z=e=>p(e)==="promise"||l(e)&&B(e.then),we=(e,r=3e5,s="\u8BF7\u6C42\u8D85\u65F6\uFF01")=>{if(!Z(e))return{};let n=null,t=null;return{promiseFn:new Promise((i,_)=>{n=(o="canceled")=>{clearTimeout(t),i({canceled:!0,errMsg:o})},r&&(r=typeof r!="number"?12e4:r,t=setTimeout(()=>n(s),r)),e.then(o=>{clearTimeout(t),i({result:o,errMsg:!1})}).catch(o=>{clearTimeout(t),_(o)})}),cancelFn:n}},Oe=e=>e?e.charAt(e.length-1)==="/"?e.slice(0,-1):e:"";var L=w(85);const Ze=(e,r)=>(0,L.jsx)("div",{dangerouslySetInnerHTML:{__html:e},...r}),ae=e=>{const{error:r={},info:s=""}=e||{},{message:n,stack:t,errMsg:u}=r;let i=u||t||r.toString();i=`${i}
${s}`.replace(/\r|\n|\r\n/g,"<br/>"),i=i.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),i=i.replace(/\s/g,"&nbsp;");const _=n?.slice(0,120).split(". ").slice(0,2).join(". ");return(0,L.jsxs)("div",{style:{padding:"15px 20px",backgroundColor:"#fff",wordWrap:"break-word"},children:[Ze(i,{style:{color:"red"}}),_&&(0,L.jsxs)("a",{style:{display:"inline-block",padding:"15px",color:"#00b4cf"},href:`https://stackoverflow.com/search?q=${_}`,target:"_blank",children:[" ","--> \u53BB\u7F51\u4E0A\u67E5\u627E\u9519\u8BEF\u539F\u56E0\uFF1F"]})]})},K=e=>/^https?:\/\/[^\s/?.#]+\.[^\s]+/.test(e),ee=()=>{const e={};return{on:(t,u)=>{e[t]||(e[t]=[]),e[t].indexOf(u)===-1&&e[t].push(u)},emit:(t,u)=>{e[t]&&e[t].map(i=>i(u))},off:(t,u=null)=>{if(e[t]){if(typeof u!="function")return delete e[t];const i=e[t].indexOf(u);i>-1&&(e[t].splice(i,1),e[t].length||delete e[t])}}}},ke=e=>{const r={};for(let s in e)M(e,s)||(r[s]=e[s]);return r},Ke=(e,r)=>{if(!l(e))return r;if(!l(r))return e;const s={...ke(e),...ke(r)},n={...e,...r};return Object.keys(s).map(t=>{Object.setPrototypeOf(n,{[t]:s[t]})}),n},_e=()=>{const{on:e,emit:r,off:s}=ee(),n={};return{getState:o=>O(n[o]),setState:(o,m=!1)=>{if(typeof o=="function"&&(o=o(O(n))),!l(o))throw TypeError("\u5FC5\u987B\u4F20\u5165object\u5BF9\u8C61\uFF01");const a=O(o);Object.keys(a).map(y=>{const A=n[y],b=a[y],R=l(b)&&l(A)?Ke(A,b):b;!m&&r(y,R),n[y]=R})},subscribe:(o,m)=>(e(o,m),()=>s(o,m)),unsubscribe:s,clean:o=>{typeof o=="string"?n[o]=void 0:Array.isArray(o)?o.map(m=>n[m]=void 0):Object.keys(n).map(m=>n[m]=void 0)}}},Me=e=>(r,s)=>{const[n,t]=(0,c.useState)(()=>{const o=e?.getState(r);return o!==void 0?o:(s!==void 0&&e?.setState({[r]:s},!0),s)}),u=(0,c.useCallback)(o=>e?.setState({[r]:typeof o=="function"?o(e?.getState(r)):o}),[]),i=(0,c.useCallback)(o=>e?.subscribe(r,o),[]),_=(0,c.useCallback)((o=o)=>e?.clean(o),[]);return(0,c.useEffect)(()=>{e?.subscribe(r,o=>t(o))},[]),[n,u,i,_]},et=_e(),or=Me(et),cr=ee(),ar=ee(),ur="push-emitter",ir="replace-emitter",lr="useRoute-emitter",me={delay:8e3,timeoutMsg:"\u8BF7\u6C42\u8D85\u65F6\uFF01",cancelMsg:"\u8BF7\u6C42\u5DF2\u53D6\u6D88\uFF01"},he="/404",tt={getState:()=>history.state,go:e=>history.go(e),forward:()=>history.forward(),back:()=>history.back()},Fe=(e,r,s,n,t=[])=>{const u=o=>{for(let m=0,a=o.length;m<a;m++){const y=o[m],A=y[n].split("?")[0];if(new RegExp("^"+A.replace(/:[^/]+/g,"[^/]+")+"$").test(r)&&!y.childSameRouteLevel)return y;if(f(y[s])){const R=u(y[s]);if(R)return R}}},i=u(e);if(!i)return he;const{redirect:_}=i;return _?K(_)?_:t.includes(_)?t:(t.push(_),Fe(e,_.split("?")[0],s,n,t)):t[t.length-1]},rt=(e,r,s,n,t)=>{if(!f(e))return null;const u=a=>{const y=a.split("/"),A=r.split("/"),b={};return y.map((R,F)=>R.indexOf(":")===0&&(b[R.slice(1)]=A[F])),b},i=(a,y)=>{const A=[],b=y.split("/:")[0];for(let R=0,F=a.length;R<F;R++){const C=a[R];if(C[t]===b){C.active=!0;const{name:g,title:P,icon:T,params:D}=C;A.push({name:g,title:P,icon:T,params:D,[t]:b})}else if(y.indexOf(`${C[t]}/`)===0){C.active=!0;const g=u(C[t]),P=Object.keys(g).map(V=>g[V]).join("/"),{name:T,title:D,icon:j}=C,N=P?`${b}/${P}`:C[t];A.push({name:T,title:D,icon:j,[t]:N,params:{...C.params,...g}})}else if(C[t]===y){C.active=!0;const g=u(C[t]),{[n]:P,...T}=C;A.push({...T,[t]:r,params:{...T.params,...s,...g}})}}return A},_=(a,y)=>{for(let A=0,b=a.length;A<b;A++){const R=a[A];if(y.indexOf(`${R[t]}/`)===0){R.active=!0;return}}},o=a=>{for(let y=0,A=a.length;y<A;y++){const b=a[y],R=(b[t]||"").split("?")[0];if(R===r){if(b.childSameRouteLevel){b.active=!0,b.open=!0;const{[n]:P,...T}=b;return[T,...o(b[n])]}b.hideMenu&&_(a,b.parentPath||R),b.active=!0;const{[n]:C,...g}=b;return[{...g,params:{...g.params,...s}}]}if(new RegExp("^"+R.replace(/:[^/]+/g,"[^/]+")+"$").test(r))return i(a,R);if(f(b[n])){const C=o(b[n]);if(C){b.active=!0,b.open=!0;const{[n]:g,...P}=b;return[P,...C]}}}},m=o(e)||[];return{result:e,current:m}},Ie=(e,r,s)=>e.filter(n=>n.hideMenu||n[s].indexOf("/:")>-1?!1:(f(n[r])&&(n[r]=Ie(n[r],r,s)),!0)),nt=(e,r,s,n="children",t="path")=>{const u=Fe(e,r,n,t);if(u)return{redirect:u};const{result:i,current:_}=rt(e,r,s,n,t),o=Ie(i,n,t);return{current:_,menu:o}},Te=e=>f(e)&&!!e.length,ge=(e,r)=>{const s=["#/","/"],n=s[!!r-0];if(!e||s.includes(e))return n;const t=e.charAt(e.length-1)==="/"?e.slice(0,-1):e;return r||t.indexOf("#/")>-1?t:`#${t}`},te=(e,r,s,n=!1)=>{const t=ge(r,s);return n?t:s?e&&t==="/"?e:`${e}${t}`:e?`${e}/${t}`:t},st=(e,r,s,n,t,u)=>{if(!Te(e))return e;const i=(_,o="",m=0)=>_.filter(a=>!a.denied).map(a=>{if(!u&&!a.exact&&!K(a[n])){(!a[n]||a[n]==="javascript:;")&&(a[n]="");const y=a[n].charAt(0)==="/"&&o.charAt(o.length-1)==="/"?a[n].slice(1):a[n].charAt(0)!=="/"&&o.charAt(o.length-1)!=="/"?`/${a[n]}`:a[n];a[n]=o?o+y:te(t,y,r)}if(a.redirect&&!K(a.redirect)&&(a.redirect=te(t,a.redirect,r)),Te(a[s])&&(a[s]=i(a[s],a[n],m+1),!a.redirect)){const y=a[s].findIndex(A=>A[n]===a[n]);y&&(a.redirect=a[s][0][n]),y>-1&&(a.childSameRouteLevel=m+1)}return a});return i(e)},De=e=>{if(!l(e))return"";const r=[];return Object.keys(e).map((s,n)=>{const t=n>0?"&":"?";r.push(`${t}${s}=${e[s]}`)}),r.join("")},ve=(e="")=>{const[r,s]=e.split("?");if(s){const n={};return s.split("&").map(u=>{const[i,_]=u.split("=");n[i]=_}),{path:r,params:n}}return{path:r}},ot=()=>{document.documentElement.scrollTop?document.documentElement.scrollTop=0:document.body.scrollTop&&(document.body.scrollTop=0)},ct=(e,r)=>{for(let s=e.length-1,n;n=e[s--];){const{title:t,name:u}=n;if(typeof t=="string"&&t.length)return document.title=t;if((t==null||t===!0)&&u)return document.title=r?`${u}-${r}`:u;if(r)return document.title=r}},at=e=>{const{pathname:r,search:s,hash:n}=location;if(e){const o=ge(r,e),m=decodeURIComponent(`${o}${s}`),{params:a}=ve(m);return{path:m,params:a}}const t=decodeURIComponent(ge(n,e)),{params:u}=ve(t),i=Oe(r);return{path:i?`${i}/${t}`:t,params:u}},be=(e,r,s)=>{typeof e=="function"&&e({...r,stay:new Date-s})},$e=(e,r,s,n)=>{let t=typeof e=="string"?e:e.path??"";const u=De(e.query);K(t)||(t=te(s,t,n,e.exact)),window?.open(`${t}${u}`,r)},ut=(e,r,s,n)=>{if(e.target||K(e.path)){$e(e,e.target,r,s);return}let t,u,i;if(typeof e=="string")t=e;else if(l(e))t=e.path,u=e.params,i=e.query;else return;!t||t==="."||t==="./"?t=n:t.indexOf("./")===0?t=`${n.split("?")[0]}${t.replace("./","/")}`:t.indexOf("../")===0&&(t=`${n.split("?")[0].split("/").slice(0,-1).join("/")}${t.replace("../","/")}`),t=te(r,t,s,e?.exact);const _=ve(t);t=_.path;const o={..._.params,...i},m=De(o);return t=`${t}${m}`,u={...u,...o},t===n?!1:{path:t,params:u}},Le=(e,r)=>{const s=e.split(r);return s.length>1?["","/"].includes(s[1].slice(0,1)):!1},it=ee(),Be=e=>{const{on:r,emit:s,off:n}=it;return{on:t=>r(e,t),emit:t=>s(e,t),off:t=>n(e,t)}},lt=e=>(r,s)=>{const{getState:n,setState:t,subscribe:u,unsubscribe:i,clean:_}=e;return s!==void 0&&t({[r]:s},!0),{getState:()=>n(r),setState:(o,m)=>t({[r]:o},m),subscribe:o=>u(r,o),unsubscribe:()=>i(r),clean:()=>_(r)}},ft=_e(),pt=lt(ft),ye=Be("push-emitter"),je=Be("replace-emitter"),q=pt("route-store"),dt=ee(),Ne=_e(),_t=Me(Ne),mt=()=>![typeof window,typeof document].includes("undefined"),ht=e=>{if(!mt())return;const r=document.createElement("div");return r.innerHTML=e,r.children[0]};class gt extends c.default.Component{state={error:null};static getDerivedStateFromError(r){return{error:r}}componentDidCatch(r,s){const{errorReport:n}=this.props;typeof n=="function"&&n({error:r,info:s.componentStack})}render(){const{error:r}=this.state,{fallback:s,children:n}=this.props;return r?s?.(r)??r:n}}const vt=({children:e,report:r})=>{const s=(0,c.useRef)();return s.current?.state&&(s.current.state.error=null),(0,L.jsx)(gt,{ref:s,fallback:(n,t)=>ae({error:n,info:t}),errorReport:r,children:e})};var bt=w(591),Ue=w.n(bt),yt=w(740),We=w.n(yt),Ct=w(128),He=w.n(Ct),Rt=w(855),Ve=w.n(Rt),Et=w(51),qe=w.n(Et),St=w(656),Je=w.n(St),ue=w(670),Y={};Y.styleTagTransform=Je(),Y.setAttributes=Ve(),Y.insert=He().bind(null,"head"),Y.domAPI=We(),Y.insertStyleElement=qe();var Cr=Ue()(ue.A,Y);const Rr=ue.A&&ue.A.locals?ue.A.locals:void 0,At=({global:e,absolute:r})=>(0,L.jsx)("div",{className:`spinner${e?" global":""}${r?" absolute":""}`,children:(0,L.jsx)("figure",{className:"spinning"})}),xt=()=>{const e=(0,c.useRef)([]);return(0,c.useEffect)(()=>()=>{e.current.map(s=>s.cancelFn()),e.current=[]},[]),{cancelablePromise:(0,c.useCallback)((s,n=!0)=>{const t=we(s,n);return e.current.indexOf(t)===-1&&e.current.push(t),t.promiseFn},[])}},Xe=(e={})=>{const{cancelablePromise:r}=xt(),[s,n]=(0,c.useState)(e),t=(0,c.useRef)({}),u=(0,c.useRef)({}),i=(0,c.useCallback)((o=null)=>{Array.isArray(o)&&o.length?o.map(m=>t.current[m]=e[m]):t.current=e},[]),_=(0,c.useCallback)((o,m,a=!1)=>{const y=Object.keys(o),A=JSON.stringify(y.sort());if(!u.current[A]){u.current[A]=!0,a&&i(Array.isArray(a)?a:y),y.map(b=>{t.current[b]||(t.current[b]={}),t.current[b].pending=!0}),n({...t.current});for(let b=0,R=y.length;b<R;b++){const F=y[b];r(o[F]).then(C=>{let{result:g,errMsg:P}=C;b===R-1&&(u.current[A]=!1),typeof m=="function"&&(g=m(g)||g),t.current[F]={...g,pending:!1},P===!1&&n({...t.current})}).catch(C=>{throw b===R-1&&(u.current[A]=!1),t.current[F]={error:C,pending:!1},n({...t.current}),C})}}},[]);return[s,_,i]},ie=e=>Object.keys(e).length,Pt=e=>{const{Comp:r,restResolve:s,loadPromise:n,params:t,children:u}=e,[i,_]=Xe(),[o,m]=Xe();return(0,c.useEffect)(()=>{ie(s)&&_(s),ie(n)&&m(n)},[s,n]),(0,c.useEffect)(()=>{const a=ie(i);a&&a===ie(s)&&t.store.setState(i)},[i]),(0,L.jsx)(r,{...t,...i,...o,children:u})},wt=e=>e===!1?null:k(e)?e:B(e)?(0,L.jsx)(e,{}):(0,L.jsx)(At,{}),Ot=({Loading:e,ErrorBoundary:r,loadedComp:s})=>{const n=(0,L.jsx)(c.Suspense,{fallback:wt(e),children:s});return r===!1?n:B(r)?(0,L.jsx)(r,{children:n}):(0,L.jsx)(vt,{children:n})},Ye=({Comp:e,routerProps:r,children:s})=>{const{params:n,...t}=r,{loading:u,errorBoundary:i,..._}=n,o=(0,L.jsx)(Pt,{Comp:e,...t,params:_,children:s});return Ot({Loading:u,ErrorBoundary:i,loadedComp:o})},Ce={},Re=(e,r,s,n)=>Z(s)?s.then(t=>Ye({Comp:e,routerProps:r,children:t.default??t})):Ye({Comp:e,routerProps:r,children:s}),kt=(e,r,s)=>{const n={},t={};return l(e)?(Object.keys(e).map(u=>{const i=r.getState(u);i==null?t[u]=e[u](s):n[u]=i}),{cachedResolve:n,restResolve:t}):{cachedResolve:n,restResolve:t}},Mt=(e,r)=>{if(!l(e))return{};const s={};return Object.keys(e).map(n=>s[n]=e[n](r)),s},Ft=e=>{const{current:r,menu:s,...n}=e,t=r.map(_=>{const{component:o,resolve:m,loadData:a,loading:y,errorBoundary:A,icon:b,...R}=_;return R}),u=[...r].filter(_=>_.component),i=(_=0)=>{if(!u.length)return null;const o=u.shift(),{component:m,resolve:a,loadData:y,icon:A,key:b,...R}=o;if(typeof m=="function"||Z(m)){const F=`${R.path}${R.childSameRouteLevel??""}`;let C=Ce[F];const{cachedResolve:g,restResolve:P}=kt(a,n.store,R),D={loadPromise:Mt(y,R),restResolve:P,params:{current:t,...n,...R,...g}},j=i(_+1);if(C)return Re(C,D,j,F);try{C=m(),C=k(C)?m:C}catch{C=m}return Z(C)?C.then(N=>(C=N.default??N,Ce[F]=C,Re(C,D,j,F))):(Ce[F]=C,Re(C,D,j,F))}return typeof m=="string"?ht(m):m};return i()},It=e=>{const[r,s]=(0,c.useState)(e),[n,t]=(0,c.useState)(),[u,i]=(0,c.useState)(),_=(0,c.useRef)(),o=(0,c.useRef)(),m=(0,c.useRef)(),a=(0,c.useRef)(),y=()=>{typeof _.current=="function"&&(_.current({cancel:me.cancelMsg}),_.current=null)},A=(0,c.useCallback)(g=>{typeof g=="function"?s(P=>({...P,...g(P)})):l(g)&&s(P=>({...P,...g}))},[]),b=(g,P="pushState")=>{const{basepath:T,browserRouter:D}=a.current,j=m.current,N=ut(g,T,D,j);if(!N)return;const{path:V,params:G}=N;C({inputPath:V,inputParams:G},()=>history[P](g?.state,"",V))},R=(0,c.useCallback)(g=>b(g),[]),F=(0,c.useCallback)(g=>b(g,"replaceState"),[]),C=(0,c.useCallback)(({inputPath:g="",inputParams:P={}},T)=>{const D=+new Date,{browserRouter:j,childKey:N,idKey:V,title:G,routers:re,beforeRender:ne,afterRender:se,basepath:oe,allowedNotFound:H,...Nt}=a.current;if(!g){const{path:U,params:J}=at(j);g=U,P={...P,...J}}const Se=m.current;new Promise((U,J)=>{re?.length||J("\u8DEF\u7531\u4E3A\u7A7A\uFF01"),g!==m.current&&typeof ne=="function"?ne({path:g,params:P,prevPath:Se},U,J):U()}).then(U=>{if(U===!1)return;const J=U?.path;if(J&&te(oe,J,j)!==g){F(U);return}o.current=o.current??g;const{redirect:X,current:ce,menu:Ut}=nt(O(re),g.split("?")[0],P,N,V);if(X){if(H&&X===he&&(typeof H=="boolean"||typeof H=="string"&&Le(o.current,H)||f(H)&&H.find(xe=>Le(o.current,xe))))return;if(f(X)){console.error(`\u522B\u95F9\uFF0C[${[g,...X].join(" -> ")}] \u91CD\u5B9A\u5411\u6B7B\u5FAA\u73AF\uFF01\uFF01\uFF01`);return}return X===he?F({path:X}):R({path:X,exact:!0})}T?.(),g?.split("?")[0]!==m.current?.split("?")[0]&&ot(),ct(ce,G);const ze={eventBus:dt,store:Ne,useStore:_t,...Nt,updateRouter:A,emitRouter:q.subscribe,router:{push:R,replace:F},current:ce,menu:Ut,inputPath:o.current,prevPath:Se,browserRouter:j,basepath:oe,title:G,history:{...tt,goBack:fe=>R({...fe,path:Se})}};q.setState(ze);const Ae=Ft(ze);if(m.current=g,o.current=null,y(),Z(Ae)){const{promiseFn:fe,cancelFn:xe}=we(Ae,{delay:me.delay,msg:{timeout:me.timeoutMsg}});return _.current=xe,i(!0),fe.then(pe=>{_.current=null;const{result:Wt,errMsg:Pe}=pe,Ge=Pe===!1?Wt:Pe?.timeout?ae({error:{errMsg:`${g} ${Pe.timeout}`}}):null;Ge&&(i(!1),be(se,ce.slice(-1)[0],D),t(Ge))}).catch(pe=>{throw _.current=null,i(!1),be(se,ce.slice(-1)[0],D),t(ae({error:pe})),pe})}be(se,ce.slice(-1)[0],D),t(Ae)}).catch(U=>{throw t(ae({error:U})),U})},[]);return(0,c.useEffect)(()=>{const{childKey:g="children",idKey:P="path",browserRouter:T=!1,routers:D=[],basepath:j="",exact:N=!1,inputPath:V="",inputParams:G={},...re}=r,ne=Oe(j),se=st(O(D),T,g,P,ne,N);a.current={...re,childKey:g,idKey:P,browserRouter:T,routers:se,basepath:ne};const oe=T?"popstate":"hashchange",H=()=>C({});return C({inputPath:V,inputParams:G}),ye.on(R),je.on(F),window.addEventListener(oe,H,!1),()=>{y(),ye.off(R),je.off(F),window.removeEventListener(oe,H,!1)}},[r]),{updateRouter:A,output:n,loading:u}},Tt=e=>{const{to:r,onClick:s,preventDefault:n,stopPropagation:t=!0,exact:u=!0,target:i,..._}=e,o=()=>{const a=typeof r=="string"?{exact:u,path:r}:{exact:u,...r};ye.emit(a)};return a=>{if(a.preventDefault(),t&&a.stopPropagation(),!_?.disabled){if(!n){if(i){const{browserRouter:y,basepath:A}=q.getState();$e(r,i,A,y);return}o()}typeof s=="function"&&s()}}};var le=w(845),z={};z.styleTagTransform=Je(),z.setAttributes=Ve(),z.insert=He().bind(null,"head"),z.domAPI=We(),z.insertStyleElement=qe();var Mr=Ue()(le.A,z);const Ee=le.A&&le.A.locals?le.A.locals:void 0,Dt=e=>{if(!e)return Ee.link;const r=e.trim().split(" ").filter(Boolean),n=r.find(t=>t==="active")?[Ee.active]:[];return[Ee.link,...n,...r].join(" ")},$t=e=>{const{to:r,onClick:s,preventDefault:n,stopPropagation:t,exact:u,target:i,className:_,...o}=e;return(0,L.jsx)("span",{onClick:Tt(e),className:Dt(_),...o})},Lt=()=>{const[e,r]=(0,c.useState)(q.getState());return(0,c.useEffect)(()=>q.subscribe(s=>r(s)),[]),e},Bt=q.getState,jt=q.subscribe})();var qt=Q.N_,Jt=Q.vY,Xt=Q.aM,Yt=Q.lq,zt=Q.rd;export{qt as Link,Jt as emitRoute,Xt as getRoute,Yt as useRoute,zt as useRouter};

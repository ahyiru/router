(function(se,Z){typeof exports=="object"&&typeof module=="object"?module.exports=Z(require("react")):typeof define=="function"&&define.amd?define("router",["react"],Z):typeof exports=="object"?exports.router=Z(require("react")):se.router=Z(se.React)})(this,function(we){return function(){"use strict";var se={201:function(a,m,g){var P=g(703),v=g.n(P),l=g(414),_=g.n(l),f=_()(v());f.push([a.id,`@keyframes before {
  0% {
    width: 0.6rem;
    box-shadow: 1.2rem -0.6rem #ff3e38, -1.2rem 0.6rem #318ffa;
  }
  35% {
    width: 3rem;
    box-shadow: 0 -0.6rem #ff3e38, 0 0.6rem #318ffa;
  }
  70% {
    width: 0.6rem;
    box-shadow: -1.2rem -0.6rem #ff3e38, 1.2rem 0.6rem #318ffa;
  }
  100% {
    box-shadow: 1.2rem -0.6rem #ff3e38, -1.2rem 0.6rem #318ffa;
  }
}
@keyframes after {
  0% {
    height: 0.6rem;
    box-shadow: 0.6rem 1.2rem #6ce581, -0.6rem -1.2rem #fecb2e;
  }
  35% {
    height: 3rem;
    box-shadow: 0.6rem 0 #6ce581, -0.6rem 0 #fecb2e;
  }
  70% {
    height: 0.6rem;
    box-shadow: 0.6rem -1.2rem #6ce581, -0.6rem 1.2rem #fecb2e;
  }
  100% {
    box-shadow: 0.6rem 1.2rem #6ce581, -0.6rem -1.2rem #fecb2e;
  }
}
.spinner {
  position: relative;
  height: 100%;
  min-height: 100px;
  display: block;
  overflow: hidden;
  pointer-events: auto;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 999;
  background-color: hsla(0, 0%, 72%, 0.24);
}
.spinner.absolute {
  position: absolute;
  min-height: auto;
}
.spinner.global {
  position: fixed;
  width: 100vw;
  height: 100vh;
}
.spinner .spinning {
  width: 3rem;
  height: 3rem;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) rotate(165deg);
  margin: 0;
}
.spinner .spinning::before,
.spinner .spinning::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  display: block;
  width: 0.6rem;
  height: 0.6rem;
  border-radius: 0.3rem;
  transform: translate(-50%, -50%);
}
.spinner .spinning::before {
  animation: before 1.5s infinite;
}
.spinner .spinning::after {
  animation: after 1.5s infinite;
}
`,""]),f.locals={},m.Z=f},414:function(a){a.exports=function(m){var g=[];return g.toString=function(){return this.map(function(v){var l="",_=typeof v[5]!="undefined";return v[4]&&(l+="@supports (".concat(v[4],") {")),v[2]&&(l+="@media ".concat(v[2]," {")),_&&(l+="@layer".concat(v[5].length>0?" ".concat(v[5]):""," {")),l+=m(v),_&&(l+="}"),v[2]&&(l+="}"),v[4]&&(l+="}"),l}).join("")},g.i=function(v,l,_,f,T){typeof v=="string"&&(v=[[null,v,void 0]]);var A={};if(_)for(var E=0;E<this.length;E++){var I=this[E][0];I!=null&&(A[I]=!0)}for(var k=0;k<v.length;k++){var w=[].concat(v[k]);_&&A[w[0]]||(typeof T!="undefined"&&(typeof w[5]=="undefined"||(w[1]="@layer".concat(w[5].length>0?" ".concat(w[5]):""," {").concat(w[1],"}")),w[5]=T),l&&(w[2]&&(w[1]="@media ".concat(w[2]," {").concat(w[1],"}")),w[2]=l),f&&(w[4]?(w[1]="@supports (".concat(w[4],") {").concat(w[1],"}"),w[4]=f):w[4]="".concat(f)),g.push(w))}},g}},703:function(a){a.exports=function(m){return m[1]}},53:function(a,m,g){var P;var v=g(899),l=Symbol.for("react.element"),_=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,T=v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A={key:!0,ref:!0,__self:!0,__source:!0};function E(I,k,w){var F,D={},q=null,J=null;w!==void 0&&(q=""+w),k.key!==void 0&&(q=""+k.key),k.ref!==void 0&&(J=k.ref);for(F in k)f.call(k,F)&&!A.hasOwnProperty(F)&&(D[F]=k[F]);if(I&&I.defaultProps)for(F in k=I.defaultProps,k)D[F]===void 0&&(D[F]=k[F]);return{$$typeof:l,type:I,key:q,ref:J,props:D,_owner:T.current}}P=_,m.jsx=E,m.jsxs=E},458:function(a,m,g){a.exports=g(53)},748:function(a){var m=[];function g(l){for(var _=-1,f=0;f<m.length;f++)if(m[f].identifier===l){_=f;break}return _}function P(l,_){for(var f={},T=[],A=0;A<l.length;A++){var E=l[A],I=_.base?E[0]+_.base:E[0],k=f[I]||0,w="".concat(I," ").concat(k);f[I]=k+1;var F=g(w),D={css:E[1],media:E[2],sourceMap:E[3],supports:E[4],layer:E[5]};if(F!==-1)m[F].references++,m[F].updater(D);else{var q=v(D,_);_.byIndex=A,m.splice(A,0,{identifier:w,updater:q,references:1})}T.push(w)}return T}function v(l,_){var f=_.domAPI(_);f.update(l);var T=function(E){if(E){if(E.css===l.css&&E.media===l.media&&E.sourceMap===l.sourceMap&&E.supports===l.supports&&E.layer===l.layer)return;f.update(l=E)}else f.remove()};return T}a.exports=function(l,_){_=_||{},l=l||[];var f=P(l,_);return function(A){A=A||[];for(var E=0;E<f.length;E++){var I=f[E],k=g(I);m[k].references--}for(var w=P(A,_),F=0;F<f.length;F++){var D=f[F],q=g(D);m[q].references===0&&(m[q].updater(),m.splice(q,1))}f=w}}},736:function(a){var m={};function g(v){if(typeof m[v]=="undefined"){var l=document.querySelector(v);if(window.HTMLIFrameElement&&l instanceof window.HTMLIFrameElement)try{l=l.contentDocument.head}catch(_){l=null}m[v]=l}return m[v]}function P(v,l){var _=g(v);if(!_)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");_.appendChild(l)}a.exports=P},706:function(a){function m(g){var P=document.createElement("style");return g.setAttributes(P,g.attributes),g.insert(P,g.options),P}a.exports=m},567:function(a,m,g){function P(v){var l=g.nc;l&&v.setAttribute("nonce",l)}a.exports=P},306:function(a){function m(v,l,_){var f="";_.supports&&(f+="@supports (".concat(_.supports,") {")),_.media&&(f+="@media ".concat(_.media," {"));var T=typeof _.layer!="undefined";T&&(f+="@layer".concat(_.layer.length>0?" ".concat(_.layer):""," {")),f+=_.css,T&&(f+="}"),_.media&&(f+="}"),_.supports&&(f+="}");var A=_.sourceMap;A&&typeof btoa!="undefined"&&(f+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(A))))," */")),l.styleTagTransform(f,v,l.options)}function g(v){if(v.parentNode===null)return!1;v.parentNode.removeChild(v)}function P(v){var l=v.insertStyleElement(v);return{update:function(f){m(l,v,f)},remove:function(){g(l)}}}a.exports=P},62:function(a){function m(g,P){if(P.styleSheet)P.styleSheet.cssText=g;else{for(;P.firstChild;)P.removeChild(P.firstChild);P.appendChild(document.createTextNode(g))}}a.exports=m},899:function(a){a.exports=we}},Z={};function x(a){var m=Z[a];if(m!==void 0)return m.exports;var g=Z[a]={id:a,exports:{}};return se[a](g,g.exports,x),g.exports}(function(){x.n=function(a){var m=a&&a.__esModule?function(){return a.default}:function(){return a};return x.d(m,{a:m}),m}})(),function(){x.d=function(a,m){for(var g in m)x.o(m,g)&&!x.o(a,g)&&Object.defineProperty(a,g,{enumerable:!0,get:m[g]})}}(),function(){x.o=function(a,m){return Object.prototype.hasOwnProperty.call(a,m)}}(),function(){x.r=function(a){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}}(),function(){x.nc=void 0}();var pe={};return function(){x.r(pe),x.d(pe,{Link:function(){return Tt},routeStore:function(){return ae},useRoute:function(){return It},useRouter:function(){return Mt}});var a=x(899),m=x.n(a),P=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),l=e=>P(e)==="array",f=e=>P(e)==="object",A=e=>(e==null?void 0:e.$$typeof)&&typeof e.$$typeof=="symbol"&&e.$$typeof.description==="react.element",I=e=>e==null?void 0:e.__v_isVNode,w=(e,t)=>Object.prototype.hasOwnProperty.call(e!=null?e:{},t);const F=e=>{if(!l(e)&&!f(e))return e;const t=l(e)?[]:{};for(const s in e)if(w(e,s)){const r=e[s];t[s]=A(r)||I(r)||typeof r!="object"?r:r!==e?F(r):"cyclic"}else Object.setPrototypeOf(t,{[s]:e[s]});return t};var D=F,J=e=>P(e)==="function",Y=e=>P(e)==="promise"||f(e)&&J(e.then),Pe=(e,t=12e4,s="\u8BF7\u6C42\u8D85\u65F6\uFF01")=>{if(!Y(e))return{};let r=null,n=null;return{promiseFn:new Promise((i,p)=>{r=(o="canceled")=>{clearTimeout(n),i({canceled:!0,errMsg:o})},t&&(t=typeof t!="number"?12e4:t,n=setTimeout(()=>r(s),t)),e.then(o=>{clearTimeout(n),i({result:o,errMsg:!1})}).catch(o=>{clearTimeout(n),p(o)})}),cancelFn:r}},Re=e=>e?e.charAt(e.length-1)==="/"?e.slice(0,-1):e:"",L=x(458),qe=(e,t)=>(0,L.jsx)("div",{dangerouslySetInnerHTML:{__html:e},...t}),oe=e=>{const{error:t={},info:s=""}=e||{},{message:r,stack:n,errMsg:u}=t;let i=u||n||t.toString();i=`${i}
${s}`.replace(/\r|\n|\r\n/g,"<br/>"),i=i.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),i=i.replace(/\s/g,"&nbsp;");const p=r==null?void 0:r.slice(0,120).split(". ").slice(0,2).join(". ");return(0,L.jsxs)("div",{style:{padding:"15px 20px",backgroundColor:"#fff",wordWrap:"break-word"},children:[qe(i,{style:{color:"red"}}),p&&(0,L.jsxs)("a",{style:{display:"inline-block",padding:"15px",color:"#00b4cf"},href:`https://stackoverflow.com/search?q=${p}`,target:"_blank",children:[" ","--> \u53BB\u7F51\u4E0A\u67E5\u627E\u9519\u8BEF\u539F\u56E0\uFF1F"]})]})};const xe=(e,t,s,r,n=[])=>{const u=o=>{for(let c=0,b=o.length;c<b;c++){const S=o[c],R=S[r].split("?")[0];if(new RegExp("^"+R.replace(/:[^/]+/g,"[^/]+")+"$").test(t))return S;if(l(S[s])){const C=u(S[s]);if(C)return C}}},i=u(e);if(!i)return"/404";const{redirect:p}=i;return p?n.includes(p)?n:(n.push(p),xe(e,p.split("?")[0],s,r,n)):n[n.length-1]},He=(e,t,s,r,n)=>{if(!l(e))return null;const u=b=>{const S=b.split("/"),R=t.split("/"),h={};return S.map((C,M)=>C.indexOf(":")===0&&(h[C.slice(1)]=R[M])),h},i=(b,S)=>{const R=[],h=S.split("/:")[0];for(let C=0,M=b.length;C<M;C++){const y=b[C];if(y[n]===h){y.active=!0;const{name:d,title:O,icon:$,params:B}=y;R.push({name:d,title:O,icon:$,params:B,[n]:h})}else if(S.indexOf(`${y[n]}/`)===0){y.active=!0;const d=u(y[n]),O=Object.keys(d).map(H=>d[H]).join("/"),{name:$,title:B,icon:j}=y,N=O?`${h}/${O}`:y[n];R.push({name:$,title:B,icon:j,[n]:N,params:{...y.params,...d}})}else if(y[n]===S){y.active=!0;const d=u(y[n]),{[r]:O,...$}=y;R.push({...$,[n]:t,params:{...$.params,...s,...d}})}}return R},p=(b,S)=>{for(let R=0,h=b.length;R<h;R++){const C=b[R];if(S.indexOf(`${C[n]}/`)===0){C.active=!0;return}}},o=b=>{for(let S=0,R=b.length;S<R;S++){const h=b[S],C=(h[n]||"").split("?")[0];if(C===t){h.hideMenu&&p(b,h.parentPath||C),h.active=!0;const{[r]:y,...d}=h;return[{...d,params:{...d.params,...s}}]}if(new RegExp("^"+C.replace(/:[^/]+/g,"[^/]+")+"$").test(t))return i(b,C);if(l(h[r])){const y=o(h[r]);if(y){h.active=!0,h.open=!0;const{[r]:d,...O}=h;return[O,...y]}}}},c=o(e)||[];return{result:e,current:c}},Ee=(e,t,s)=>e.filter(r=>r.hideMenu||r[s].indexOf("/:")>-1?!1:(l(r[t])&&(r[t]=Ee(r[t],t,s)),!0));var We=(e,t,s,r="children",n="path")=>{const u=xe(e,t,r,n);if(u)return{redirect:u};const{result:i,current:p}=He(e,t,s,r,n),o=Ee(i,r,n);return{current:p,menu:o}},G=()=>{const e={};return{on:(n,u)=>{e[n]||(e[n]=[]),e[n].indexOf(u)===-1&&e[n].push(u)},emit:(n,u)=>{e[n]&&e[n].map(i=>i(u))},off:(n,u=null)=>{if(e[n]){if(typeof u!="function")return e[n]=[];const i=e[n].indexOf(u);i>-1&&e[n].splice(i,1)}}}};const Oe=e=>{const t={};for(let s in e)w(e,s)||(t[s]=e[s]);return t};var Ze=(e,t)=>{if(!f(e))return t;if(!f(t))return e;const s={...Oe(e),...Oe(t)},r={...e,...t};return Object.keys(s).map(n=>{Object.setPrototypeOf(r,{[n]:s[n]})}),r},de=()=>{const{on:e,emit:t,off:s}=G(),r={};return{getState:o=>D(r[o]),setState:(o,c=!1)=>{if(typeof o=="function"&&(o=o(D(r))),!f(o))throw TypeError("\u5FC5\u987B\u4F20\u5165object\u5BF9\u8C61\uFF01");const b=D(o);Object.keys(b).map(S=>{const R=r[S],h=b[S],C=f(h)&&f(R)?Ze(R,h):h;!c&&t(S,C),r[S]=C})},subscribe:(o,c)=>(e(o,c),()=>s(o,c)),unsubscribe:s,clean:o=>{typeof o=="string"?r[o]=void 0:Array.isArray(o)?o.map(c=>r[c]=void 0):Object.keys(r).map(c=>r[c]=void 0)}}},Ae=e=>(t,s)=>{const[r,n]=(0,a.useState)(()=>{const o=e==null?void 0:e.getState(t);return o!==void 0?o:(s!==void 0&&(e==null||e.setState({[t]:s},!0)),s)}),u=(0,a.useCallback)(o=>e==null?void 0:e.setState({[t]:typeof o=="function"?o(e==null?void 0:e.getState(t)):o}),[]),i=(0,a.useCallback)(o=>e==null?void 0:e.subscribe(t,o),[]),p=(0,a.useCallback)((o=o)=>e==null?void 0:e.clean(o),[]);return(0,a.useEffect)(()=>{e==null||e.subscribe(t,o=>n(o))},[]),[r,u,i,p]};const Ve=de(),Yt=Ae(Ve),Gt=G(),Qt=G(),Kt="push-emitter",en="replace-emitter",tn="useRoute-emitter",me={delay:8e3,timeoutMsg:"\u8BF7\u6C42\u8D85\u65F6\uFF01",cancelMsg:"\u8BF7\u6C42\u5DF2\u53D6\u6D88\uFF01"},Je={getState:()=>history.state,go:e=>history.go(e),forward:()=>history.forward(),back:()=>history.back()};var ke=e=>/^https?:\/\/[^\s/?.#]+\.[^\s]+/.test(e);const _e=(e,t)=>{const s=["#/","/"],r=s[!!t-0];if(!e||s.includes(e))return r;const n=e.charAt(e.length-1)==="/"?e.slice(0,-1):e;return t||n.indexOf("#/")>-1?n:`#${n}`},ce=(e,t,s,r=!1)=>{const n=_e(t,s);return r?n:s?e&&n==="/"?e:`${e}${n}`:e?`${e}/${n}`:n},ze=(e,t,s,r,n,u)=>{if(!l(e))return e;const i=(p,o="")=>p.filter(c=>!c.denied).map(c=>{if(!u&&!c.exact&&!ke(c[r])){(!c[r]||c[r]==="javascript:;")&&(c[r]="");const b=c[r].charAt(0)==="/"&&o.charAt(o.length-1)==="/"?c[r].slice(1):c[r].charAt(0)!=="/"&&o.charAt(o.length-1)!=="/"?`/${c[r]}`:c[r];c[r]=o?o+b:ce(n,b,t)}return c.redirect&&(c.redirect=ce(n,c.redirect,t)),l(c[s])&&(c[s]=i(c[s],c[r]),!c.redirect&&c[s].length&&(c.redirect=c[s][0][r])),c});return i(e)};var Fe=e=>{if(!f(e))return"";const t=[];return Object.keys(e).map((s,r)=>{const n=r>0?"&":"?";t.push(`${n}${s}=${e[s]}`)}),t.join("")},he=(e="")=>{const[t,s]=e.split("?");if(s){const r={};return s.split("&").map(u=>{const[i,p]=u.split("=");r[i]=p}),{path:t,params:r}}return{path:t}};const Xe=()=>{document.documentElement.scrollTop?document.documentElement.scrollTop=0:document.body.scrollTop&&(document.body.scrollTop=0)},Ye=(e,t)=>{for(let s=e.length-1,r;r=e[s--];){const{title:n,name:u}=r;if(typeof n=="string"&&n.length)return document.title=n;if((n==null||n===!0)&&u)return document.title=t?`${u}-${t}`:u;if(t)return document.title=t}},Ge=e=>{const{pathname:t,search:s,hash:r}=location;if(e){const o=_e(t,e),c=decodeURIComponent(`${o}${s}`),{params:b}=he(c);return{path:c,params:b}}const n=decodeURIComponent(_e(r,e)),{params:u}=he(n),i=Re(t);return{path:i?`${i}/${n}`:n,params:u}},ve=(e,t,s)=>{typeof e=="function"&&e({...t,stay:new Date-s})},Qe=(e,t,s,r)=>{let n,u,i;if(typeof e=="string")n=e;else if(f(e))n=e.path,u=e.params,i=e.query;else return;!n||n==="."||n==="./"?n=r:n.indexOf("./")===0&&(n=`${r.split("?")[0]}${n.replace("./","/")}`),n=ce(t,n,s,e==null?void 0:e.exact);const p=he(n);n=p.path;const o={...p.params,...i},c=Fe(o);return n=`${n}${c}`,u={...u,...o},{path:n,params:u}},Me=(e,t)=>{const s=e.split(t);return s.length>1?["","/"].includes(s[1].slice(0,1)):!1},Ke=G();var $e=e=>{const{on:t,emit:s,off:r}=Ke;return{on:n=>t(e,n),emit:n=>s(e,n),off:n=>r(e,n)}},et=e=>(t,s)=>{const{getState:r,setState:n,subscribe:u,unsubscribe:i,clean:p}=e;return s!==void 0&&n({[t]:s},!0),{getState:()=>r(t),setState:(o,c)=>n({[t]:o},c),subscribe:o=>u(t,o),unsubscribe:()=>i(t),clean:()=>p(t)}};const tt=de();var nt=et(tt);const ge=$e("push-emitter"),Te=$e("replace-emitter"),ae=nt("route-store"),rt=G(),Ie=de(),st=Ae(Ie);var ot=()=>![typeof window,typeof document].includes("undefined"),ct=e=>{if(!ot())return;const t=document.createElement("div");return t.innerHTML=e,t.children[0]},at=Object.defineProperty,ut=(e,t,s)=>t in e?at(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,it=(e,t,s)=>(ut(e,typeof t!="symbol"?t+"":t,s),s);class lt extends m().Component{constructor(){super(...arguments),it(this,"state",{error:null})}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,s){const{errorReport:r}=this.props;typeof r=="function"&&r({error:t,info:s.componentStack})}render(){const{error:t}=this.state,{fallback:s,children:r}=this.props;return t?s(t):r}}var ft=({children:e,report:t})=>{var s;const r=(0,a.useRef)();return(s=r.current)!=null&&s.state&&(r.current.state.error=null),(0,L.jsx)(lt,{ref:r,fallback:(n,u)=>oe({error:n,info:u}),errorReport:t,children:e})},pt=x(748),dt=x.n(pt),mt=x(306),_t=x.n(mt),ht=x(736),vt=x.n(ht),gt=x(567),bt=x.n(gt),yt=x(706),Ct=x.n(yt),St=x(62),wt=x.n(St),ue=x(201),z={};z.styleTagTransform=wt(),z.setAttributes=bt(),z.insert=vt().bind(null,"head"),z.domAPI=_t(),z.insertStyleElement=Ct();var pn=dt()(ue.Z,z),dn=ue.Z&&ue.Z.locals?ue.Z.locals:void 0,Pt=({global:e,absolute:t})=>(0,L.jsx)("div",{className:`spinner${e?" global":""}${t?" absolute":""}`,children:(0,L.jsx)("figure",{className:"spinning"})}),Rt=()=>{const e=(0,a.useRef)([]);return(0,a.useEffect)(()=>()=>{e.current.map(s=>s.cancelFn()),e.current=[]},[]),{cancelablePromise:(0,a.useCallback)((s,r=!0)=>{const n=Pe(s,r);return e.current.indexOf(n)===-1&&e.current.push(n),n.promiseFn},[])}},De=(e={})=>{const{cancelablePromise:t}=Rt(),[s,r]=(0,a.useState)(e),n=(0,a.useRef)({}),u=(0,a.useRef)({}),i=(0,a.useCallback)((o=null)=>{Array.isArray(o)&&o.length?o.map(c=>n.current[c]=e[c]):n.current=e},[]),p=(0,a.useCallback)((o,c,b=!1)=>{const S=Object.keys(o),R=JSON.stringify(S.sort());if(!u.current[R]){u.current[R]=!0,b&&i(Array.isArray(b)?b:S),S.map(h=>{n.current[h]||(n.current[h]={}),n.current[h].pending=!0}),r({...n.current});for(let h=0,C=S.length;h<C;h++){const M=S[h];t(o[M]).then(y=>{let{result:d,errMsg:O}=y;h===C-1&&(u.current[R]=!1),typeof c=="function"&&(d=c(d)||d),n.current[M]={...d,pending:!1},O===!1&&r({...n.current})}).catch(y=>{throw h===C-1&&(u.current[R]=!1),n.current[M]={error:y,pending:!1},r({...n.current}),y})}}},[]);return[s,p,i]};const ie=e=>Object.keys(e).length;var xt=e=>{const{Comp:t,restResolve:s,loadPromise:r,params:n,children:u}=e,[i,p]=De(),[o,c]=De();return(0,a.useEffect)(()=>{ie(s)&&p(s),ie(r)&&c(r)},[s,r]),(0,a.useEffect)(()=>{const b=ie(i);b&&b===ie(s)&&n.store.setState(i)},[i]),(0,L.jsx)(t,{...n,...i,...o,children:u})};const Et=e=>e===!1?null:A(e)?e:J(e)?(0,L.jsx)(e,{}):(0,L.jsx)(Pt,{}),Ot=({Loading:e,ErrorBoundary:t,loadedComp:s})=>{const r=(0,L.jsx)(a.Suspense,{fallback:Et(e),children:s});return t===!1?r:J(t)?(0,L.jsx)(t,{children:r}):(0,L.jsx)(ft,{children:r})};var Be=({Comp:e,routerProps:t,children:s})=>{const{params:r,...n}=t,{loading:u,errorBoundary:i,...p}=r,o=(0,L.jsx)(xt,{Comp:e,...n,params:p,children:s});return Ot({Loading:u,ErrorBoundary:i,loadedComp:o})};const be={},At=(e,t,s)=>{const r={},n={};return f(e)?(Object.keys(e).map(u=>{const i=t.getState(u);i==null?n[u]=e[u](s):r[u]=i}),{cachedResolve:r,restResolve:n}):{cachedResolve:r,restResolve:n}},kt=(e,t)=>{if(!f(e))return{};const s={};return Object.keys(e).map(r=>s[r]=e[r](t)),s},ye=(e,t,s)=>Y(s)?s.then(r=>{var n;return Be({Comp:e,routerProps:t,children:(n=r.default)!=null?n:r})}):Be({Comp:e,routerProps:t,children:s});var Ft=e=>{const{current:t,menu:s,...r}=e,n=t.map(p=>{const{component:o,resolve:c,loadData:b,loading:S,errorBoundary:R,icon:h,...C}=p;return C}),u=[...t].filter(p=>p.component),i=(p=0)=>{if(!u.length)return null;const o=u.shift(),{component:c,resolve:b,loadData:S,icon:R,key:h,...C}=o;if(typeof c=="function"||Y(c)){const M=C.path;let y=be[M];const{cachedResolve:d,restResolve:O}=At(b,r.store,C),B={loadPromise:kt(S,C),restResolve:O,params:{current:n,...r,...C,...d}},j=i(p+1);if(y)return ye(y,B,j);try{y=c(),y=A(y)?c:y}catch(N){y=c}return Y(y)?y.then(N=>{var H;return y=(H=N.default)!=null?H:N,be[M]=y,ye(y,B,j)}):(be[M]=y,ye(y,B,j))}return typeof c=="string"?ct(c):c};return i()},Mt=e=>{const[t,s]=(0,a.useState)(e),[r,n]=(0,a.useState)(),[u,i]=(0,a.useState)(),p=(0,a.useRef)(),o=(0,a.useRef)(),c=(0,a.useRef)(),b=(0,a.useRef)(),S=()=>{typeof p.current=="function"&&(p.current({cancel:me.cancelMsg}),p.current=null)},R=(0,a.useCallback)(d=>{typeof d=="function"?s(O=>({...O,...d(O)})):f(d)&&s(O=>({...O,...d}))},[]),h=(d,O="pushState")=>{const{basepath:$,browserRouter:B}=b.current,j=c.current,{path:N,params:H}=Qe(d,$,B,j);if(N===j)return;y({inputPath:N,inputParams:H},()=>history[O](d==null?void 0:d.state,"",N))},C=(0,a.useCallback)(d=>h(d),[]),M=(0,a.useCallback)(d=>h(d,"replaceState"),[]),y=(0,a.useCallback)(({inputPath:d="",inputParams:O={}},$)=>{const B=+new Date,{browserRouter:j,childKey:N,idKey:H,title:Q,routers:K,beforeRender:ee,afterRender:te,basepath:ne,allowedNotFound:W,...Dt}=b.current;if(!d){const{path:U,params:V}=Ge(j);d=U,O={...O,...V}}new Promise((U,V)=>{K!=null&&K.length||V("\u8DEF\u7531\u4E3A\u7A7A\uFF01"),d!==c.current&&typeof ee=="function"?ee({path:d,params:O,prevPath:c.current},U,V):U()}).then(U=>{var V,Le;if(U===!1)return;const je=U==null?void 0:U.path;if(je&&ce(ne,je,j)!==d){M(U);return}o.current=(V=o.current)!=null?V:d;const{redirect:X,current:re,menu:Bt}=We(D(K),d.split("?")[0],O,N,H);if(X){if(W&&X==="/404"&&(typeof W=="boolean"||typeof W=="string"&&Me(o.current,W)||l(W)&&W.find(Se=>Me(o.current,Se))))return;if(l(X)){console.error(`\u522B\u95F9\uFF0C[${[d,...X].join(" -> ")}] \u91CD\u5B9A\u5411\u6B7B\u5FAA\u73AF\uFF01\uFF01\uFF01`);return}C({path:X,exact:X!=="/404"});return}$==null||$(),(d==null?void 0:d.split("?")[0])!==((Le=c.current)==null?void 0:Le.split("?")[0])&&Xe(),Ye(re,Q);const Ne={eventBus:rt,store:Ie,useStore:st,...Dt,updateRouter:R,router:{push:C,replace:M},current:re,menu:Bt,inputPath:o.current,prevPath:c.current,basepath:ne,title:Q,history:Je};ae.setState({...Ne,browserRouter:j});const Ce=Ft(Ne);if(c.current=d,o.current=null,S(),Y(Ce)){const{promiseFn:Se,cancelFn:Lt}=Pe(Ce,{delay:me.delay,msg:{timeout:me.timeoutMsg}});return p.current=Lt,i(!0),Se.then(le=>{p.current=null;const{result:jt,errMsg:fe}=le,Ue=fe===!1?jt:fe!=null&&fe.timeout?oe({error:{errMsg:`${d} ${fe.timeout}`}}):null;Ue&&(i(!1),ve(te,re.slice(-1)[0],B),n(Ue))}).catch(le=>{throw p.current=null,i(!1),ve(te,re.slice(-1)[0],B),n(oe({error:le})),le})}ve(te,re.slice(-1)[0],B),n(Ce)}).catch(U=>{throw n(oe({error:U})),U})},[]);return(0,a.useEffect)(()=>{const{childKey:d="children",idKey:O="path",browserRouter:$=!1,routers:B=[],basepath:j="",exact:N=!1,inputPath:H="",inputParams:Q={},...K}=t,ee=Re(j),te=ze(D(B),$,d,O,ee,N);b.current={...K,childKey:d,idKey:O,browserRouter:$,routers:te,basepath:ee};const ne=$?"popstate":"hashchange",W=()=>y({});return y({inputPath:H,inputParams:Q}),ge.on(C),Te.on(M),window.addEventListener(ne,W,!1),()=>{S(),ge.off(C),Te.off(M),window.removeEventListener(ne,W,!1)}},[t]),{updateRouter:R,output:r,loading:u}},$t=e=>{const{to:t,onClick:s,preventDefault:r,stopPropagation:n=!0,exact:u=!0,target:i,...p}=e,o=()=>{const b=typeof t=="string"?{exact:u,path:t}:{exact:u,...t};ge.emit(b)};return b=>{var S;if(b.preventDefault(),n&&b.stopPropagation(),!(p!=null&&p.disabled)){if(!r){if(i){const{browserRouter:R}=ae.getState(),h=typeof t=="string"?t:(S=t==null?void 0:t.path)!=null?S:"",C=Fe(t==null?void 0:t.query),M=R||h.indexOf("#/")>-1||ke(h);window==null||window.open(`${M?"":"#"}${h}${C}`,i);return}o()}typeof s=="function"&&s()}}},Tt=e=>{const{to:t,onClick:s,preventDefault:r,stopPropagation:n,exact:u,target:i,...p}=e;return(0,L.jsx)("a",{onClick:$t(e),...p})};const It=()=>ae.getState()}(),pe}()});

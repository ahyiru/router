(function(oe,q){typeof exports=="object"&&typeof module=="object"?module.exports=q(require("react")):typeof define=="function"&&define.amd?define("router",["react"],q):typeof exports=="object"?exports.router=q(require("react")):oe.router=q(oe.React)})(this,function(Re){return function(){"use strict";var oe={201:function(c,_,m){var w=m(703),v=m.n(w),i=m(414),h=m.n(i),f=h()(v());f.push([c.id,`@keyframes before {
  0% {
    width: 0.6rem;
    box-shadow: 1.2rem -0.6rem #ff3e38, -1.2rem 0.6rem #318ffa;
  }
  35% {
    width: 3rem;
    box-shadow: 0 -0.6rem #ff3e38, 0 0.6rem #318ffa;
  }
  70% {
    width: 0.6rem;
    box-shadow: -1.2rem -0.6rem #ff3e38, 1.2rem 0.6rem #318ffa;
  }
  100% {
    box-shadow: 1.2rem -0.6rem #ff3e38, -1.2rem 0.6rem #318ffa;
  }
}
@keyframes after {
  0% {
    height: 0.6rem;
    box-shadow: 0.6rem 1.2rem #6ce581, -0.6rem -1.2rem #fecb2e;
  }
  35% {
    height: 3rem;
    box-shadow: 0.6rem 0 #6ce581, -0.6rem 0 #fecb2e;
  }
  70% {
    height: 0.6rem;
    box-shadow: 0.6rem -1.2rem #6ce581, -0.6rem 1.2rem #fecb2e;
  }
  100% {
    box-shadow: 0.6rem 1.2rem #6ce581, -0.6rem -1.2rem #fecb2e;
  }
}
.spinner {
  position: relative;
  height: 100%;
  min-height: 100px;
  display: block;
  overflow: hidden;
  pointer-events: auto;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 999;
  background-color: hsla(0, 0%, 72%, 0.24);
}
.spinner.absolute {
  position: absolute;
  min-height: auto;
}
.spinner.global {
  position: fixed;
  width: 100vw;
  height: 100vh;
}
.spinner .spinning {
  width: 3rem;
  height: 3rem;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) rotate(165deg);
  margin: 0;
}
.spinner .spinning::before,
.spinner .spinning::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  display: block;
  width: 0.6rem;
  height: 0.6rem;
  border-radius: 0.3rem;
  transform: translate(-50%, -50%);
}
.spinner .spinning::before {
  animation: before 1.5s infinite;
}
.spinner .spinning::after {
  animation: after 1.5s infinite;
}
`,""]),f.locals={},_.Z=f},982:function(c,_,m){var w=m(703),v=m.n(w),i=m(414),h=m.n(i),f=h()(v());f.push([c.id,`.Iuy_e {
  text-decoration: none;
  cursor: pointer;
  color: var(--linkColor);
  background-color: transparent;
  font-weight: 500;
  transition: color 0.3s;
}
.Iuy_e:active, .Iuy_e.D3oJg {
  color: var(--linkActiveColor, #40a9ff);
}
.Iuy_e:hover {
  color: var(--linkHoverColor, #1890ff);
}
.Iuy_e[disabled] {
  cursor: not-allowed;
  opacity: 0.7;
}
.Iuy_e[disabled]:active, .Iuy_e[disabled].D3oJg, .Iuy_e[disabled]:hover {
  color: var(--linkColor);
}
`,""]),f.locals={link:"Iuy_e",active:"D3oJg"},_.Z=f},414:function(c){c.exports=function(_){var m=[];return m.toString=function(){return this.map(function(v){var i="",h=typeof v[5]!="undefined";return v[4]&&(i+="@supports (".concat(v[4],") {")),v[2]&&(i+="@media ".concat(v[2]," {")),h&&(i+="@layer".concat(v[5].length>0?" ".concat(v[5]):""," {")),i+=_(v),h&&(i+="}"),v[2]&&(i+="}"),v[4]&&(i+="}"),i}).join("")},m.i=function(v,i,h,f,D){typeof v=="string"&&(v=[[null,v,void 0]]);var O={};if(h)for(var x=0;x<this.length;x++){var T=this[x][0];T!=null&&(O[T]=!0)}for(var A=0;A<v.length;A++){var P=[].concat(v[A]);h&&O[P[0]]||(typeof D!="undefined"&&(typeof P[5]=="undefined"||(P[1]="@layer".concat(P[5].length>0?" ".concat(P[5]):""," {").concat(P[1],"}")),P[5]=D),i&&(P[2]&&(P[1]="@media ".concat(P[2]," {").concat(P[1],"}")),P[2]=i),f&&(P[4]?(P[1]="@supports (".concat(P[4],") {").concat(P[1],"}"),P[4]=f):P[4]="".concat(f)),m.push(P))}},m}},703:function(c){c.exports=function(_){return _[1]}},53:function(c,_,m){var w;var v=m(899),i=Symbol.for("react.element"),h=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,D=v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O={key:!0,ref:!0,__self:!0,__source:!0};function x(T,A,P){var M,$={},W=null,V=null;P!==void 0&&(W=""+P),A.key!==void 0&&(W=""+A.key),A.ref!==void 0&&(V=A.ref);for(M in A)f.call(A,M)&&!O.hasOwnProperty(M)&&($[M]=A[M]);if(T&&T.defaultProps)for(M in A=T.defaultProps,A)$[M]===void 0&&($[M]=A[M]);return{$$typeof:i,type:T,key:W,ref:V,props:$,_owner:D.current}}w=h,_.jsx=x,_.jsxs=x},458:function(c,_,m){c.exports=m(53)},748:function(c){var _=[];function m(i){for(var h=-1,f=0;f<_.length;f++)if(_[f].identifier===i){h=f;break}return h}function w(i,h){for(var f={},D=[],O=0;O<i.length;O++){var x=i[O],T=h.base?x[0]+h.base:x[0],A=f[T]||0,P="".concat(T," ").concat(A);f[T]=A+1;var M=m(P),$={css:x[1],media:x[2],sourceMap:x[3],supports:x[4],layer:x[5]};if(M!==-1)_[M].references++,_[M].updater($);else{var W=v($,h);h.byIndex=O,_.splice(O,0,{identifier:P,updater:W,references:1})}D.push(P)}return D}function v(i,h){var f=h.domAPI(h);f.update(i);var D=function(x){if(x){if(x.css===i.css&&x.media===i.media&&x.sourceMap===i.sourceMap&&x.supports===i.supports&&x.layer===i.layer)return;f.update(i=x)}else f.remove()};return D}c.exports=function(i,h){h=h||{},i=i||[];var f=w(i,h);return function(O){O=O||[];for(var x=0;x<f.length;x++){var T=f[x],A=m(T);_[A].references--}for(var P=w(O,h),M=0;M<f.length;M++){var $=f[M],W=m($);_[W].references===0&&(_[W].updater(),_.splice(W,1))}f=P}}},736:function(c){var _={};function m(v){if(typeof _[v]=="undefined"){var i=document.querySelector(v);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(h){i=null}_[v]=i}return _[v]}function w(v,i){var h=m(v);if(!h)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");h.appendChild(i)}c.exports=w},706:function(c){function _(m){var w=document.createElement("style");return m.setAttributes(w,m.attributes),m.insert(w,m.options),w}c.exports=_},567:function(c,_,m){function w(v){var i=m.nc;i&&v.setAttribute("nonce",i)}c.exports=w},306:function(c){function _(v,i,h){var f="";h.supports&&(f+="@supports (".concat(h.supports,") {")),h.media&&(f+="@media ".concat(h.media," {"));var D=typeof h.layer!="undefined";D&&(f+="@layer".concat(h.layer.length>0?" ".concat(h.layer):""," {")),f+=h.css,D&&(f+="}"),h.media&&(f+="}"),h.supports&&(f+="}");var O=h.sourceMap;O&&typeof btoa!="undefined"&&(f+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(O))))," */")),i.styleTagTransform(f,v,i.options)}function m(v){if(v.parentNode===null)return!1;v.parentNode.removeChild(v)}function w(v){var i=v.insertStyleElement(v);return{update:function(f){_(i,v,f)},remove:function(){m(i)}}}c.exports=w},62:function(c){function _(m,w){if(w.styleSheet)w.styleSheet.cssText=m;else{for(;w.firstChild;)w.removeChild(w.firstChild);w.appendChild(document.createTextNode(m))}}c.exports=_},899:function(c){c.exports=Re}},q={};function R(c){var _=q[c];if(_!==void 0)return _.exports;var m=q[c]={id:c,exports:{}};return oe[c](m,m.exports,R),m.exports}(function(){R.n=function(c){var _=c&&c.__esModule?function(){return c.default}:function(){return c};return R.d(_,{a:_}),_}})(),function(){R.d=function(c,_){for(var m in _)R.o(_,m)&&!R.o(c,m)&&Object.defineProperty(c,m,{enumerable:!0,get:_[m]})}}(),function(){R.o=function(c,_){return Object.prototype.hasOwnProperty.call(c,_)}}(),function(){R.r=function(c){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})}}(),function(){R.nc=void 0}();var me={};return function(){R.r(me),R.d(me,{Link:function(){return Lt},routeStore:function(){return ue},useRoute:function(){return jt},useRouter:function(){return Tt}});var c=R(899),_=R.n(c),w=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),i=e=>w(e)==="array",f=e=>w(e)==="object",O=e=>(e==null?void 0:e.$$typeof)&&typeof e.$$typeof=="symbol"&&e.$$typeof.description==="react.element",T=e=>e==null?void 0:e.__v_isVNode,P=(e,t)=>Object.prototype.hasOwnProperty.call(e!=null?e:{},t);const M=e=>{if(!i(e)&&!f(e))return e;const t=i(e)?[]:{};for(const s in e)if(P(e,s)){const r=e[s];t[s]=O(r)||T(r)||typeof r!="object"?r:r!==e?M(r):"cyclic"}else Object.setPrototypeOf(t,{[s]:e[s]});return t};var $=M,V=e=>w(e)==="function",G=e=>w(e)==="promise"||f(e)&&V(e.then),xe=(e,t=12e4,s="\u8BF7\u6C42\u8D85\u65F6\uFF01")=>{if(!G(e))return{};let r=null,n=null;return{promiseFn:new Promise((l,p)=>{r=(o="canceled")=>{clearTimeout(n),l({canceled:!0,errMsg:o})},t&&(t=typeof t!="number"?12e4:t,n=setTimeout(()=>r(s),t)),e.then(o=>{clearTimeout(n),l({result:o,errMsg:!1})}).catch(o=>{clearTimeout(n),p(o)})}),cancelFn:r}},ke=e=>e?e.charAt(e.length-1)==="/"?e.slice(0,-1):e:"",L=R(458),Ge=(e,t)=>(0,L.jsx)("div",{dangerouslySetInnerHTML:{__html:e},...t}),ce=e=>{const{error:t={},info:s=""}=e||{},{message:r,stack:n,errMsg:u}=t;let l=u||n||t.toString();l=`${l}
${s}`.replace(/\r|\n|\r\n/g,"<br/>"),l=l.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),l=l.replace(/\s/g,"&nbsp;");const p=r==null?void 0:r.slice(0,120).split(". ").slice(0,2).join(". ");return(0,L.jsxs)("div",{style:{padding:"15px 20px",backgroundColor:"#fff",wordWrap:"break-word"},children:[Ge(l,{style:{color:"red"}}),p&&(0,L.jsxs)("a",{style:{display:"inline-block",padding:"15px",color:"#00b4cf"},href:`https://stackoverflow.com/search?q=${p}`,target:"_blank",children:[" ","--> \u53BB\u7F51\u4E0A\u67E5\u627E\u9519\u8BEF\u539F\u56E0\uFF1F"]})]})};const Oe=(e,t,s,r,n=[])=>{const u=o=>{for(let a=0,b=o.length;a<b;a++){const S=o[a],E=S[r].split("?")[0];if(new RegExp("^"+E.replace(/:[^/]+/g,"[^/]+")+"$").test(t))return S;if(i(S[s])){const C=u(S[s]);if(C)return C}}},l=u(e);if(!l)return"/404";const{redirect:p}=l;return p?n.includes(p)?n:(n.push(p),Oe(e,p.split("?")[0],s,r,n)):n[n.length-1]},Qe=(e,t,s,r,n)=>{if(!i(e))return null;const u=b=>{const S=b.split("/"),E=t.split("/"),g={};return S.map((C,F)=>C.indexOf(":")===0&&(g[C.slice(1)]=E[F])),g},l=(b,S)=>{const E=[],g=S.split("/:")[0];for(let C=0,F=b.length;C<F;C++){const y=b[C];if(y[n]===g){y.active=!0;const{name:d,title:k,icon:I,params:B}=y;E.push({name:d,title:k,icon:I,params:B,[n]:g})}else if(S.indexOf(`${y[n]}/`)===0){y.active=!0;const d=u(y[n]),k=Object.keys(d).map(H=>d[H]).join("/"),{name:I,title:B,icon:j}=y,N=k?`${g}/${k}`:y[n];E.push({name:I,title:B,icon:j,[n]:N,params:{...y.params,...d}})}else if(y[n]===S){y.active=!0;const d=u(y[n]),{[r]:k,...I}=y;E.push({...I,[n]:t,params:{...I.params,...s,...d}})}}return E},p=(b,S)=>{for(let E=0,g=b.length;E<g;E++){const C=b[E];if(S.indexOf(`${C[n]}/`)===0){C.active=!0;return}}},o=b=>{for(let S=0,E=b.length;S<E;S++){const g=b[S],C=(g[n]||"").split("?")[0];if(C===t){g.hideMenu&&p(b,g.parentPath||C),g.active=!0;const{[r]:y,...d}=g;return[{...d,params:{...d.params,...s}}]}if(new RegExp("^"+C.replace(/:[^/]+/g,"[^/]+")+"$").test(t))return l(b,C);if(i(g[r])){const y=o(g[r]);if(y){g.active=!0,g.open=!0;const{[r]:d,...k}=g;return[k,...y]}}}},a=o(e)||[];return{result:e,current:a}},Ae=(e,t,s)=>e.filter(r=>r.hideMenu||r[s].indexOf("/:")>-1?!1:(i(r[t])&&(r[t]=Ae(r[t],t,s)),!0));var Ke=(e,t,s,r="children",n="path")=>{const u=Oe(e,t,r,n);if(u)return{redirect:u};const{result:l,current:p}=Qe(e,t,s,r,n),o=Ae(l,r,n);return{current:p,menu:o}},Q=()=>{const e={};return{on:(n,u)=>{e[n]||(e[n]=[]),e[n].indexOf(u)===-1&&e[n].push(u)},emit:(n,u)=>{e[n]&&e[n].map(l=>l(u))},off:(n,u=null)=>{if(e[n]){if(typeof u!="function")return e[n]=[];const l=e[n].indexOf(u);l>-1&&e[n].splice(l,1)}}}};const Me=e=>{const t={};for(let s in e)P(e,s)||(t[s]=e[s]);return t};var et=(e,t)=>{if(!f(e))return t;if(!f(t))return e;const s={...Me(e),...Me(t)},r={...e,...t};return Object.keys(s).map(n=>{Object.setPrototypeOf(r,{[n]:s[n]})}),r},he=()=>{const{on:e,emit:t,off:s}=Q(),r={};return{getState:o=>$(r[o]),setState:(o,a=!1)=>{if(typeof o=="function"&&(o=o($(r))),!f(o))throw TypeError("\u5FC5\u987B\u4F20\u5165object\u5BF9\u8C61\uFF01");const b=$(o);Object.keys(b).map(S=>{const E=r[S],g=b[S],C=f(g)&&f(E)?et(E,g):g;!a&&t(S,C),r[S]=C})},subscribe:(o,a)=>(e(o,a),()=>s(o,a)),unsubscribe:s,clean:o=>{typeof o=="string"?r[o]=void 0:Array.isArray(o)?o.map(a=>r[a]=void 0):Object.keys(r).map(a=>r[a]=void 0)}}},Fe=e=>(t,s)=>{const[r,n]=(0,c.useState)(()=>{const o=e==null?void 0:e.getState(t);return o!==void 0?o:(s!==void 0&&(e==null||e.setState({[t]:s},!0)),s)}),u=(0,c.useCallback)(o=>e==null?void 0:e.setState({[t]:typeof o=="function"?o(e==null?void 0:e.getState(t)):o}),[]),l=(0,c.useCallback)(o=>e==null?void 0:e.subscribe(t,o),[]),p=(0,c.useCallback)((o=o)=>e==null?void 0:e.clean(o),[]);return(0,c.useEffect)(()=>{e==null||e.subscribe(t,o=>n(o))},[]),[r,u,l,p]};const tt=he(),en=Fe(tt),tn=Q(),nn=Q(),rn="push-emitter",sn="replace-emitter",on="useRoute-emitter",ve={delay:8e3,timeoutMsg:"\u8BF7\u6C42\u8D85\u65F6\uFF01",cancelMsg:"\u8BF7\u6C42\u5DF2\u53D6\u6D88\uFF01"},nt={getState:()=>history.state,go:e=>history.go(e),forward:()=>history.forward(),back:()=>history.back()};var Ie=e=>/^https?:\/\/[^\s/?.#]+\.[^\s]+/.test(e);const ge=(e,t)=>{const s=["#/","/"],r=s[!!t-0];if(!e||s.includes(e))return r;const n=e.charAt(e.length-1)==="/"?e.slice(0,-1):e;return t||n.indexOf("#/")>-1?n:`#${n}`},ae=(e,t,s,r=!1)=>{const n=ge(t,s);return r?n:s?e&&n==="/"?e:`${e}${n}`:e?`${e}/${n}`:n},rt=(e,t,s,r,n,u)=>{if(!i(e))return e;const l=(p,o="")=>p.filter(a=>!a.denied).map(a=>{if(!u&&!a.exact&&!Ie(a[r])){(!a[r]||a[r]==="javascript:;")&&(a[r]="");const b=a[r].charAt(0)==="/"&&o.charAt(o.length-1)==="/"?a[r].slice(1):a[r].charAt(0)!=="/"&&o.charAt(o.length-1)!=="/"?`/${a[r]}`:a[r];a[r]=o?o+b:ae(n,b,t)}return a.redirect&&(a.redirect=ae(n,a.redirect,t)),i(a[s])&&(a[s]=l(a[s],a[r]),!a.redirect&&a[s].length&&(a.redirect=a[s][0][r])),a});return l(e)};var De=e=>{if(!f(e))return"";const t=[];return Object.keys(e).map((s,r)=>{const n=r>0?"&":"?";t.push(`${n}${s}=${e[s]}`)}),t.join("")},be=(e="")=>{const[t,s]=e.split("?");if(s){const r={};return s.split("&").map(u=>{const[l,p]=u.split("=");r[l]=p}),{path:t,params:r}}return{path:t}};const st=()=>{document.documentElement.scrollTop?document.documentElement.scrollTop=0:document.body.scrollTop&&(document.body.scrollTop=0)},ot=(e,t)=>{for(let s=e.length-1,r;r=e[s--];){const{title:n,name:u}=r;if(typeof n=="string"&&n.length)return document.title=n;if((n==null||n===!0)&&u)return document.title=t?`${u}-${t}`:u;if(t)return document.title=t}},ct=e=>{const{pathname:t,search:s,hash:r}=location;if(e){const o=ge(t,e),a=decodeURIComponent(`${o}${s}`),{params:b}=be(a);return{path:a,params:b}}const n=decodeURIComponent(ge(r,e)),{params:u}=be(n),l=ke(t);return{path:l?`${l}/${n}`:n,params:u}},ye=(e,t,s)=>{typeof e=="function"&&e({...t,stay:new Date-s})},at=(e,t,s,r)=>{let n,u,l;if(typeof e=="string")n=e;else if(f(e))n=e.path,u=e.params,l=e.query;else return;!n||n==="."||n==="./"?n=r:n.indexOf("./")===0&&(n=`${r.split("?")[0]}${n.replace("./","/")}`),n=ae(t,n,s,e==null?void 0:e.exact);const p=be(n);n=p.path;const o={...p.params,...l},a=De(o);return n=`${n}${a}`,u={...u,...o},{path:n,params:u}},Te=(e,t)=>{const s=e.split(t);return s.length>1?["","/"].includes(s[1].slice(0,1)):!1},ut=Q();var $e=e=>{const{on:t,emit:s,off:r}=ut;return{on:n=>t(e,n),emit:n=>s(e,n),off:n=>r(e,n)}},it=e=>(t,s)=>{const{getState:r,setState:n,subscribe:u,unsubscribe:l,clean:p}=e;return s!==void 0&&n({[t]:s},!0),{getState:()=>r(t),setState:(o,a)=>n({[t]:o},a),subscribe:o=>u(t,o),unsubscribe:()=>l(t),clean:()=>p(t)}};const lt=he();var ft=it(lt);const Ce=$e("push-emitter"),Be=$e("replace-emitter"),ue=ft("route-store"),pt=Q(),Le=he(),_t=Fe(Le);var dt=()=>![typeof window,typeof document].includes("undefined"),mt=e=>{if(!dt())return;const t=document.createElement("div");return t.innerHTML=e,t.children[0]},ht=Object.defineProperty,vt=(e,t,s)=>t in e?ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,gt=(e,t,s)=>(vt(e,typeof t!="symbol"?t+"":t,s),s);class bt extends _().Component{constructor(){super(...arguments),gt(this,"state",{error:null})}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,s){const{errorReport:r}=this.props;typeof r=="function"&&r({error:t,info:s.componentStack})}render(){const{error:t}=this.state,{fallback:s,children:r}=this.props;return t?s(t):r}}var yt=({children:e,report:t})=>{var s;const r=(0,c.useRef)();return(s=r.current)!=null&&s.state&&(r.current.state.error=null),(0,L.jsx)(bt,{ref:r,fallback:(n,u)=>ce({error:n,info:u}),errorReport:t,children:e})},Ct=R(748),je=R.n(Ct),St=R(306),Ne=R.n(St),Pt=R(736),Ue=R.n(Pt),wt=R(567),We=R.n(wt),Et=R(706),He=R.n(Et),Rt=R(62),Ze=R.n(Rt),ie=R(201),X={};X.styleTagTransform=Ze(),X.setAttributes=We(),X.insert=Ue().bind(null,"head"),X.domAPI=Ne(),X.insertStyleElement=He();var hn=je()(ie.Z,X),vn=ie.Z&&ie.Z.locals?ie.Z.locals:void 0,xt=({global:e,absolute:t})=>(0,L.jsx)("div",{className:`spinner${e?" global":""}${t?" absolute":""}`,children:(0,L.jsx)("figure",{className:"spinning"})}),kt=()=>{const e=(0,c.useRef)([]);return(0,c.useEffect)(()=>()=>{e.current.map(s=>s.cancelFn()),e.current=[]},[]),{cancelablePromise:(0,c.useCallback)((s,r=!0)=>{const n=xe(s,r);return e.current.indexOf(n)===-1&&e.current.push(n),n.promiseFn},[])}},qe=(e={})=>{const{cancelablePromise:t}=kt(),[s,r]=(0,c.useState)(e),n=(0,c.useRef)({}),u=(0,c.useRef)({}),l=(0,c.useCallback)((o=null)=>{Array.isArray(o)&&o.length?o.map(a=>n.current[a]=e[a]):n.current=e},[]),p=(0,c.useCallback)((o,a,b=!1)=>{const S=Object.keys(o),E=JSON.stringify(S.sort());if(!u.current[E]){u.current[E]=!0,b&&l(Array.isArray(b)?b:S),S.map(g=>{n.current[g]||(n.current[g]={}),n.current[g].pending=!0}),r({...n.current});for(let g=0,C=S.length;g<C;g++){const F=S[g];t(o[F]).then(y=>{let{result:d,errMsg:k}=y;g===C-1&&(u.current[E]=!1),typeof a=="function"&&(d=a(d)||d),n.current[F]={...d,pending:!1},k===!1&&r({...n.current})}).catch(y=>{throw g===C-1&&(u.current[E]=!1),n.current[F]={error:y,pending:!1},r({...n.current}),y})}}},[]);return[s,p,l]};const le=e=>Object.keys(e).length;var Ot=e=>{const{Comp:t,restResolve:s,loadPromise:r,params:n,children:u}=e,[l,p]=qe(),[o,a]=qe();return(0,c.useEffect)(()=>{le(s)&&p(s),le(r)&&a(r)},[s,r]),(0,c.useEffect)(()=>{const b=le(l);b&&b===le(s)&&n.store.setState(l)},[l]),(0,L.jsx)(t,{...n,...l,...o,children:u})};const At=e=>e===!1?null:O(e)?e:V(e)?(0,L.jsx)(e,{}):(0,L.jsx)(xt,{}),Mt=({Loading:e,ErrorBoundary:t,loadedComp:s})=>{const r=(0,L.jsx)(c.Suspense,{fallback:At(e),children:s});return t===!1?r:V(t)?(0,L.jsx)(t,{children:r}):(0,L.jsx)(yt,{children:r})};var Je=({Comp:e,routerProps:t,children:s})=>{const{params:r,...n}=t,{loading:u,errorBoundary:l,...p}=r,o=(0,L.jsx)(Ot,{Comp:e,...n,params:p,children:s});return Mt({Loading:u,ErrorBoundary:l,loadedComp:o})};const Se={},Ft=(e,t,s)=>{const r={},n={};return f(e)?(Object.keys(e).map(u=>{const l=t.getState(u);l==null?n[u]=e[u](s):r[u]=l}),{cachedResolve:r,restResolve:n}):{cachedResolve:r,restResolve:n}},It=(e,t)=>{if(!f(e))return{};const s={};return Object.keys(e).map(r=>s[r]=e[r](t)),s},Pe=(e,t,s)=>G(s)?s.then(r=>{var n;return Je({Comp:e,routerProps:t,children:(n=r.default)!=null?n:r})}):Je({Comp:e,routerProps:t,children:s});var Dt=e=>{const{current:t,menu:s,...r}=e,n=t.map(p=>{const{component:o,resolve:a,loadData:b,loading:S,errorBoundary:E,icon:g,...C}=p;return C}),u=[...t].filter(p=>p.component),l=(p=0)=>{if(!u.length)return null;const o=u.shift(),{component:a,resolve:b,loadData:S,icon:E,key:g,...C}=o;if(typeof a=="function"||G(a)){const F=C.path;let y=Se[F];const{cachedResolve:d,restResolve:k}=Ft(b,r.store,C),B={loadPromise:It(S,C),restResolve:k,params:{current:n,...r,...C,...d}},j=l(p+1);if(y)return Pe(y,B,j);try{y=a(),y=O(y)?a:y}catch(N){y=a}return G(y)?y.then(N=>{var H;return y=(H=N.default)!=null?H:N,Se[F]=y,Pe(y,B,j)}):(Se[F]=y,Pe(y,B,j))}return typeof a=="string"?mt(a):a};return l()},Tt=e=>{const[t,s]=(0,c.useState)(e),[r,n]=(0,c.useState)(),[u,l]=(0,c.useState)(),p=(0,c.useRef)(),o=(0,c.useRef)(),a=(0,c.useRef)(),b=(0,c.useRef)(),S=()=>{typeof p.current=="function"&&(p.current({cancel:ve.cancelMsg}),p.current=null)},E=(0,c.useCallback)(d=>{typeof d=="function"?s(k=>({...k,...d(k)})):f(d)&&s(k=>({...k,...d}))},[]),g=(d,k="pushState")=>{const{basepath:I,browserRouter:B}=b.current,j=a.current,{path:N,params:H}=at(d,I,B,j);if(N===j)return;y({inputPath:N,inputParams:H},()=>history[k](d==null?void 0:d.state,"",N))},C=(0,c.useCallback)(d=>g(d),[]),F=(0,c.useCallback)(d=>g(d,"replaceState"),[]),y=(0,c.useCallback)(({inputPath:d="",inputParams:k={}},I)=>{const B=+new Date,{browserRouter:j,childKey:N,idKey:H,title:K,routers:ee,beforeRender:te,afterRender:ne,basepath:re,allowedNotFound:Z,...Nt}=b.current;if(!d){const{path:U,params:J}=ct(j);d=U,k={...k,...J}}new Promise((U,J)=>{ee!=null&&ee.length||J("\u8DEF\u7531\u4E3A\u7A7A\uFF01"),d!==a.current&&typeof te=="function"?te({path:d,params:k,prevPath:a.current},U,J):U()}).then(U=>{var J,Ve;if(U===!1)return;const Xe=U==null?void 0:U.path;if(Xe&&ae(re,Xe,j)!==d){F(U);return}o.current=(J=o.current)!=null?J:d;const{redirect:Y,current:se,menu:Ut}=Ke($(ee),d.split("?")[0],k,N,H);if(Y){if(Z&&Y==="/404"&&(typeof Z=="boolean"||typeof Z=="string"&&Te(o.current,Z)||i(Z)&&Z.find(Ee=>Te(o.current,Ee))))return;if(i(Y)){console.error(`\u522B\u95F9\uFF0C[${[d,...Y].join(" -> ")}] \u91CD\u5B9A\u5411\u6B7B\u5FAA\u73AF\uFF01\uFF01\uFF01`);return}C({path:Y,exact:Y!=="/404"});return}I==null||I(),(d==null?void 0:d.split("?")[0])!==((Ve=a.current)==null?void 0:Ve.split("?")[0])&&st(),ot(se,K);const ze={eventBus:pt,store:Le,useStore:_t,...Nt,updateRouter:E,router:{push:C,replace:F},current:se,menu:Ut,inputPath:o.current,prevPath:a.current,basepath:re,title:K,history:nt};ue.setState({...ze,browserRouter:j});const we=Dt(ze);if(a.current=d,o.current=null,S(),G(we)){const{promiseFn:Ee,cancelFn:Wt}=xe(we,{delay:ve.delay,msg:{timeout:ve.timeoutMsg}});return p.current=Wt,l(!0),Ee.then(_e=>{p.current=null;const{result:Ht,errMsg:de}=_e,Ye=de===!1?Ht:de!=null&&de.timeout?ce({error:{errMsg:`${d} ${de.timeout}`}}):null;Ye&&(l(!1),ye(ne,se.slice(-1)[0],B),n(Ye))}).catch(_e=>{throw p.current=null,l(!1),ye(ne,se.slice(-1)[0],B),n(ce({error:_e})),_e})}ye(ne,se.slice(-1)[0],B),n(we)}).catch(U=>{throw n(ce({error:U})),U})},[]);return(0,c.useEffect)(()=>{const{childKey:d="children",idKey:k="path",browserRouter:I=!1,routers:B=[],basepath:j="",exact:N=!1,inputPath:H="",inputParams:K={},...ee}=t,te=ke(j),ne=rt($(B),I,d,k,te,N);b.current={...ee,childKey:d,idKey:k,browserRouter:I,routers:ne,basepath:te};const re=I?"popstate":"hashchange",Z=()=>y({});return y({inputPath:H,inputParams:K}),Ce.on(C),Be.on(F),window.addEventListener(re,Z,!1),()=>{S(),Ce.off(C),Be.off(F),window.removeEventListener(re,Z,!1)}},[t]),{updateRouter:E,output:r,loading:u}},$t=e=>{const{to:t,onClick:s,preventDefault:r,stopPropagation:n=!0,exact:u=!0,target:l,...p}=e,o=()=>{const b=typeof t=="string"?{exact:u,path:t}:{exact:u,...t};Ce.emit(b)};return b=>{var S;if(b.preventDefault(),n&&b.stopPropagation(),!(p!=null&&p.disabled)){if(!r){if(l){const{browserRouter:E}=ue.getState(),g=typeof t=="string"?t:(S=t==null?void 0:t.path)!=null?S:"",C=De(t==null?void 0:t.query),F=E||g.indexOf("#/")>-1||Ie(g);window==null||window.open(`${F?"":"#"}${g}${C}`,l);return}o()}typeof s=="function"&&s()}}},fe=R(982),z={};z.styleTagTransform=Ze(),z.setAttributes=We(),z.insert=Ue().bind(null,"head"),z.domAPI=Ne(),z.insertStyleElement=He();var Rn=je()(fe.Z,z),pe=fe.Z&&fe.Z.locals?fe.Z.locals:void 0;const Bt=e=>{if(!e)return pe.link;const t=e.trim().split(" ").filter(Boolean),s=t.findIndex(r=>r==="active");return s>-1?(t.splice(s,1),[pe.link,pe.active,...t].join(" ")):[...t,pe.link].join(" ")};var Lt=e=>{const{to:t,onClick:s,preventDefault:r,stopPropagation:n,exact:u,target:l,className:p,...o}=e;return(0,L.jsx)("span",{onClick:$t(e),className:Bt(p),...o})};const jt=()=>ue.getState()}(),me}()});

import*as Zt from"react";var Jt={990:(c,m,p)=>{p.d(m,{Z:()=>k});var P=p(601),f=p.n(P),d=p(609),l=p.n(d),g=l()(f());g.push([c.id,`@keyframes before {
  0% {
    width: 0.6rem;
    box-shadow: 1.2rem -0.6rem #ff3e38, -1.2rem 0.6rem #318ffa;
  }
  35% {
    width: 3rem;
    box-shadow: 0 -0.6rem #ff3e38, 0 0.6rem #318ffa;
  }
  70% {
    width: 0.6rem;
    box-shadow: -1.2rem -0.6rem #ff3e38, 1.2rem 0.6rem #318ffa;
  }
  100% {
    box-shadow: 1.2rem -0.6rem #ff3e38, -1.2rem 0.6rem #318ffa;
  }
}
@keyframes after {
  0% {
    height: 0.6rem;
    box-shadow: 0.6rem 1.2rem #6ce581, -0.6rem -1.2rem #fecb2e;
  }
  35% {
    height: 3rem;
    box-shadow: 0.6rem 0 #6ce581, -0.6rem 0 #fecb2e;
  }
  70% {
    height: 0.6rem;
    box-shadow: 0.6rem -1.2rem #6ce581, -0.6rem 1.2rem #fecb2e;
  }
  100% {
    box-shadow: 0.6rem 1.2rem #6ce581, -0.6rem -1.2rem #fecb2e;
  }
}
.spinner {
  position: relative;
  height: 100%;
  min-height: 100px;
  display: block;
  overflow: hidden;
  pointer-events: auto;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 999;
  background-color: hsla(0, 0%, 72%, 0.24);
}
.spinner.absolute {
  position: absolute;
  min-height: auto;
}
.spinner.global {
  position: fixed;
  width: 100vw;
  height: 100vh;
}
.spinner .spinning {
  width: 3rem;
  height: 3rem;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) rotate(165deg);
  margin: 0;
}
.spinner .spinning::before,
.spinner .spinning::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  display: block;
  width: 0.6rem;
  height: 0.6rem;
  border-radius: 0.3rem;
  transform: translate(-50%, -50%);
}
.spinner .spinning::before {
  animation: before 1.5s infinite;
}
.spinner .spinning::after {
  animation: after 1.5s infinite;
}
`,""]),g.locals={};const k=g},267:(c,m,p)=>{p.d(m,{Z:()=>k});var P=p(601),f=p.n(P),d=p(609),l=p.n(d),g=l()(f());g.push([c.id,`.Iuy_e {
  text-decoration: none;
  cursor: pointer;
  color: var(--linkColor);
  background-color: transparent;
  font-weight: 500;
  transition: color 0.3s;
}
.Iuy_e:active, .Iuy_e.D3oJg {
  color: var(--linkActiveColor, #42a5f5);
}
.Iuy_e:hover {
  color: var(--linkHoverColor, #2196f3);
}
.Iuy_e[disabled] {
  cursor: not-allowed;
  opacity: 0.7;
}
.Iuy_e[disabled]:active, .Iuy_e[disabled].D3oJg, .Iuy_e[disabled]:hover {
  color: var(--linkColor);
}
`,""]),g.locals={link:"Iuy_e",active:"D3oJg"};const k=g},609:c=>{c.exports=function(m){var p=[];return p.toString=function(){return this.map(function(f){var d="",l=typeof f[5]<"u";return f[4]&&(d+="@supports (".concat(f[4],") {")),f[2]&&(d+="@media ".concat(f[2]," {")),l&&(d+="@layer".concat(f[5].length>0?" ".concat(f[5]):""," {")),d+=m(f),l&&(d+="}"),f[2]&&(d+="}"),f[4]&&(d+="}"),d}).join("")},p.i=function(f,d,l,g,k){typeof f=="string"&&(f=[[null,f,void 0]]);var I={};if(l)for(var x=0;x<this.length;x++){var $=this[x][0];$!=null&&(I[$]=!0)}for(var M=0;M<f.length;M++){var R=[].concat(f[M]);l&&I[R[0]]||(typeof k<"u"&&(typeof R[5]>"u"||(R[1]="@layer".concat(R[5].length>0?" ".concat(R[5]):""," {").concat(R[1],"}")),R[5]=k),d&&(R[2]&&(R[1]="@media ".concat(R[2]," {").concat(R[1],"}")),R[2]=d),g&&(R[4]?(R[1]="@supports (".concat(R[4],") {").concat(R[1],"}"),R[4]=g):R[4]="".concat(g)),p.push(R))}},p}},601:c=>{c.exports=function(m){return m[1]}},837:(c,m,p)=>{var P;var f=p(810),d=Symbol.for("react.element"),l=Symbol.for("react.fragment"),g=Object.prototype.hasOwnProperty,k=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I={key:!0,ref:!0,__self:!0,__source:!0};function x($,M,R){var O,W={},j=null,pe=null;R!==void 0&&(j=""+R),M.key!==void 0&&(j=""+M.key),M.ref!==void 0&&(pe=M.ref);for(O in M)g.call(M,O)&&!I.hasOwnProperty(O)&&(W[O]=M[O]);if($&&$.defaultProps)for(O in M=$.defaultProps,M)W[O]===void 0&&(W[O]=M[O]);return{$$typeof:d,type:$,key:j,ref:pe,props:W,_owner:k.current}}P=l,m.jsx=x,m.jsxs=x},322:(c,m,p)=>{c.exports=p(837)},62:c=>{var m=[];function p(d){for(var l=-1,g=0;g<m.length;g++)if(m[g].identifier===d){l=g;break}return l}function P(d,l){for(var g={},k=[],I=0;I<d.length;I++){var x=d[I],$=l.base?x[0]+l.base:x[0],M=g[$]||0,R="".concat($," ").concat(M);g[$]=M+1;var O=p(R),W={css:x[1],media:x[2],sourceMap:x[3],supports:x[4],layer:x[5]};if(O!==-1)m[O].references++,m[O].updater(W);else{var j=f(W,l);l.byIndex=I,m.splice(I,0,{identifier:R,updater:j,references:1})}k.push(R)}return k}function f(d,l){var g=l.domAPI(l);g.update(d);var k=function(x){if(x){if(x.css===d.css&&x.media===d.media&&x.sourceMap===d.sourceMap&&x.supports===d.supports&&x.layer===d.layer)return;g.update(d=x)}else g.remove()};return k}c.exports=function(d,l){l=l||{},d=d||[];var g=P(d,l);return function(I){I=I||[];for(var x=0;x<g.length;x++){var $=g[x],M=p($);m[M].references--}for(var R=P(I,l),O=0;O<g.length;O++){var W=g[O],j=p(W);m[j].references===0&&(m[j].updater(),m.splice(j,1))}g=R}}},793:c=>{var m={};function p(f){if(typeof m[f]>"u"){var d=document.querySelector(f);if(window.HTMLIFrameElement&&d instanceof window.HTMLIFrameElement)try{d=d.contentDocument.head}catch{d=null}m[f]=d}return m[f]}function P(f,d){var l=p(f);if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(d)}c.exports=P},173:c=>{function m(p){var P=document.createElement("style");return p.setAttributes(P,p.attributes),p.insert(P,p.options),P}c.exports=m},892:(c,m,p)=>{function P(f){var d=p.nc;d&&f.setAttribute("nonce",d)}c.exports=P},36:c=>{function m(f,d,l){var g="";l.supports&&(g+="@supports (".concat(l.supports,") {")),l.media&&(g+="@media ".concat(l.media," {"));var k=typeof l.layer<"u";k&&(g+="@layer".concat(l.layer.length>0?" ".concat(l.layer):""," {")),g+=l.css,k&&(g+="}"),l.media&&(g+="}"),l.supports&&(g+="}");var I=l.sourceMap;I&&typeof btoa<"u"&&(g+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(I))))," */")),d.styleTagTransform(g,f,d.options)}function p(f){if(f.parentNode===null)return!1;f.parentNode.removeChild(f)}function P(f){var d=f.insertStyleElement(f);return{update:function(g){m(d,f,g)},remove:function(){p(d)}}}c.exports=P},464:c=>{function m(p,P){if(P.styleSheet)P.styleSheet.cssText=p;else{for(;P.firstChild;)P.removeChild(P.firstChild);P.appendChild(document.createTextNode(p))}}c.exports=m},810:c=>{var m=P=>{var f={};return A.d(f,P),f},p=P=>()=>P;c.exports=Zt}},ze={};function A(c){var m=ze[c];if(m!==void 0)return m.exports;var p=ze[c]={id:c,exports:{}};return Jt[c](p,p.exports,A),p.exports}A.n=c=>{var m=c&&c.__esModule?()=>c.default:()=>c;return A.d(m,{a:m}),m},A.d=(c,m)=>{for(var p in m)A.o(m,p)&&!A.o(c,p)&&Object.defineProperty(c,p,{enumerable:!0,get:m[p]})},A.o=(c,m)=>Object.prototype.hasOwnProperty.call(c,m),A.nc=void 0;var Y={};(()=>{A.d(Y,{rU:()=>Bt,cb:()=>Ut,Bv:()=>jt,yj:()=>Lt,tv:()=>Dt});var c=A(810);const p=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),f=e=>p(e)==="array",l=e=>p(e)==="object",k=e=>e?.$$typeof&&typeof e.$$typeof=="symbol"&&e.$$typeof.description==="react.element",x=e=>e?.__v_isVNode,M=(e,t)=>Object.prototype.hasOwnProperty.call(e??{},t),R=e=>{if(!f(e)&&!l(e))return e;const t=f(e)?[]:{};for(const s in e)if(M(e,s)){const r=e[s];t[s]=k(r)||x(r)||typeof r!="object"?r:r!==e?R(r):"cyclic"}else Object.setPrototypeOf(t,{[s]:e[s]});return t},O=R,j=e=>p(e)==="function",G=e=>p(e)==="promise"||l(e)&&j(e.then),we=(e,t=12e4,s="\u8BF7\u6C42\u8D85\u65F6\uFF01")=>{if(!G(e))return{};let r=null,n=null;return{promiseFn:new Promise((i,_)=>{r=(o="canceled")=>{clearTimeout(n),i({canceled:!0,errMsg:o})},t&&(t=typeof t!="number"?12e4:t,n=setTimeout(()=>r(s),t)),e.then(o=>{clearTimeout(n),i({result:o,errMsg:!1})}).catch(o=>{clearTimeout(n),_(o)})}),cancelFn:r}},Ae=e=>e?e.charAt(e.length-1)==="/"?e.slice(0,-1):e:"";var B=A(322);const Ye=(e,t)=>(0,B.jsx)("div",{dangerouslySetInnerHTML:{__html:e},...t}),se=e=>{const{error:t={},info:s=""}=e||{},{message:r,stack:n,errMsg:u}=t;let i=u||n||t.toString();i=`${i}
${s}`.replace(/\r|\n|\r\n/g,"<br/>"),i=i.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),i=i.replace(/\s/g,"&nbsp;");const _=r?.slice(0,120).split(". ").slice(0,2).join(". ");return(0,B.jsxs)("div",{style:{padding:"15px 20px",backgroundColor:"#fff",wordWrap:"break-word"},children:[Ye(i,{style:{color:"red"}}),_&&(0,B.jsxs)("a",{style:{display:"inline-block",padding:"15px",color:"#00b4cf"},href:`https://stackoverflow.com/search?q=${_}`,target:"_blank",children:[" ","--> \u53BB\u7F51\u4E0A\u67E5\u627E\u9519\u8BEF\u539F\u56E0\uFF1F"]})]})},Q=()=>{const e={};return{on:(n,u)=>{e[n]||(e[n]=[]),e[n].indexOf(u)===-1&&e[n].push(u)},emit:(n,u)=>{e[n]&&e[n].map(i=>i(u))},off:(n,u=null)=>{if(e[n]){if(typeof u!="function")return delete e[n];const i=e[n].indexOf(u);i>-1&&(e[n].splice(i,1),e[n].length||delete e[n])}}}},Oe=e=>{const t={};for(let s in e)M(e,s)||(t[s]=e[s]);return t},Ge=(e,t)=>{if(!l(e))return t;if(!l(t))return e;const s={...Oe(e),...Oe(t)},r={...e,...t};return Object.keys(s).map(n=>{Object.setPrototypeOf(r,{[n]:s[n]})}),r},de=()=>{const{on:e,emit:t,off:s}=Q(),r={};return{getState:o=>O(r[o]),setState:(o,a=!1)=>{if(typeof o=="function"&&(o=o(O(r))),!l(o))throw TypeError("\u5FC5\u987B\u4F20\u5165object\u5BF9\u8C61\uFF01");const v=O(o);Object.keys(v).map(E=>{const S=r[E],b=v[E],C=l(b)&&l(S)?Ge(S,b):b;!a&&t(E,C),r[E]=C})},subscribe:(o,a)=>(e(o,a),()=>s(o,a)),unsubscribe:s,clean:o=>{typeof o=="string"?r[o]=void 0:Array.isArray(o)?o.map(a=>r[a]=void 0):Object.keys(r).map(a=>r[a]=void 0)}}},ke=e=>(t,s)=>{const[r,n]=(0,c.useState)(()=>{const o=e?.getState(t);return o!==void 0?o:(s!==void 0&&e?.setState({[t]:s},!0),s)}),u=(0,c.useCallback)(o=>e?.setState({[t]:typeof o=="function"?o(e?.getState(t)):o}),[]),i=(0,c.useCallback)(o=>e?.subscribe(t,o),[]),_=(0,c.useCallback)((o=o)=>e?.clean(o),[]);return(0,c.useEffect)(()=>{e?.subscribe(t,o=>n(o))},[]),[r,u,i,_]},Qe=de(),on=ke(Qe),cn=Q(),an=Q(),un="push-emitter",ln="replace-emitter",fn="useRoute-emitter",_e={delay:8e3,timeoutMsg:"\u8BF7\u6C42\u8D85\u65F6\uFF01",cancelMsg:"\u8BF7\u6C42\u5DF2\u53D6\u6D88\uFF01"},me="/404",Ke={getState:()=>history.state,go:e=>history.go(e),forward:()=>history.forward(),back:()=>history.back()},Me=(e,t,s,r,n=[])=>{const u=o=>{for(let a=0,v=o.length;a<v;a++){const E=o[a],S=E[r].split("?")[0];if(new RegExp("^"+S.replace(/:[^/]+/g,"[^/]+")+"$").test(t))return E;if(f(E[s])){const C=u(E[s]);if(C)return C}}},i=u(e);if(!i)return me;const{redirect:_}=i;return _?n.includes(_)?n:(n.push(_),Me(e,_.split("?")[0],s,r,n)):n[n.length-1]},et=(e,t,s,r,n)=>{if(!f(e))return null;const u=v=>{const E=v.split("/"),S=t.split("/"),b={};return E.map((C,F)=>C.indexOf(":")===0&&(b[C.slice(1)]=S[F])),b},i=(v,E)=>{const S=[],b=E.split("/:")[0];for(let C=0,F=v.length;C<F;C++){const y=v[C];if(y[n]===b){y.active=!0;const{name:h,title:w,icon:D,params:T}=y;S.push({name:h,title:w,icon:D,params:T,[n]:b})}else if(E.indexOf(`${y[n]}/`)===0){y.active=!0;const h=u(y[n]),w=Object.keys(h).map(J=>h[J]).join("/"),{name:D,title:T,icon:L}=y,U=w?`${b}/${w}`:y[n];S.push({name:D,title:T,icon:L,[n]:U,params:{...y.params,...h}})}else if(y[n]===E){y.active=!0;const h=u(y[n]),{[r]:w,...D}=y;S.push({...D,[n]:t,params:{...D.params,...s,...h}})}}return S},_=(v,E)=>{for(let S=0,b=v.length;S<b;S++){const C=v[S];if(E.indexOf(`${C[n]}/`)===0){C.active=!0;return}}},o=v=>{for(let E=0,S=v.length;E<S;E++){const b=v[E],C=(b[n]||"").split("?")[0];if(C===t){b.hideMenu&&_(v,b.parentPath||C),b.active=!0;const{[r]:y,...h}=b;return[{...h,params:{...h.params,...s}}]}if(new RegExp("^"+C.replace(/:[^/]+/g,"[^/]+")+"$").test(t))return i(v,C);if(f(b[r])){const y=o(b[r]);if(y){b.active=!0,b.open=!0;const{[r]:h,...w}=b;return[w,...y]}}}},a=o(e)||[];return{result:e,current:a}},Fe=(e,t,s)=>e.filter(r=>r.hideMenu||r[s].indexOf("/:")>-1?!1:(f(r[t])&&(r[t]=Fe(r[t],t,s)),!0)),tt=(e,t,s,r="children",n="path")=>{const u=Me(e,t,r,n);if(u)return{redirect:u};const{result:i,current:_}=et(e,t,s,r,n),o=Fe(i,r,n);return{current:_,menu:o}},Ie=e=>/^https?:\/\/[^\s/?.#]+\.[^\s]+/.test(e),he=(e,t)=>{const s=["#/","/"],r=s[!!t-0];if(!e||s.includes(e))return r;const n=e.charAt(e.length-1)==="/"?e.slice(0,-1):e;return t||n.indexOf("#/")>-1?n:`#${n}`},oe=(e,t,s,r=!1)=>{const n=he(t,s);return r?n:s?e&&n==="/"?e:`${e}${n}`:e?`${e}/${n}`:n},nt=(e,t,s,r,n,u)=>{if(!f(e))return e;const i=(_,o="")=>_.filter(a=>!a.denied).map(a=>{if(!u&&!a.exact&&!Ie(a[r])){(!a[r]||a[r]==="javascript:;")&&(a[r]="");const v=a[r].charAt(0)==="/"&&o.charAt(o.length-1)==="/"?a[r].slice(1):a[r].charAt(0)!=="/"&&o.charAt(o.length-1)!=="/"?`/${a[r]}`:a[r];a[r]=o?o+v:oe(n,v,t)}return a.redirect&&(a.redirect=oe(n,a.redirect,t)),f(a[s])&&(a[s]=i(a[s],a[r]),!a.redirect&&a[s].length&&(a.redirect=a[s][0][r])),a});return i(e)},De=e=>{if(!l(e))return"";const t=[];return Object.keys(e).map((s,r)=>{const n=r>0?"&":"?";t.push(`${n}${s}=${e[s]}`)}),t.join("")},ge=(e="")=>{const[t,s]=e.split("?");if(s){const r={};return s.split("&").map(u=>{const[i,_]=u.split("=");r[i]=_}),{path:t,params:r}}return{path:t}},rt=()=>{document.documentElement.scrollTop?document.documentElement.scrollTop=0:document.body.scrollTop&&(document.body.scrollTop=0)},st=(e,t)=>{for(let s=e.length-1,r;r=e[s--];){const{title:n,name:u}=r;if(typeof n=="string"&&n.length)return document.title=n;if((n==null||n===!0)&&u)return document.title=t?`${u}-${t}`:u;if(t)return document.title=t}},ot=e=>{const{pathname:t,search:s,hash:r}=location;if(e){const o=he(t,e),a=decodeURIComponent(`${o}${s}`),{params:v}=ge(a);return{path:a,params:v}}const n=decodeURIComponent(he(r,e)),{params:u}=ge(n),i=Ae(t);return{path:i?`${i}/${n}`:n,params:u}},ve=(e,t,s)=>{typeof e=="function"&&e({...t,stay:new Date-s})},ct=(e,t,s,r)=>{let n,u,i;if(typeof e=="string")n=e;else if(l(e))n=e.path,u=e.params,i=e.query;else return;!n||n==="."||n==="./"?n=r:n.indexOf("./")===0?n=`${r.split("?")[0]}${n.replace("./","/")}`:n.indexOf("../")===0&&(n=`${r.split("?")[0].split("/").slice(0,-1).join("/")}${n.replace("../","/")}`),n=oe(t,n,s,e?.exact);const _=ge(n);n=_.path;const o={..._.params,...i},a=De(o);return n=`${n}${a}`,u={...u,...o},{path:n,params:u}},Te=(e,t)=>{const s=e.split(t);return s.length>1?["","/"].includes(s[1].slice(0,1)):!1},at=Q(),$e=e=>{const{on:t,emit:s,off:r}=at;return{on:n=>t(e,n),emit:n=>s(e,n),off:n=>r(e,n)}},ut=e=>(t,s)=>{const{getState:r,setState:n,subscribe:u,unsubscribe:i,clean:_}=e;return s!==void 0&&n({[t]:s},!0),{getState:()=>r(t),setState:(o,a)=>n({[t]:o},a),subscribe:o=>u(t,o),unsubscribe:()=>i(t),clean:()=>_(t)}},it=de(),lt=ut(it),be=$e("push-emitter"),Be=$e("replace-emitter"),Z=lt("route-store"),ft=Q(),Le=de(),pt=ke(Le),dt=()=>![typeof window,typeof document].includes("undefined"),_t=e=>{if(!dt())return;const t=document.createElement("div");return t.innerHTML=e,t.children[0]};var mt=Object.defineProperty,ht=(e,t,s)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,gt=(e,t,s)=>(ht(e,typeof t!="symbol"?t+"":t,s),s);class vt extends c.default.Component{constructor(){super(...arguments),gt(this,"state",{error:null})}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,s){const{errorReport:r}=this.props;typeof r=="function"&&r({error:t,info:s.componentStack})}render(){const{error:t}=this.state,{fallback:s,children:r}=this.props;return t?s(t):r}}const bt=({children:e,report:t})=>{const s=(0,c.useRef)();return s.current?.state&&(s.current.state.error=null),(0,B.jsx)(vt,{ref:s,fallback:(r,n)=>se({error:r,info:n}),errorReport:t,children:e})};var yt=A(62),je=A.n(yt),Ct=A(36),Ue=A.n(Ct),Et=A(793),Ne=A.n(Et),Rt=A(892),We=A.n(Rt),Pt=A(173),He=A.n(Pt),St=A(464),Ze=A.n(St),ce=A(990),q={};q.styleTagTransform=Ze(),q.setAttributes=We(),q.insert=Ne().bind(null,"head"),q.domAPI=Ue(),q.insertStyleElement=He();var En=je()(ce.Z,q);const Rn=ce.Z&&ce.Z.locals?ce.Z.locals:void 0,xt=({global:e,absolute:t})=>(0,B.jsx)("div",{className:`spinner${e?" global":""}${t?" absolute":""}`,children:(0,B.jsx)("figure",{className:"spinning"})}),wt=()=>{const e=(0,c.useRef)([]);return(0,c.useEffect)(()=>()=>{e.current.map(s=>s.cancelFn()),e.current=[]},[]),{cancelablePromise:(0,c.useCallback)((s,r=!0)=>{const n=we(s,r);return e.current.indexOf(n)===-1&&e.current.push(n),n.promiseFn},[])}},Je=(e={})=>{const{cancelablePromise:t}=wt(),[s,r]=(0,c.useState)(e),n=(0,c.useRef)({}),u=(0,c.useRef)({}),i=(0,c.useCallback)((o=null)=>{Array.isArray(o)&&o.length?o.map(a=>n.current[a]=e[a]):n.current=e},[]),_=(0,c.useCallback)((o,a,v=!1)=>{const E=Object.keys(o),S=JSON.stringify(E.sort());if(!u.current[S]){u.current[S]=!0,v&&i(Array.isArray(v)?v:E),E.map(b=>{n.current[b]||(n.current[b]={}),n.current[b].pending=!0}),r({...n.current});for(let b=0,C=E.length;b<C;b++){const F=E[b];t(o[F]).then(y=>{let{result:h,errMsg:w}=y;b===C-1&&(u.current[S]=!1),typeof a=="function"&&(h=a(h)||h),n.current[F]={...h,pending:!1},w===!1&&r({...n.current})}).catch(y=>{throw b===C-1&&(u.current[S]=!1),n.current[F]={error:y,pending:!1},r({...n.current}),y})}}},[]);return[s,_,i]},ae=e=>Object.keys(e).length,At=e=>{const{Comp:t,restResolve:s,loadPromise:r,params:n,children:u}=e,[i,_]=Je(),[o,a]=Je();return(0,c.useEffect)(()=>{ae(s)&&_(s),ae(r)&&a(r)},[s,r]),(0,c.useEffect)(()=>{const v=ae(i);v&&v===ae(s)&&n.store.setState(i)},[i]),(0,B.jsx)(t,{...n,...i,...o,children:u})},Ot=e=>e===!1?null:k(e)?e:j(e)?(0,B.jsx)(e,{}):(0,B.jsx)(xt,{}),kt=({Loading:e,ErrorBoundary:t,loadedComp:s})=>{const r=(0,B.jsx)(c.Suspense,{fallback:Ot(e),children:s});return t===!1?r:j(t)?(0,B.jsx)(t,{children:r}):(0,B.jsx)(bt,{children:r})},Xe=({Comp:e,routerProps:t,children:s})=>{const{params:r,...n}=t,{loading:u,errorBoundary:i,..._}=r,o=(0,B.jsx)(At,{Comp:e,...n,params:_,children:s});return kt({Loading:u,ErrorBoundary:i,loadedComp:o})},ye={},Ce=(e,t,s,r)=>G(s)?s.then(n=>Xe({Comp:e,routerProps:t,children:n.default??n})):Xe({Comp:e,routerProps:t,children:s}),Mt=(e,t,s)=>{const r={},n={};return l(e)?(Object.keys(e).map(u=>{const i=t.getState(u);i==null?n[u]=e[u](s):r[u]=i}),{cachedResolve:r,restResolve:n}):{cachedResolve:r,restResolve:n}},Ft=(e,t)=>{if(!l(e))return{};const s={};return Object.keys(e).map(r=>s[r]=e[r](t)),s},It=e=>{const{current:t,menu:s,...r}=e,n=t.map(_=>{const{component:o,resolve:a,loadData:v,loading:E,errorBoundary:S,icon:b,...C}=_;return C}),u=[...t].filter(_=>_.component),i=(_=0)=>{if(!u.length)return null;const o=u.shift(),{component:a,resolve:v,loadData:E,icon:S,key:b,...C}=o;if(typeof a=="function"||G(a)){const F=C.path;let y=ye[F];const{cachedResolve:h,restResolve:w}=Mt(v,r.store,C),T={loadPromise:Ft(E,C),restResolve:w,params:{current:n,...r,...C,...h}},L=i(_+1);if(y)return Ce(y,T,L,F);try{y=a(),y=k(y)?a:y}catch{y=a}return G(y)?y.then(U=>(y=U.default??U,ye[F]=y,Ce(y,T,L,F))):(ye[F]=y,Ce(y,T,L,F))}return typeof a=="string"?_t(a):a};return i()},Dt=e=>{const[t,s]=(0,c.useState)(e),[r,n]=(0,c.useState)(),[u,i]=(0,c.useState)(),_=(0,c.useRef)(),o=(0,c.useRef)(),a=(0,c.useRef)(),v=(0,c.useRef)(),E=()=>{typeof _.current=="function"&&(_.current({cancel:_e.cancelMsg}),_.current=null)},S=(0,c.useCallback)(h=>{typeof h=="function"?s(w=>({...w,...h(w)})):l(h)&&s(w=>({...w,...h}))},[]),b=(h,w="pushState")=>{const{basepath:D,browserRouter:T}=v.current,L=a.current,{path:U,params:J}=ct(h,D,T,L);if(U===L)return;y({inputPath:U,inputParams:J},()=>history[w](h?.state,"",U))},C=(0,c.useCallback)(h=>b(h),[]),F=(0,c.useCallback)(h=>b(h,"replaceState"),[]),y=(0,c.useCallback)(({inputPath:h="",inputParams:w={}},D)=>{const T=+new Date,{browserRouter:L,childKey:U,idKey:J,title:K,routers:ie,beforeRender:ee,afterRender:te,basepath:ne,allowedNotFound:H,...Nt}=v.current;if(!h){const{path:N,params:X}=ot(L);h=N,w={...w,...X}}const Re=a.current;new Promise((N,X)=>{ie?.length||X("\u8DEF\u7531\u4E3A\u7A7A\uFF01"),h!==a.current&&typeof ee=="function"?ee({path:h,params:w,prevPath:Re},N,X):N()}).then(N=>{if(N===!1)return;const X=N?.path;if(X&&oe(ne,X,L)!==h){F(N);return}o.current=o.current??h;const{redirect:V,current:re,menu:Wt}=tt(O(ie),h.split("?")[0],w,U,J);if(V){if(H&&V===me&&(typeof H=="boolean"||typeof H=="string"&&Te(o.current,H)||f(H)&&H.find(Se=>Te(o.current,Se))))return;if(f(V)){console.error(`\u522B\u95F9\uFF0C[${[h,...V].join(" -> ")}] \u91CD\u5B9A\u5411\u6B7B\u5FAA\u73AF\uFF01\uFF01\uFF01`);return}return V===me?F({path:V}):C({path:V,exact:!0})}D?.(),h?.split("?")[0]!==a.current?.split("?")[0]&&rt(),st(re,K);const Ve={eventBus:ft,store:Le,useStore:pt,...Nt,updateRouter:S,emitRouter:Z.subscribe,router:{push:C,replace:F},current:re,menu:Wt,inputPath:o.current,prevPath:Re,basepath:ne,title:K,history:{...Ke,goBack:le=>C({...le,path:Re})}};Z.setState({...Ve,browserRouter:L});const Pe=It(Ve);if(a.current=h,o.current=null,E(),G(Pe)){const{promiseFn:le,cancelFn:Se}=we(Pe,{delay:_e.delay,msg:{timeout:_e.timeoutMsg}});return _.current=Se,i(!0),le.then(fe=>{_.current=null;const{result:Ht,errMsg:xe}=fe,qe=xe===!1?Ht:xe?.timeout?se({error:{errMsg:`${h} ${xe.timeout}`}}):null;qe&&(i(!1),ve(te,re.slice(-1)[0],T),n(qe))}).catch(fe=>{throw _.current=null,i(!1),ve(te,re.slice(-1)[0],T),n(se({error:fe})),fe})}ve(te,re.slice(-1)[0],T),n(Pe)}).catch(N=>{throw n(se({error:N})),N})},[]);return(0,c.useEffect)(()=>{const{childKey:h="children",idKey:w="path",browserRouter:D=!1,routers:T=[],basepath:L="",exact:U=!1,inputPath:J="",inputParams:K={},...ie}=t,ee=Ae(L),te=nt(O(T),D,h,w,ee,U);v.current={...ie,childKey:h,idKey:w,browserRouter:D,routers:te,basepath:ee};const ne=D?"popstate":"hashchange",H=()=>y({});return y({inputPath:J,inputParams:K}),be.on(C),Be.on(F),window.addEventListener(ne,H,!1),()=>{E(),be.off(C),Be.off(F),window.removeEventListener(ne,H,!1)}},[t]),{updateRouter:S,output:r,loading:u}},Tt=e=>{const{to:t,onClick:s,preventDefault:r,stopPropagation:n=!0,exact:u=!0,target:i,..._}=e,o=()=>{const v=typeof t=="string"?{exact:u,path:t}:{exact:u,...t};be.emit(v)};return v=>{if(v.preventDefault(),n&&v.stopPropagation(),!_?.disabled){if(!r){if(i){const{browserRouter:E}=Z.getState(),S=typeof t=="string"?t:t?.path??"",b=De(t?.query),C=E||S.indexOf("#/")>-1||Ie(S);window?.open(`${C?"":"#"}${S}${b}`,i);return}o()}typeof s=="function"&&s()}}};var ue=A(267),z={};z.styleTagTransform=Ze(),z.setAttributes=We(),z.insert=Ne().bind(null,"head"),z.domAPI=Ue(),z.insertStyleElement=He();var Fn=je()(ue.Z,z);const Ee=ue.Z&&ue.Z.locals?ue.Z.locals:void 0,$t=e=>{if(!e)return Ee.link;const t=e.trim().split(" ").filter(Boolean),r=t.find(n=>n==="active")?[Ee.active]:[];return[Ee.link,...r,...t].join(" ")},Bt=e=>{const{to:t,onClick:s,preventDefault:r,stopPropagation:n,exact:u,target:i,className:_,...o}=e;return(0,B.jsx)("span",{onClick:Tt(e),className:$t(_),...o})},Lt=()=>{const[e,t]=(0,c.useState)(Z.getState());return(0,c.useEffect)(()=>Z.subscribe(s=>t(s)),[]),e},jt=Z.getState,Ut=Z.subscribe})();var Xt=Y.rU,Vt=Y.cb,qt=Y.Bv,zt=Y.yj,Yt=Y.tv;export{Xt as Link,Vt as emitRoute,qt as getRoute,zt as useRoute,Yt as useRouter};

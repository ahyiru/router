(function(se,Z){typeof exports=="object"&&typeof module=="object"?module.exports=Z(require("react")):typeof define=="function"&&define.amd?define("router",["react"],Z):typeof exports=="object"?exports.router=Z(require("react")):se.router=Z(se.React)})(this,function(Ce){return function(){"use strict";var se={201:function(a,m,g){var x=g(703),v=g.n(x),l=g(414),_=g.n(l),f=_()(v());f.push([a.id,`@keyframes before {
  0% {
    width: 0.6rem;
    box-shadow: 1.2rem -0.6rem #ff3e38, -1.2rem 0.6rem #318ffa;
  }
  35% {
    width: 3rem;
    box-shadow: 0 -0.6rem #ff3e38, 0 0.6rem #318ffa;
  }
  70% {
    width: 0.6rem;
    box-shadow: -1.2rem -0.6rem #ff3e38, 1.2rem 0.6rem #318ffa;
  }
  100% {
    box-shadow: 1.2rem -0.6rem #ff3e38, -1.2rem 0.6rem #318ffa;
  }
}
@keyframes after {
  0% {
    height: 0.6rem;
    box-shadow: 0.6rem 1.2rem #6ce581, -0.6rem -1.2rem #fecb2e;
  }
  35% {
    height: 3rem;
    box-shadow: 0.6rem 0 #6ce581, -0.6rem 0 #fecb2e;
  }
  70% {
    height: 0.6rem;
    box-shadow: 0.6rem -1.2rem #6ce581, -0.6rem 1.2rem #fecb2e;
  }
  100% {
    box-shadow: 0.6rem 1.2rem #6ce581, -0.6rem -1.2rem #fecb2e;
  }
}
.spinner {
  position: relative;
  height: 100%;
  min-height: 100px;
  display: block;
  overflow: hidden;
  pointer-events: auto;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 999;
  background-color: hsla(0, 0%, 72%, 0.24);
}
.spinner.absolute {
  position: absolute;
  min-height: auto;
}
.spinner.global {
  position: fixed;
  width: 100vw;
  height: 100vh;
}
.spinner .spinning {
  width: 3rem;
  height: 3rem;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) rotate(165deg);
  margin: 0;
}
.spinner .spinning::before,
.spinner .spinning::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  display: block;
  width: 0.6rem;
  height: 0.6rem;
  border-radius: 0.3rem;
  transform: translate(-50%, -50%);
}
.spinner .spinning::before {
  animation: before 1.5s infinite;
}
.spinner .spinning::after {
  animation: after 1.5s infinite;
}
`,""]),f.locals={},m.Z=f},414:function(a){a.exports=function(m){var g=[];return g.toString=function(){return this.map(function(v){var l="",_=typeof v[5]!="undefined";return v[4]&&(l+="@supports (".concat(v[4],") {")),v[2]&&(l+="@media ".concat(v[2]," {")),_&&(l+="@layer".concat(v[5].length>0?" ".concat(v[5]):""," {")),l+=m(v),_&&(l+="}"),v[2]&&(l+="}"),v[4]&&(l+="}"),l}).join("")},g.i=function(v,l,_,f,T){typeof v=="string"&&(v=[[null,v,void 0]]);var k={};if(_)for(var E=0;E<this.length;E++){var I=this[E][0];I!=null&&(k[I]=!0)}for(var A=0;A<v.length;A++){var C=[].concat(v[A]);_&&k[C[0]]||(typeof T!="undefined"&&(typeof C[5]=="undefined"||(C[1]="@layer".concat(C[5].length>0?" ".concat(C[5]):""," {").concat(C[1],"}")),C[5]=T),l&&(C[2]&&(C[1]="@media ".concat(C[2]," {").concat(C[1],"}")),C[2]=l),f&&(C[4]?(C[1]="@supports (".concat(C[4],") {").concat(C[1],"}"),C[4]=f):C[4]="".concat(f)),g.push(C))}},g}},703:function(a){a.exports=function(m){return m[1]}},53:function(a,m,g){var x;var v=g(899),l=Symbol.for("react.element"),_=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,T=v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k={key:!0,ref:!0,__self:!0,__source:!0};function E(I,A,C){var F,D={},q=null,J=null;C!==void 0&&(q=""+C),A.key!==void 0&&(q=""+A.key),A.ref!==void 0&&(J=A.ref);for(F in A)f.call(A,F)&&!k.hasOwnProperty(F)&&(D[F]=A[F]);if(I&&I.defaultProps)for(F in A=I.defaultProps,A)D[F]===void 0&&(D[F]=A[F]);return{$$typeof:l,type:I,key:q,ref:J,props:D,_owner:T.current}}x=_,m.jsx=E,m.jsxs=E},458:function(a,m,g){a.exports=g(53)},748:function(a){var m=[];function g(l){for(var _=-1,f=0;f<m.length;f++)if(m[f].identifier===l){_=f;break}return _}function x(l,_){for(var f={},T=[],k=0;k<l.length;k++){var E=l[k],I=_.base?E[0]+_.base:E[0],A=f[I]||0,C="".concat(I," ").concat(A);f[I]=A+1;var F=g(C),D={css:E[1],media:E[2],sourceMap:E[3],supports:E[4],layer:E[5]};if(F!==-1)m[F].references++,m[F].updater(D);else{var q=v(D,_);_.byIndex=k,m.splice(k,0,{identifier:C,updater:q,references:1})}T.push(C)}return T}function v(l,_){var f=_.domAPI(_);f.update(l);var T=function(E){if(E){if(E.css===l.css&&E.media===l.media&&E.sourceMap===l.sourceMap&&E.supports===l.supports&&E.layer===l.layer)return;f.update(l=E)}else f.remove()};return T}a.exports=function(l,_){_=_||{},l=l||[];var f=x(l,_);return function(k){k=k||[];for(var E=0;E<f.length;E++){var I=f[E],A=g(I);m[A].references--}for(var C=x(k,_),F=0;F<f.length;F++){var D=f[F],q=g(D);m[q].references===0&&(m[q].updater(),m.splice(q,1))}f=C}}},736:function(a){var m={};function g(v){if(typeof m[v]=="undefined"){var l=document.querySelector(v);if(window.HTMLIFrameElement&&l instanceof window.HTMLIFrameElement)try{l=l.contentDocument.head}catch(_){l=null}m[v]=l}return m[v]}function x(v,l){var _=g(v);if(!_)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");_.appendChild(l)}a.exports=x},706:function(a){function m(g){var x=document.createElement("style");return g.setAttributes(x,g.attributes),g.insert(x,g.options),x}a.exports=m},567:function(a,m,g){function x(v){var l=g.nc;l&&v.setAttribute("nonce",l)}a.exports=x},306:function(a){function m(v,l,_){var f="";_.supports&&(f+="@supports (".concat(_.supports,") {")),_.media&&(f+="@media ".concat(_.media," {"));var T=typeof _.layer!="undefined";T&&(f+="@layer".concat(_.layer.length>0?" ".concat(_.layer):""," {")),f+=_.css,T&&(f+="}"),_.media&&(f+="}"),_.supports&&(f+="}");var k=_.sourceMap;k&&typeof btoa!="undefined"&&(f+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(k))))," */")),l.styleTagTransform(f,v,l.options)}function g(v){if(v.parentNode===null)return!1;v.parentNode.removeChild(v)}function x(v){var l=v.insertStyleElement(v);return{update:function(f){m(l,v,f)},remove:function(){g(l)}}}a.exports=x},62:function(a){function m(g,x){if(x.styleSheet)x.styleSheet.cssText=g;else{for(;x.firstChild;)x.removeChild(x.firstChild);x.appendChild(document.createTextNode(g))}}a.exports=m},899:function(a){a.exports=Ce}},Z={};function R(a){var m=Z[a];if(m!==void 0)return m.exports;var g=Z[a]={id:a,exports:{}};return se[a](g,g.exports,R),g.exports}(function(){R.n=function(a){var m=a&&a.__esModule?function(){return a.default}:function(){return a};return R.d(m,{a:m}),m}})(),function(){R.d=function(a,m){for(var g in m)R.o(m,g)&&!R.o(a,g)&&Object.defineProperty(a,g,{enumerable:!0,get:m[g]})}}(),function(){R.o=function(a,m){return Object.prototype.hasOwnProperty.call(a,m)}}(),function(){R.r=function(a){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}}(),function(){R.nc=void 0}();var pe={};return function(){R.r(pe),R.d(pe,{Link:function(){return It},routeStore:function(){return ae},useRoute:function(){return Dt},useRouter:function(){return Mt}});var a=R(899),m=R.n(a),x=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),l=e=>x(e)==="array",f=e=>x(e)==="object",k=e=>(e==null?void 0:e.$$typeof)&&typeof e.$$typeof=="symbol"&&e.$$typeof.description==="react.element",I=e=>e==null?void 0:e.__v_isVNode,C=(e,t)=>Object.prototype.hasOwnProperty.call(e!=null?e:{},t);const F=e=>{if(!l(e)&&!f(e))return e;const t=l(e)?[]:{};for(const s in e)if(C(e,s)){const r=e[s];t[s]=k(r)||I(r)||typeof r!="object"?r:r!==e?F(r):"cyclic"}else Object.setPrototypeOf(t,{[s]:e[s]});return t};var D=F,J=e=>x(e)==="function",Y=e=>x(e)==="promise"||f(e)&&J(e.then),xe=(e,t=12e4,s="\u8BF7\u6C42\u8D85\u65F6\uFF01")=>{if(!Y(e))return{};let r=null,n=null;return{promiseFn:new Promise((i,p)=>{r=(o="canceled")=>{clearTimeout(n),i({canceled:!0,errMsg:o})},t&&(t=typeof t!="number"?12e4:t,n=setTimeout(()=>r(s),t)),e.then(o=>{clearTimeout(n),i({result:o,errMsg:!1})}).catch(o=>{clearTimeout(n),p(o)})}),cancelFn:r}},Pe=e=>e?e.charAt(e.length-1)==="/"?e.slice(0,-1):e:"",L=R(458),qe=(e,t)=>(0,L.jsx)("div",{dangerouslySetInnerHTML:{__html:e},...t}),oe=e=>{const{error:t={},info:s=""}=e||{},{message:r,stack:n,errMsg:u}=t;let i=u||n||t.toString();i=`${i}
${s}`.replace(/\r|\n|\r\n/g,"<br/>"),i=i.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),i=i.replace(/\s/g,"&nbsp;");const p=r==null?void 0:r.slice(0,120).split(". ").slice(0,2).join(". ");return(0,L.jsxs)("div",{style:{padding:"15px 20px",backgroundColor:"#fff",wordWrap:"break-word"},children:[qe(i,{style:{color:"red"}}),p&&(0,L.jsxs)("a",{style:{display:"inline-block",padding:"15px",color:"#00b4cf"},href:`https://stackoverflow.com/search?q=${p}`,target:"_blank",children:[" ","--> \u53BB\u7F51\u4E0A\u67E5\u627E\u9519\u8BEF\u539F\u56E0\uFF1F"]})]})};const Re=(e,t,s,r,n=[])=>{const u=o=>{for(let c=0,b=o.length;c<b;c++){const w=o[c],P=w[r].split("?")[0];if(new RegExp("^"+P.replace(/:[^/]+/g,"[^/]+")+"$").test(t))return w;if(l(w[s])){const S=u(w[s]);if(S)return S}}},i=u(e);if(!i)return"/404";const{redirect:p}=i;return p?n.includes(p)?n:(n.push(p),Re(e,p.split("?")[0],s,r,n)):n[n.length-1]},He=(e,t,s,r,n)=>{if(!l(e))return null;const u=b=>{const w=b.split("/"),P=t.split("/"),h={};return w.map((S,M)=>S.indexOf(":")===0&&(h[S.slice(1)]=P[M])),h},i=(b,w)=>{const P=[],h=w.split("/:")[0];for(let S=0,M=b.length;S<M;S++){const y=b[S];if(y[n]===h){y.active=!0;const{name:d,title:O,icon:$,params:B}=y;P.push({name:d,title:O,icon:$,params:B,[n]:h})}else if(w.indexOf(`${y[n]}/`)===0){y.active=!0;const d=u(y[n]),O=Object.keys(d).map(H=>d[H]).join("/"),{name:$,title:B,icon:j}=y,N=O?`${h}/${O}`:y[n];P.push({name:$,title:B,icon:j,[n]:N,params:{...y.params,...d}})}else if(y[n]===w){y.active=!0;const d=u(y[n]),{[r]:O,...$}=y;P.push({...$,[n]:t,params:{...$.params,...s,...d}})}}return P},p=(b,w)=>{for(let P=0,h=b.length;P<h;P++){const S=b[P];if(w.indexOf(`${S[n]}/`)===0){S.active=!0;return}}},o=b=>{for(let w=0,P=b.length;w<P;w++){const h=b[w],S=(h[n]||"").split("?")[0];if(S===t){h.hideMenu&&p(b,h.parentPath||S),h.active=!0;const{[r]:y,...d}=h;return[{...d,params:{...d.params,...s}}]}if(new RegExp("^"+S.replace(/:[^/]+/g,"[^/]+")+"$").test(t))return i(b,S);if(l(h[r])){const y=o(h[r]);if(y){h.active=!0,h.open=!0;const{[r]:d,...O}=h;return[O,...y]}}}},c=o(e)||[];return{result:e,current:c}},Ee=(e,t,s)=>e.filter(r=>r.hideMenu||r[s].indexOf("/:")>-1?!1:(l(r[t])&&(r[t]=Ee(r[t],t,s)),!0));var We=(e,t,s,r="children",n="path")=>{const u=Re(e,t,r,n);if(u)return{redirect:u};const{result:i,current:p}=He(e,t,s,r,n),o=Ee(i,r,n);return{current:p,menu:o}},G=()=>{const e={};return{on:(n,u)=>{e[n]||(e[n]=[]),e[n].indexOf(u)===-1&&e[n].push(u)},emit:(n,u)=>{e[n]&&e[n].map(i=>i(u))},off:(n,u=null)=>{if(e[n]){if(typeof u!="function")return e[n]=[];const i=e[n].indexOf(u);i>-1&&e[n].splice(i,1)}}}};const Oe=e=>{const t={};for(let s in e)C(e,s)||(t[s]=e[s]);return t};var Ze=(e,t)=>{if(!f(e))return t;if(!f(t))return e;const s={...Oe(e),...Oe(t)},r={...e,...t};return Object.keys(s).map(n=>{Object.setPrototypeOf(r,{[n]:s[n]})}),r},de=()=>{const{on:e,emit:t,off:s}=G(),r={};return{getState:o=>D(r[o]),setState:(o,c=!1)=>{if(typeof o=="function"&&(o=o(D(r))),!f(o))throw TypeError("\u5FC5\u987B\u4F20\u5165object\u5BF9\u8C61\uFF01");const b=D(o);Object.keys(b).map(w=>{const P=r[w],h=b[w],S=f(h)&&f(P)?Ze(P,h):h;!c&&t(w,S),r[w]=S})},subscribe:(o,c)=>(e(o,c),()=>s(o,c)),unsubscribe:s,clean:o=>{typeof o=="string"?r[o]=void 0:Array.isArray(o)?o.map(c=>r[c]=void 0):Object.keys(r).map(c=>r[c]=void 0)}}},ke=e=>(t,s)=>{const[r,n]=(0,a.useState)(()=>{const o=e==null?void 0:e.getState(t);return o!==void 0?o:(s!==void 0&&(e==null||e.setState({[t]:s},!0)),s)}),u=(0,a.useCallback)(o=>e==null?void 0:e.setState({[t]:typeof o=="function"?o(e==null?void 0:e.getState(t)):o}),[]),i=(0,a.useCallback)(o=>e==null?void 0:e.subscribe(t,o),[]),p=(0,a.useCallback)((o=o)=>e==null?void 0:e.clean(o),[]);return(0,a.useEffect)(()=>{e==null||e.subscribe(t,o=>n(o))},[]),[r,u,i,p]};const Ve=de(),Gt=ke(Ve),Qt=G(),Kt=G(),en="push-emitter",tn="replace-emitter",nn="useRoute-emitter",me={delay:8e3,timeoutMsg:"\u8BF7\u6C42\u8D85\u65F6\uFF01",cancelMsg:"\u8BF7\u6C42\u5DF2\u53D6\u6D88\uFF01"},Je={getState:()=>history.state,go:e=>history.go(e),forward:()=>history.forward(),back:()=>history.back()};var Ae=e=>/^https?:\/\/[^\s/?.#]+\.[^\s]+/.test(e);const _e=(e,t)=>{const s=["#/","/"],r=s[!!t-0];if(!e||s.includes(e))return r;const n=e.charAt(e.length-1)==="/"?e.slice(0,-1):e;return t||n.indexOf("#/")>-1?n:`#${n}`},ce=(e,t,s,r=!1)=>{const n=_e(t,s);return r?n:s?e&&n==="/"?e:`${e}${n}`:e?`${e}/${n}`:n},ze=(e,t,s,r,n,u)=>{if(!l(e))return e;const i=(p,o="")=>p.filter(c=>!c.denied).map(c=>{if(!u&&!c.exact&&!Ae(c[r])){(!c[r]||c[r]==="javascript:;")&&(c[r]="");const b=c[r].charAt(0)==="/"&&o.charAt(o.length-1)==="/"?c[r].slice(1):c[r].charAt(0)!=="/"&&o.charAt(o.length-1)!=="/"?`/${c[r]}`:c[r];c[r]=o?o+b:ce(n,b,t)}return c.redirect&&(c.redirect=ce(n,c.redirect,t)),l(c[s])&&(c[s]=i(c[s],c[r]),!c.redirect&&c[s].length&&(c.redirect=c[s][0][r])),c});return i(e)};var Fe=e=>{if(!f(e))return"";const t=[];return Object.keys(e).map((s,r)=>{const n=r>0?"&":"?";t.push(`${n}${s}=${e[s]}`)}),t.join("")},he=(e="")=>{const[t,s]=e.split("?");if(s){const r={};return s.split("&").map(u=>{const[i,p]=u.split("=");r[i]=p}),{path:t,params:r}}return{path:t}};const Xe=()=>{document.documentElement.scrollTop?document.documentElement.scrollTop=0:document.body.scrollTop&&(document.body.scrollTop=0)},Ye=(e,t)=>{for(let s=e.length-1,r;r=e[s--];){const{title:n,name:u}=r;if(typeof n=="string"&&n.length)return document.title=n;if((n==null||n===!0)&&u)return document.title=t?`${u}-${t}`:u;if(t)return document.title=t}},Ge=e=>{const{pathname:t,search:s,hash:r}=location;if(e){const o=_e(t,e),c=decodeURIComponent(`${o}${s}`),{params:b}=he(c);return{path:c,params:b}}const n=decodeURIComponent(_e(r,e)),{params:u}=he(n),i=Pe(t);return{path:i?`${i}/${n}`:n,params:u}},ve=(e,t,s)=>{typeof e=="function"&&e({...t,stay:new Date-s})},Qe=(e,t,s,r)=>{let n,u,i;if(typeof e=="string")n=e;else if(f(e))n=e.path,u=e.params,i=e.query;else return;!n||n==="."||n==="./"?n=r:n.indexOf("./")===0&&(n=`${r.split("?")[0]}${n.replace("./","/")}`),n=ce(t,n,s,e==null?void 0:e.exact);const p=he(n);n=p.path;const o={...p.params,...i},c=Fe(o);return n=`${n}${c}`,u={...u,...o},{path:n,params:u}},Me=(e,t)=>{const s=e.split(t);return s.length>1?["","/"].includes(s[1].slice(0,1)):!1},Ke=G();var $e=e=>{const{on:t,emit:s,off:r}=Ke;return{on:n=>t(e,n),emit:n=>s(e,n),off:n=>r(e,n)}},et=e=>(t,s)=>{const{getState:r,setState:n,subscribe:u,unsubscribe:i,clean:p}=e;return s!==void 0&&n({[t]:s},!0),{getState:()=>r(t),setState:(o,c)=>n({[t]:o},c),subscribe:o=>u(t,o),unsubscribe:()=>i(t),clean:()=>p(t)}};const tt=de();var nt=et(tt);const ge=$e("push-emitter"),Te=$e("replace-emitter"),ae=nt("route-store"),rt=G(),Ie=de(),st=ke(Ie);var ot=()=>![typeof window,typeof document].includes("undefined"),ct=e=>{if(!ot())return;const t=document.createElement("div");return t.innerHTML=e,t.children[0]},at=Object.defineProperty,ut=(e,t,s)=>t in e?at(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,it=(e,t,s)=>(ut(e,typeof t!="symbol"?t+"":t,s),s);class lt extends m().Component{constructor(){super(...arguments),it(this,"state",{error:null})}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,s){const{errorReport:r}=this.props;typeof r=="function"&&r({error:t,info:s.componentStack})}render(){const{error:t}=this.state,{fallback:s,children:r}=this.props;return t?s(t):r}}var ft=({children:e,report:t})=>{var s;const r=(0,a.useRef)();return(s=r.current)!=null&&s.state&&(r.current.state.error=null),(0,L.jsx)(lt,{ref:r,fallback:(n,u)=>oe({error:n,info:u}),errorReport:t,children:e})},pt=R(748),dt=R.n(pt),mt=R(306),_t=R.n(mt),ht=R(736),vt=R.n(ht),gt=R(567),bt=R.n(gt),yt=R(706),St=R.n(yt),wt=R(62),Ct=R.n(wt),ue=R(201),z={};z.styleTagTransform=Ct(),z.setAttributes=bt(),z.insert=vt().bind(null,"head"),z.domAPI=_t(),z.insertStyleElement=St();var dn=dt()(ue.Z,z),mn=ue.Z&&ue.Z.locals?ue.Z.locals:void 0,xt=({global:e,absolute:t})=>(0,L.jsx)("div",{className:`spinner${e?" global":""}${t?" absolute":""}`,children:(0,L.jsx)("figure",{className:"spinning"})}),Pt=()=>{const e=(0,a.useRef)([]);return(0,a.useEffect)(()=>()=>{e.current.map(s=>s.cancelFn()),e.current=[]},[]),{cancelablePromise:(0,a.useCallback)((s,r=!0)=>{const n=xe(s,r);return e.current.indexOf(n)===-1&&e.current.push(n),n.promiseFn},[])}},De=(e={})=>{const{cancelablePromise:t}=Pt(),[s,r]=(0,a.useState)(e),n=(0,a.useRef)({}),u=(0,a.useRef)({}),i=(0,a.useCallback)((o=null)=>{Array.isArray(o)&&o.length?o.map(c=>n.current[c]=e[c]):n.current=e},[]),p=(0,a.useCallback)((o,c,b=!1)=>{const w=Object.keys(o),P=JSON.stringify(w.sort());if(!u.current[P]){u.current[P]=!0,b&&i(Array.isArray(b)?b:w),w.map(h=>{n.current[h]||(n.current[h]={}),n.current[h].pending=!0}),r({...n.current});for(let h=0,S=w.length;h<S;h++){const M=w[h];t(o[M]).then(y=>{let{result:d,errMsg:O}=y;h===S-1&&(u.current[P]=!1),typeof c=="function"&&(d=c(d)||d),n.current[M]={...d,pending:!1},O===!1&&r({...n.current})}).catch(y=>{throw h===S-1&&(u.current[P]=!1),n.current[M]={error:y,pending:!1},r({...n.current}),y})}}},[]);return[s,p,i]};const ie=e=>Object.keys(e).length;var Rt=e=>{const{Comp:t,restResolve:s,loadPromise:r,params:n,children:u}=e,[i,p]=De(),[o,c]=De();return(0,a.useEffect)(()=>{ie(s)&&p(s),ie(r)&&c(r)},[s,r]),(0,a.useEffect)(()=>{const b=ie(i);b&&b===ie(s)&&n.store.setState(i)},[i]),(0,L.jsx)(t,{...n,...i,...o,children:u})};const Et=e=>e===!1?null:k(e)?e:J(e)?(0,L.jsx)(e,{}):(0,L.jsx)(xt,{}),Ot=({Loading:e,ErrorBoundary:t,loadedComp:s})=>{const r=(0,L.jsx)(a.Suspense,{fallback:Et(e),children:s});return t===!1?r:J(t)?(0,L.jsx)(t,{children:r}):(0,L.jsx)(ft,{children:r})};var Be=({Comp:e,routerProps:t,children:s})=>{const{params:r,...n}=t,{loading:u,errorBoundary:i,...p}=r,o=(0,L.jsx)(Rt,{Comp:e,...n,params:p,children:s});return Ot({Loading:u,ErrorBoundary:i,loadedComp:o})};const be={},kt=(e,t,s)=>{const r={},n={};return f(e)?(Object.keys(e).map(u=>{const i=t.getState(u);i==null?n[u]=e[u](s):r[u]=i}),{cachedResolve:r,restResolve:n}):{cachedResolve:r,restResolve:n}},At=(e,t)=>{if(!f(e))return{};const s={};return Object.keys(e).map(r=>s[r]=e[r](t)),s},ye=(e,t,s)=>Y(s)?s.then(r=>{var n;return Be({Comp:e,routerProps:t,children:(n=r.default)!=null?n:r})}):Be({Comp:e,routerProps:t,children:s});var Ft=e=>{const{current:t,menu:s,...r}=e,n=t.map(p=>{const{component:o,resolve:c,loadData:b,loading:w,errorBoundary:P,icon:h,...S}=p;return S}),u=[...t].filter(p=>p.component),i=(p=0)=>{if(!u.length)return null;const o=u.shift(),{component:c,resolve:b,loadData:w,icon:P,key:h,...S}=o;if(typeof c=="function"||Y(c)){const M=S.path;let y=be[M];const{cachedResolve:d,restResolve:O}=kt(b,r.store,S),B={loadPromise:At(w,S),restResolve:O,params:{current:n,...r,...S,...d}},j=i(p+1);if(y)return ye(y,B,j);try{y=c(),y=k(y)?c:y}catch(N){y=c}return Y(y)?y.then(N=>{var H;return y=(H=N.default)!=null?H:N,be[M]=y,ye(y,B,j)}):(be[M]=y,ye(y,B,j))}return typeof c=="string"?ct(c):c};return i()},Mt=e=>{const[t,s]=(0,a.useState)(e),[r,n]=(0,a.useState)(),[u,i]=(0,a.useState)(),p=(0,a.useRef)(),o=(0,a.useRef)(),c=(0,a.useRef)(),b=(0,a.useRef)(),w=()=>{typeof p.current=="function"&&(p.current({cancel:me.cancelMsg}),p.current=null)},P=(0,a.useCallback)(d=>{typeof d=="function"?s(O=>({...O,...d(O)})):f(d)&&s(O=>({...O,...d}))},[]),h=(d,O="pushState")=>{const{basepath:$,browserRouter:B}=b.current,j=c.current,{path:N,params:H}=Qe(d,$,B,j);if(N===j)return;y({inputPath:N,inputParams:H},()=>history[O](d==null?void 0:d.state,"",N))},S=(0,a.useCallback)(d=>h(d),[]),M=(0,a.useCallback)(d=>h(d,"replaceState"),[]),y=(0,a.useCallback)(({inputPath:d="",inputParams:O={}},$)=>{const B=+new Date,{browserRouter:j,childKey:N,idKey:H,title:Q,routers:K,beforeRender:ee,afterRender:te,basepath:ne,allowedNotFound:W,...Bt}=b.current;if(!d){const{path:U,params:V}=Ge(j);d=U,O={...O,...V}}new Promise((U,V)=>{K!=null&&K.length||V("\u8DEF\u7531\u4E3A\u7A7A\uFF01"),d!==c.current&&typeof ee=="function"?ee({path:d,params:O,prevPath:c.current},U,V):U()}).then(U=>{var V,Le;if(U===!1)return;const je=U==null?void 0:U.path;if(je&&ce(ne,je,j)!==d){M(U);return}o.current=(V=o.current)!=null?V:d;const{redirect:X,current:re,menu:Lt}=We(D(K),d.split("?")[0],O,N,H);if(X){if(W&&X==="/404"&&(typeof W=="boolean"||typeof W=="string"&&Me(o.current,W)||l(W)&&W.find(we=>Me(o.current,we))))return;if(l(X)){console.error(`\u522B\u95F9\uFF0C[${[d,...X].join(" -> ")}] \u91CD\u5B9A\u5411\u6B7B\u5FAA\u73AF\uFF01\uFF01\uFF01`);return}S({path:X,exact:X!=="/404"});return}$==null||$(),(d==null?void 0:d.split("?")[0])!==((Le=c.current)==null?void 0:Le.split("?")[0])&&Xe(),Ye(re,Q);const Ne={eventBus:rt,store:Ie,useStore:st,...Bt,updateRouter:P,router:{push:S,replace:M},current:re,menu:Lt,inputPath:o.current,prevPath:c.current,basepath:ne,title:Q,history:Je};ae.setState({...Ne,browserRouter:j});const Se=Ft(Ne);if(c.current=d,o.current=null,w(),Y(Se)){const{promiseFn:we,cancelFn:jt}=xe(Se,{delay:me.delay,msg:{timeout:me.timeoutMsg}});return p.current=jt,i(!0),we.then(le=>{p.current=null;const{result:Nt,errMsg:fe}=le,Ue=fe===!1?Nt:fe!=null&&fe.timeout?oe({error:{errMsg:`${d} ${fe.timeout}`}}):null;Ue&&(i(!1),ve(te,re.slice(-1)[0],B),n(Ue))}).catch(le=>{throw p.current=null,i(!1),ve(te,re.slice(-1)[0],B),n(oe({error:le})),le})}ve(te,re.slice(-1)[0],B),n(Se)}).catch(U=>{throw n(oe({error:U})),U})},[]);return(0,a.useEffect)(()=>{const{childKey:d="children",idKey:O="path",browserRouter:$=!1,routers:B=[],basepath:j="",exact:N=!1,inputPath:H="",inputParams:Q={},...K}=t,ee=Pe(j),te=ze(D(B),$,d,O,ee,N);b.current={...K,childKey:d,idKey:O,browserRouter:$,routers:te,basepath:ee};const ne=$?"popstate":"hashchange",W=()=>y({});return y({inputPath:H,inputParams:Q}),ge.on(S),Te.on(M),window.addEventListener(ne,W,!1),()=>{w(),ge.off(S),Te.off(M),window.removeEventListener(ne,W,!1)}},[t]),{updateRouter:P,output:r,loading:u}},$t=e=>{const{to:t,onClick:s,preventDefault:r,stopPropagation:n=!0,exact:u=!0,target:i,...p}=e,o=()=>{const b=typeof t=="string"?{exact:u,path:t}:{exact:u,...t};ge.emit(b)};return b=>{var w;if(b.preventDefault(),n&&b.stopPropagation(),!(p!=null&&p.disabled)){if(!r){if(i){const{browserRouter:P}=ae.getState(),h=typeof t=="string"?t:(w=t==null?void 0:t.path)!=null?w:"",S=Fe(t==null?void 0:t.query),M=P||h.indexOf("#/")>-1||Ae(h);window==null||window.open(`${M?"":"#"}${h}${S}`,i);return}o()}typeof s=="function"&&s()}}};const Tt=(e,t)=>[...new Set([...(t!=null?t:"").trim().split(" "),...(e!=null?e:"").trim().split(" ")])].filter(Boolean).join(" ");var It=e=>{const{to:t,onClick:s,preventDefault:r,stopPropagation:n,exact:u,target:i,className:p,...o}=e;return(0,L.jsx)("span",{onClick:$t(e),className:Tt(p,"link"),...o})};const Dt=()=>ae.getState()}(),pe}()});

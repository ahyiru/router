import*as D from"react";var Ge={670:(e,r,n)=>{n.d(r,{A:()=>i});var s=n(758),t=n.n(s),o=n(935),c=n.n(o),a=c()(t());a.push([e.id,`@keyframes before {
  0% {
    width: 0.6rem;
    box-shadow: 1.2rem -0.6rem #ff3e38, -1.2rem 0.6rem #318ffa;
  }
  35% {
    width: 3rem;
    box-shadow: 0 -0.6rem #ff3e38, 0 0.6rem #318ffa;
  }
  70% {
    width: 0.6rem;
    box-shadow: -1.2rem -0.6rem #ff3e38, 1.2rem 0.6rem #318ffa;
  }
  100% {
    box-shadow: 1.2rem -0.6rem #ff3e38, -1.2rem 0.6rem #318ffa;
  }
}
@keyframes after {
  0% {
    height: 0.6rem;
    box-shadow: 0.6rem 1.2rem #6ce581, -0.6rem -1.2rem #fecb2e;
  }
  35% {
    height: 3rem;
    box-shadow: 0.6rem 0 #6ce581, -0.6rem 0 #fecb2e;
  }
  70% {
    height: 0.6rem;
    box-shadow: 0.6rem -1.2rem #6ce581, -0.6rem 1.2rem #fecb2e;
  }
  100% {
    box-shadow: 0.6rem 1.2rem #6ce581, -0.6rem -1.2rem #fecb2e;
  }
}
.spinner {
  position: relative;
  height: 100%;
  min-height: 100px;
  display: block;
  overflow: hidden;
  pointer-events: auto;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 999;
  background-color: hsla(0, 0%, 72%, 0.24);
}
.spinner.absolute {
  position: absolute;
  min-height: auto;
}
.spinner.global {
  position: fixed;
  width: 100vw;
  height: 100vh;
}
.spinner .spinning {
  width: 3rem;
  height: 3rem;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) rotate(165deg);
  margin: 0;
}
.spinner .spinning::before,
.spinner .spinning::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  display: block;
  width: 0.6rem;
  height: 0.6rem;
  border-radius: 0.3rem;
  transform: translate(-50%, -50%);
}
.spinner .spinning::before {
  animation: before 1.5s infinite;
}
.spinner .spinning::after {
  animation: after 1.5s infinite;
}
`,""]);const i=a},845:(e,r,n)=>{n.d(r,{Ay:()=>u,nf:()=>i,vu:()=>l});var s=n(758),t=n.n(s),o=n(935),c=n.n(o),a=c()(t());a.push([e.id,`.Iuy_e {
  text-decoration: none;
  cursor: pointer;
  color: var(--linkColor);
  background-color: transparent;
  font-weight: 500;
  transition: color 0.3s;
}
.Iuy_e:active, .Iuy_e.D3oJg {
  color: var(--linkActiveColor, #42a5f5);
}
.Iuy_e:hover {
  color: var(--linkHoverColor, #2196f3);
}
.Iuy_e[disabled] {
  cursor: not-allowed;
  opacity: 0.7;
}
.Iuy_e[disabled]:active, .Iuy_e[disabled].D3oJg, .Iuy_e[disabled]:hover {
  color: var(--linkColor);
}
`,""]);var i="Iuy_e",l="D3oJg";const u=a},935:e=>{e.exports=function(r){var n=[];return n.toString=function(){return this.map(function(t){var o="",c=typeof t[5]<"u";return t[4]&&(o+="@supports (".concat(t[4],") {")),t[2]&&(o+="@media ".concat(t[2]," {")),c&&(o+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),o+=r(t),c&&(o+="}"),t[2]&&(o+="}"),t[4]&&(o+="}"),o}).join("")},n.i=function(t,o,c,a,i){typeof t=="string"&&(t=[[null,t,void 0]]);var l={};if(c)for(var u=0;u<this.length;u++){var p=this[u][0];p!=null&&(l[p]=!0)}for(var h=0;h<t.length;h++){var f=[].concat(t[h]);c&&l[f[0]]||(typeof i<"u"&&(typeof f[5]>"u"||(f[1]="@layer".concat(f[5].length>0?" ".concat(f[5]):""," {").concat(f[1],"}")),f[5]=i),o&&(f[2]&&(f[1]="@media ".concat(f[2]," {").concat(f[1],"}")),f[2]=o),a&&(f[4]?(f[1]="@supports (".concat(f[4],") {").concat(f[1],"}"),f[4]=a):f[4]="".concat(a)),n.push(f))}},n}},758:e=>{e.exports=function(r){return r[1]}},197:(e,r)=>{var n;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function o(c,a,i){var l=null;if(i!==void 0&&(l=""+i),a.key!==void 0&&(l=""+a.key),"key"in a){i={};for(var u in a)u!=="key"&&(i[u]=a[u])}else i=a;return a=i.ref,{$$typeof:s,type:c,key:l,ref:a!==void 0?a:null,props:i}}n=t,r.jsx=o,r.jsxs=o},85:(e,r,n)=>{e.exports=n(197)},591:e=>{var r=[];function n(o){for(var c=-1,a=0;a<r.length;a++)if(r[a].identifier===o){c=a;break}return c}function s(o,c){for(var a={},i=[],l=0;l<o.length;l++){var u=o[l],p=c.base?u[0]+c.base:u[0],h=a[p]||0,f="".concat(p," ").concat(h);a[p]=h+1;var d=n(f),v={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(d!==-1)r[d].references++,r[d].updater(v);else{var _=t(v,c);c.byIndex=l,r.splice(l,0,{identifier:f,updater:_,references:1})}i.push(f)}return i}function t(o,c){var a=c.domAPI(c);a.update(o);var i=function(u){if(u){if(u.css===o.css&&u.media===o.media&&u.sourceMap===o.sourceMap&&u.supports===o.supports&&u.layer===o.layer)return;a.update(o=u)}else a.remove()};return i}e.exports=function(o,c){c=c||{},o=o||[];var a=s(o,c);return function(l){l=l||[];for(var u=0;u<a.length;u++){var p=a[u],h=n(p);r[h].references--}for(var f=s(l,c),d=0;d<a.length;d++){var v=a[d],_=n(v);r[_].references===0&&(r[_].updater(),r.splice(_,1))}a=f}}},128:e=>{var r={};function n(t){if(typeof r[t]>"u"){var o=document.querySelector(t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch{o=null}r[t]=o}return r[t]}function s(t,o){var c=n(t);if(!c)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");c.appendChild(o)}e.exports=s},51:e=>{function r(n){var s=document.createElement("style");return n.setAttributes(s,n.attributes),n.insert(s,n.options),s}e.exports=r},855:(e,r,n)=>{function s(t){var o=n.nc;o&&t.setAttribute("nonce",o)}e.exports=s},740:e=>{function r(t,o,c){var a="";c.supports&&(a+="@supports (".concat(c.supports,") {")),c.media&&(a+="@media ".concat(c.media," {"));var i=typeof c.layer<"u";i&&(a+="@layer".concat(c.layer.length>0?" ".concat(c.layer):""," {")),a+=c.css,i&&(a+="}"),c.media&&(a+="}"),c.supports&&(a+="}");var l=c.sourceMap;l&&typeof btoa<"u"&&(a+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(l))))," */")),o.styleTagTransform(a,t,o.options)}function n(t){if(t.parentNode===null)return!1;t.parentNode.removeChild(t)}function s(t){if(typeof document>"u")return{update:function(){},remove:function(){}};var o=t.insertStyleElement(t);return{update:function(a){r(o,t,a)},remove:function(){n(o)}}}e.exports=s},656:e=>{function r(n,s){if(s.styleSheet)s.styleSheet.cssText=n;else{for(;s.firstChild;)s.removeChild(s.firstChild);s.appendChild(document.createTextNode(n))}}e.exports=r}},xe={};function b(e){var r=xe[e];if(r!==void 0)return r.exports;var n=xe[e]={id:e,exports:{}};return Ge[e](n,n.exports,b),n.exports}b.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return b.d(r,{a:r}),r},b.d=(e,r)=>{for(var n in r)b.o(r,n)&&!b.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},b.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),b.nc=void 0;var w={};b.d(w,{N_:()=>gr,vY:()=>xr,aM:()=>br,RY:()=>Be,oe:()=>he,jd:()=>Bt,lq:()=>yr,rd:()=>pr});var Qe=e=>{var r={};return b.d(r,e),r},Mr=e=>()=>e;const g=Qe({Suspense:()=>D.Suspense,default:()=>D.default,useCallback:()=>D.useCallback,useEffect:()=>D.useEffect,useRef:()=>D.useRef,useState:()=>D.useState}),Ze=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),K=Ze,Ke=e=>K(e)==="array",M=Ke,et=e=>K(e)==="object",A=et,tt=e=>e?.$$typeof&&typeof e.$$typeof=="symbol"&&e.$$typeof.description?.indexOf("react.")===0,ue=tt,rt=e=>e?.__v_isVNode,nt=rt,st=(e,r)=>Object.prototype.hasOwnProperty.call(e??{},r),Ee=st,Ce=e=>{if(!M(e)&&!A(e))return e;const r=M(e)?[]:{};for(const n in e)if(Ee(e,n)){const s=e[n];r[n]=ue(s)||nt(s)||typeof s!="object"?s:s!==e?Ce(s):"cyclic"}else Object.setPrototypeOf(r,{[n]:e[n]});return r},Y=Ce,ot=e=>K(e)==="function",ie=ot,ct=e=>K(e)==="promise"||A(e)&&ie(e.then),J=ct,at=(e,r=3e5,n="\u8BF7\u6C42\u8D85\u65F6\uFF01")=>{if(!J(e))return{};let s=null,t=null;return{promiseFn:new Promise((c,a)=>{s=(i="canceled")=>{clearTimeout(t),c({canceled:!0,errMsg:i})},r&&(r=typeof r!="number"?12e4:r,t=setTimeout(()=>s(n),r)),e.then(i=>{clearTimeout(t),c({result:i,errMsg:!1})}).catch(i=>{clearTimeout(t),a(i)})}),cancelFn:s}},Re=at,ut=e=>e?e.charAt(e.length-1)==="/"?e.slice(0,-1):e:"",Se=ut;var C=b(85);const it=(e,r)=>(0,C.jsx)("div",{dangerouslySetInnerHTML:{__html:e},...r}),lt=it,ft=e=>{const{error:r={},info:n=""}=e||{},{message:s,stack:t,errMsg:o}=r;let c=o||t||r.toString();c=`${c}
${n}`.replace(/\r|\n|\r\n/g,"<br/>"),c=c.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),c=c.replace(/\s/g,"&nbsp;");const a=s?.slice(0,120).split(". ").slice(0,2).join(". ");return(0,C.jsxs)("div",{style:{padding:"15px 20px",backgroundColor:"#fff",wordWrap:"break-word"},children:[lt(c,{style:{color:"red"}}),a&&(0,C.jsxs)("a",{style:{display:"inline-block",padding:"15px",color:"#00b4cf"},href:`https://stackoverflow.com/search?q=${a}`,target:"_blank",children:[" ","--> \u53BB\u7F51\u4E0A\u67E5\u627E\u9519\u8BEF\u539F\u56E0\uFF1F"]})]})},ee=ft,pt=e=>/^https?:\/\/[^\s/?.#]+\.[^\s]+/.test(e),V=pt,dt=()=>{const e={};return{on:(t,o)=>{e[t]||(e[t]=[]),e[t].indexOf(o)===-1&&e[t].push(o)},emit:(t,o)=>{e[t]&&e[t].map(c=>c(o))},off:(t,o=null)=>{if(e[t]){if(typeof o!="function")return delete e[t];const c=e[t].indexOf(o);c>-1&&(e[t].splice(c,1),e[t].length||delete e[t])}}}},X=dt,Ae=e=>{const r={};for(let n in e)Ee(e,n)||(r[n]=e[n]);return r},_t=(e,r)=>{if(!A(e))return r;if(!A(r))return e;const n={...Ae(e),...Ae(r)},s={...e,...r};return Object.keys(n).map(t=>{Object.setPrototypeOf(s,{[t]:n[t]})}),s},mt=_t,ht=(e=X())=>{const{on:r,emit:n,off:s}=e,t={};return{getState:l=>Y(t[l]),setState:(l,u=!1)=>{if(typeof l=="function"&&(l=l(Y(t))),!A(l))throw TypeError("\u5FC5\u987B\u4F20\u5165object\u5BF9\u8C61\uFF01");const p=Y(l);Object.keys(p).map(h=>{const f=t[h],d=p[h],v=A(d)&&A(f)?mt(f,d):d;!u&&n(h,v),t[h]=v})},subscribe:(l,u)=>(r(l,u),()=>s(l,u)),unsubscribe:s,clean:l=>{typeof l=="string"?t[l]=void 0:Array.isArray(l)?l.map(u=>t[u]=void 0):Object.keys(t).map(u=>t[u]=void 0)}}},te=ht,gt=e=>(r,n)=>{const[s,t]=(0,g.useState)(()=>{const i=e?.getState(r);return i!==void 0?i:(n!==void 0&&e?.setState({[r]:n},!0),n)}),o=(0,g.useCallback)(i=>e?.setState({[r]:typeof i=="function"?i(e?.getState(r)):i}),[]),c=(0,g.useCallback)(i=>e?.subscribe(r,i),[]),a=(0,g.useCallback)((i=i)=>e?.clean(i),[]);return(0,g.useEffect)(()=>{e?.subscribe(r,i=>t(i))},[]),[s,o,c,a]},Pe=gt,vt=te(),Or=Pe(vt),Tr=X(),Fr=X(),$r="push-emitter",Ir="replace-emitter",Dr="useRoute-emitter",le={delay:8e3,timeoutMsg:"\u8BF7\u6C42\u8D85\u65F6\uFF01",cancelMsg:"\u8BF7\u6C42\u5DF2\u53D6\u6D88\uFF01"},fe="/404",yt={getState:()=>history.state,go:e=>history.go(e),forward:()=>history.forward(),back:()=>history.back()},ke=(e,r,n,s,t=[])=>{const o=i=>{for(let l=0,u=i.length;l<u;l++){const p=i[l],h=p[s].split("?")[0];if(new RegExp("^"+h.replace(/:[^/]+/g,"[^/]+")+"$").test(r)&&!p.childSameRouteLevel)return p;if(M(p[n])){const d=o(p[n]);if(d)return d}}},c=o(e);if(!c)return fe;const{redirect:a}=c;return a?V(a)?a:t.includes(a)?t:(t.push(a),ke(e,a.split("?")[0],n,s,t)):t[t.length-1]},bt=(e,r,n,s,t)=>{if(!M(e))return null;const o=u=>{const p=u.split("/"),h=r.split("/"),f={};return p.map((d,v)=>d.indexOf(":")===0&&(f[d.slice(1)]=h[v])),f},c=(u,p)=>{const h=[],f=p.split("/:")[0];for(let d=0,v=u.length;d<v;d++){const _=u[d];if(_[t]===f){_.active=!0;const{name:m,title:y,icon:E,params:x}=_;h.push({name:m,title:y,icon:E,params:x,[t]:f})}else if(p.indexOf(`${_[t]}/`)===0){_.active=!0;const m=o(_[t]),y=Object.keys(m).map(O=>m[O]).join("/"),{name:E,title:x,icon:R}=_,S=y?`${f}/${y}`:_[t];h.push({name:E,title:x,icon:R,[t]:S,params:{..._.params,...m}})}else if(_[t]===p){_.active=!0;const m=o(_[t]),{[s]:y,...E}=_;h.push({...E,[t]:r,params:{...E.params,...n,...m}})}}return h},a=(u,p)=>{for(let h=0,f=u.length;h<f;h++){const d=u[h];if(p.indexOf(`${d[t]}/`)===0){d.active=!0;return}}},i=u=>{for(let p=0,h=u.length;p<h;p++){const f=u[p],d=(f[t]||"").split("?")[0];if(d===r){if(f.childSameRouteLevel){f.active=!0,f.open=!0;const{[s]:y,...E}=f;return[E,...i(f[s])]}f.hideMenu&&a(u,f.parentPath||d),f.active=!0;const{[s]:_,...m}=f;return[{...m,params:{...m.params,...n}}]}if(new RegExp("^"+d.replace(/:[^/]+/g,"[^/]+")+"$").test(r))return c(u,d);if(M(f[s])){const _=i(f[s]);if(_){f.active=!0,f.open=!0;const{[s]:m,...y}=f;return[y,..._]}}}},l=i(e)||[];return{result:e,current:l}},we=(e,r,n)=>e.filter(s=>s.hideMenu||s[n].indexOf("/:")>-1?!1:(M(s[r])&&(s[r]=we(s[r],r,n)),!0)),xt=(e,r,n,s="children",t="path")=>{const o=ke(e,r,s,t);if(o)return{redirect:o};const{result:c,current:a}=bt(e,r,n,s,t),i=we(c,s,t);return{current:a,menu:i}},Et=xt,Ct=e=>M(e)&&!!e.length,Me=Ct,pe=(e,r)=>{const n=["#/","/"],s=n[!!r-0];if(!e||n.includes(e))return s;const t=e.charAt(e.length-1)==="/"?e.slice(0,-1):e;return r||t.indexOf("#/")>-1?t:`#${t}`},q=(e,r,n,s=!1)=>{const t=pe(r,n);return s?t:n?e&&t==="/"?e:`${e}${t}`:e?`${e}/${t}`:t},Rt=(e,r,n,s,t,o)=>{if(!Me(e))return e;const c=(a,i="",l=0)=>a.filter(u=>!u.denied).map(u=>{if(!o&&!u.exact&&!V(u[s])){(!u[s]||u[s]==="javascript:;")&&(u[s]="");const p=u[s].charAt(0)==="/"&&i.charAt(i.length-1)==="/"?u[s].slice(1):u[s].charAt(0)!=="/"&&i.charAt(i.length-1)!=="/"?`/${u[s]}`:u[s];u[s]=i?i+p:q(t,p,r)}if(u.redirect&&!V(u.redirect)&&(u.redirect=q(t,u.redirect,r)),Me(u[n])&&(u[n]=c(u[n],u[s],l+1),!u.redirect)){const p=u[n].findIndex(h=>h[s]===u[s]);p&&(u.redirect=u[n][0][s]),p>-1&&(u.childSameRouteLevel=l+1)}return u});return c(e)},St=e=>{if(!A(e))return"";const r=[];return Object.keys(e).map((n,s)=>{const t=s>0?"&":"?";r.push(`${t}${n}=${e[n]}`)}),r.join("")},Oe=St,At=(e="")=>{const[r,n]=e.split("?");if(n){const s={};return n.split("&").map(o=>{const[c,a]=o.split("=");s[c]=a}),{path:r,params:s}}return{path:r}},de=At,Pt=()=>{document.documentElement.scrollTop?document.documentElement.scrollTop=0:document.body.scrollTop&&(document.body.scrollTop=0)},kt=(e,r,n={})=>{const s=n.description??"";for(let t=e.length-1,o;o=e[t--];){const{title:c,name:a}=o;if(typeof c=="string"&&c.length)return document.title=c,document.getElementsByTagName("meta").description.content=`${s??""}${c}`,c;if((c==null||c===!0)&&a){const i=r?`${a}-${r}`:a;return document.title=i,document.getElementsByTagName("meta").description.content=`${s??""}${i}`,i}if(r)return document.title=r,document.getElementsByTagName("meta").description.content=`${s??""}${r}`,r}},wt=e=>{const{pathname:r,search:n,hash:s}=location;if(e){const i=pe(r,e),l=decodeURIComponent(`${i}${n}`),{params:u}=de(l);return{path:l,params:u}}const t=decodeURIComponent(pe(s,e)),{params:o}=de(t),c=Se(r);return{path:c?`${c}/${t}`:t,params:o}},_e=(e,r,n)=>{typeof e=="function"&&e({...r,stay:new Date-n})},Te=(e,r,n,s)=>{let t=typeof e=="string"?e:e.path??"";const o=Oe(e.query);V(t)||(t=q(n,t,s,e.exact)),window?.open(`${t}${o}`,r)},Mt=(e,r,n,s)=>{if(e.target||V(e.path)){Te(e,e.target,r,n);return}let t,o,c;if(typeof e=="string")t=e;else if(A(e))t=e.path,o=e.params,c=e.query;else return;!t||t==="."||t==="./"?t=s:t.indexOf("./")===0?t=`${s.split("?")[0]}${t.replace("./","/")}`:t.indexOf("../")===0&&(t=`${s.split("?")[0].split("/").slice(0,-1).join("/")}${t.replace("../","/")}`),t=q(r,t,n,e?.exact);const a=de(t);t=a.path;const i={...a.params,...c},l=Oe(i);return t=`${t}${l}`,o={...o,...i},t===s?!1:{path:t,params:o}},Fe=(e,r)=>{const n=e.split(r);return n.length>1?["","/"].includes(n[1].slice(0,1)):!1},Ot=X(),Tt=e=>{const{on:r,emit:n,off:s}=Ot;return{on:t=>r(e,t),emit:t=>n(e,t),off:t=>s(e,t)}},$e=Tt,Ft=(e=te())=>(r,n)=>{const{getState:s,setState:t,subscribe:o,unsubscribe:c,clean:a}=e;return n!==void 0&&t({[r]:n},!0),{getState:()=>s(r),setState:(i,l)=>t({[r]:i},l),subscribe:i=>o(r,i),unsubscribe:()=>c(r),clean:()=>a(r)}},Ie=Ft,$t=te(),It=Ie($t),Dt=It,me=$e("push-emitter"),De=$e("replace-emitter"),B=Dt("route-store"),Be=X(),Le=te(Be),he=Ie(Le),Bt=Pe(Le),Lt=()=>![typeof window,typeof document].includes("undefined"),jt=Lt,Nt=e=>{if(!jt())return;const r=document.createElement("div");return r.innerHTML=e,r.children[0]},Ut=Nt;class Wt extends g.default.Component{state={error:null};static getDerivedStateFromError(r){return{error:r}}componentDidCatch(r,n){const{errorReport:s}=this.props;typeof s=="function"&&s({error:r,info:n.componentStack})}render(){const{error:r}=this.state,{fallback:n,children:s}=this.props;return r?n?.(r)??r:s}}const Ht=({children:e,report:r})=>{const n=(0,g.useRef)();return n.current?.state&&(n.current.state.error=null),(0,C.jsx)(Wt,{ref:n,fallback:(s,t)=>ee({error:s,info:t}),errorReport:r,children:e})},Yt=Ht;var Jt=b(591),je=b.n(Jt),Vt=b(740),Ne=b.n(Vt),Xt=b(128),Ue=b.n(Xt),qt=b(855),We=b.n(qt),zt=b(51),He=b.n(zt),Gt=b(656),Ye=b.n(Gt),re=b(670),L={};L.styleTagTransform=Ye(),L.setAttributes=We(),L.insert=Ue().bind(null,"head"),L.domAPI=Ne(),L.insertStyleElement=He();var Br=je()(re.A,L);const Lr=re.A&&re.A.locals?re.A.locals:void 0,Qt=({global:e,absolute:r})=>(0,C.jsx)("div",{className:`spinner${e?" global":""}${r?" absolute":""}`,children:(0,C.jsx)("figure",{className:"spinning"})}),Zt=Qt,Kt=()=>{const e=(0,g.useRef)([]);return(0,g.useEffect)(()=>()=>{e.current.map(r=>r.cancelFn()),e.current=[]},[]),(0,g.useCallback)((r,n=!0)=>{const s=Re(r,n);return e.current.indexOf(s)===-1&&e.current.push(s),s.promiseFn},[])},er=Kt,tr=(e={})=>{const r=er(),[n,s]=(0,g.useState)(e),t=(0,g.useRef)({}),o=(0,g.useRef)({}),c=(0,g.useCallback)((i=null)=>{Array.isArray(i)&&i.length?i.map(l=>t.current[l]=e[l]):t.current=e},[]),a=(0,g.useCallback)((i,l,u=!1)=>{const p=Object.keys(i),h=JSON.stringify(p.sort());if(!o.current[h]){o.current[h]=!0,u&&c(Array.isArray(u)?u:p),p.map(f=>{t.current[f]||(t.current[f]={}),t.current[f].pending=!0}),s({...t.current});for(let f=0,d=p.length;f<d;f++){const v=p[f];r(i[v]).then(_=>{let{result:m,errMsg:y}=_;f===d-1&&(o.current[h]=!1),typeof l=="function"&&(m=l(m)||m),t.current[v]={...m,pending:!1},y===!1&&s({...t.current})}).catch(_=>{throw f===d-1&&(o.current[h]=!1),t.current[v]={error:_,pending:!1},s({...t.current}),_})}}},[]);return[n,a,c]},Je=tr,ne=e=>Object.keys(e).length,rr=e=>{const{Comp:r,restResolve:n,loadPromise:s,params:t,children:o}=e,[c,a]=Je(),[i,l]=Je();return(0,g.useEffect)(()=>{ne(n)&&a(n),ne(s)&&l(s)},[n,s]),(0,g.useEffect)(()=>{const u=ne(c);u&&u===ne(n)&&he.setState(c)},[c]),(0,C.jsx)(r,{...t,...c,...i,children:o})},nr=rr,sr=e=>e===!1?null:ue(e)?e:ie(e)?(0,C.jsx)(e,{}):(0,C.jsx)(Zt,{}),or=({Loading:e,ErrorBoundary:r,loadedComp:n})=>{const s=(0,C.jsx)(g.Suspense,{fallback:sr(e),children:n});return r===!1?s:ie(r)?(0,C.jsx)(r,{children:s}):(0,C.jsx)(Yt,{children:s})},cr=({Comp:e,routerProps:r,children:n})=>{const{params:s,...t}=r,{loading:o,errorBoundary:c,...a}=s,i=(0,C.jsx)(nr,{Comp:e,...t,params:a,children:n});return or({Loading:o,ErrorBoundary:c,loadedComp:i})},Ve=cr,ge={},ve=(e,r,n,s)=>J(n)?n.then(t=>Ve({Comp:e,routerProps:r,children:t.default??t})):Ve({Comp:e,routerProps:r,children:n}),ar=(e,r)=>{const n={},s={};return A(e)?(Object.keys(e).map(t=>{const o=he.getState(t);o==null?s[t]=e[t](r):n[t]=o}),{cachedResolve:n,restResolve:s}):{cachedResolve:n,restResolve:s}},ur=(e,r)=>{if(!A(e))return{};const n={};return Object.keys(e).map(s=>n[s]=e[s](r)),n},ir=e=>{const{current:r,menu:n,...s}=e,t=r.map(a=>{const{component:i,resolve:l,loadData:u,loading:p,errorBoundary:h,icon:f,...d}=a;return d}),o=[...r].filter(a=>a.component),c=(a=0)=>{if(!o.length)return null;const i=o.shift(),{component:l,resolve:u,loadData:p,icon:h,key:f,...d}=i;if(typeof l=="function"||J(l)){const v=`${d.path}${d.childSameRouteLevel??""}`;let _=ge[v];const{cachedResolve:m,restResolve:y}=ar(u,d),x={loadPromise:ur(p,d),restResolve:y,params:{current:t,...s,...d,...m}},R=c(a+1);if(_)return ve(_,x,R,v);try{_=l(),_=ue(_)?l:_}catch{_=l}return J(_)?_.then(S=>(_=S.default??S,ge[v]=_,ve(_,x,R,v))):(ge[v]=_,ve(_,x,R,v))}return typeof l=="string"?Ut(l):l};return c()},lr=ir,fr=e=>{const[r,n]=(0,g.useState)(e),[s,t]=(0,g.useState)(),[o,c]=(0,g.useState)(),a=(0,g.useRef)(),i=(0,g.useRef)(),l=(0,g.useRef)(),u=(0,g.useRef)(),p=()=>{typeof a.current=="function"&&(a.current({cancel:le.cancelMsg}),a.current=null)},h=(0,g.useCallback)(m=>{typeof m=="function"?n(y=>({...y,...m(y)})):A(m)&&n(y=>({...y,...m}))},[]),f=(m,y="pushState")=>{const{basepath:E,browserRouter:x}=u.current,R=l.current,S=Mt(m,E,x,R);if(!S)return;const{path:O,params:I}=S;_({inputPath:O,inputParams:I},()=>history[y](m?.state,"",O))},d=(0,g.useCallback)(m=>f(m),[]),v=(0,g.useCallback)(m=>f(m,"replaceState"),[]),_=(0,g.useCallback)(({inputPath:m="",inputParams:y={}},E)=>{const x=+new Date,{browserRouter:R,childKey:S,idKey:O,title:I,metas:z,routers:G,beforeRender:N,afterRender:U,basepath:W,allowedNotFound:k,...Xe}=u.current;if(!m){const{path:P,params:T}=wt(R);m=P,y={...y,...T}}const se=l.current;new Promise((P,T)=>{G?.length||T("\u8DEF\u7531\u4E3A\u7A7A\uFF01"),m!==l.current&&typeof N=="function"?N({path:m,params:y,prevPath:se},P,T):P()}).then(P=>{if(P===!1)return;const T=P?.path;if(T&&q(W,T,R)!==m){v(P);return}i.current=i.current??m;const{redirect:F,current:H,menu:qe}=Et(Y(G),m.split("?")[0],y,S,O);if(F){if(k&&F===fe&&(typeof k=="boolean"||typeof k=="string"&&Fe(i.current,k)||M(k)&&k.find(ce=>Fe(i.current,ce))))return;if(M(F)){console.error(`\u522B\u95F9\uFF0C[${[m,...F].join(" -> ")}] \u91CD\u5B9A\u5411\u6B7B\u5FAA\u73AF\uFF01\uFF01\uFF01`);return}return F===fe?v({path:F}):d({path:F,exact:!0})}E?.(),m?.split("?")[0]!==l.current?.split("?")[0]&&Pt(),kt(H,I,z);const ye={...Xe,updateRouter:h,router:{push:d,replace:v},current:H,menu:qe,inputPath:i.current,prevPath:se,browserRouter:R,basepath:W,title:I,history:{...yt,goBack:Q=>d({...Q,path:se})}};B.setState(ye);const oe=lr(ye);if(l.current=m,i.current=null,p(),J(oe)){const{promiseFn:Q,cancelFn:ce}=Re(oe,{delay:le.delay,msg:{timeout:le.timeoutMsg}});return a.current=ce,c(!0),Q.then(Z=>{a.current=null;const{result:ze,errMsg:ae}=Z,be=ae===!1?ze:ae?.timeout?ee({error:{errMsg:`${m} ${ae.timeout}`}}):null;be&&(c(!1),_e(U,H.slice(-1)[0],x),t(be))}).catch(Z=>{throw a.current=null,c(!1),_e(U,H.slice(-1)[0],x),t(ee({error:Z})),Z})}_e(U,H.slice(-1)[0],x),t(oe)}).catch(P=>{throw t(ee({error:P})),P})},[]);return(0,g.useEffect)(()=>{const m={description:document.getElementsByTagName("meta").description.content??""},{childKey:y="children",idKey:E="path",browserRouter:x=!1,routers:R=[],basepath:S="",exact:O=!1,inputPath:I="",inputParams:z={},...G}=r,N=Se(S),U=Rt(Y(R),x,y,E,N,O);u.current={...G,childKey:y,idKey:E,browserRouter:x,routers:U,basepath:N,metas:m};const W=x?"popstate":"hashchange",k=()=>_({});return _({inputPath:I,inputParams:z}),me.on(d),De.on(v),window.addEventListener(W,k,!1),()=>{p(),me.off(d),De.off(v),window.removeEventListener(W,k,!1)}},[r]),{updateRouter:h,output:s,loading:o}},pr=fr,dr=e=>{const{to:r,onClick:n,preventDefault:s,stopPropagation:t=!0,exact:o=!0,target:c,...a}=e,i=()=>{const u=typeof r=="string"?{exact:o,path:r}:{exact:o,...r};me.emit(u)};return u=>{if(u.preventDefault(),t&&u.stopPropagation(),!a?.disabled){if(!s){if(c){const{browserRouter:p,basepath:h}=B.getState();Te(r,c,h,p);return}i()}typeof n=="function"&&n()}}},_r=dr;var $=b(845),j={};j.styleTagTransform=Ye(),j.setAttributes=We(),j.insert=Ue().bind(null,"head"),j.domAPI=Ne(),j.insertStyleElement=He();var jr=je()($.Ay,j);const Nr=$.Ay&&$.Ay.locals?$.Ay.locals:void 0,mr=e=>{if(!e)return $.nf;const r=e.trim().split(" ").filter(Boolean),s=r.find(t=>t==="active")?[$.vu]:[];return[$.nf,...s,...r].join(" ")},hr=e=>{const{to:r,onClick:n,preventDefault:s,stopPropagation:t,exact:o,target:c,className:a,...i}=e;return(0,C.jsx)("span",{onClick:_r(e),className:mr(a),...i})},gr=hr,vr=()=>{const[e,r]=(0,g.useState)(B.getState());return(0,g.useEffect)(()=>B.subscribe(n=>r(n)),[]),e},yr=vr,br=B.getState,xr=B.subscribe;var Er=w.N_,Cr=w.vY,Rr=w.aM,Sr=w.RY,Ar=w.oe,Pr=w.jd,kr=w.lq,wr=w.rd;export{Er as Link,Cr as emitRoute,Rr as getRoute,Sr as huxyBus,Ar as huxyStore,Pr as useHuxyStore,kr as useRoute,wr as useRouter};
